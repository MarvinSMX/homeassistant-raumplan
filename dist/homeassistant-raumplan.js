/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t=window,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,n=Symbol(),i=new WeakMap;class r{constructor(t,e,i){if(this._$cssResult$=!0,i!==n)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const n=this.t;if(e&&void 0===t){const e=void 0!==n&&1===n.length;e&&(t=i.get(n)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&i.set(n,t))}return t}toString(){return this.cssText}}const o=(t,...e)=>{const i=1===t.length?t[0]:e.reduce((e,n,i)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[i+1],t[0]);return new r(i,t,n)},a=(n,i)=>{e?n.adoptedStyleSheets=i.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):i.forEach(e=>{const i=document.createElement("style"),r=t.litNonce;void 0!==r&&i.setAttribute("nonce",r),i.textContent=e.cssText,n.appendChild(i)})},s=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return(t=>new r("string"==typeof t?t:t+"",void 0,n))(e)})(t):t;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var l;const c=window,u=c.trustedTypes,d=u?u.emptyScript:"",h=c.reactiveElementPolyfillSupport,p={toAttribute(t,e){switch(e){case Boolean:t=t?d:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(t){n=null}}return n}},_=(t,e)=>e!==t&&(e==e||t==t),m={attribute:!0,type:String,converter:p,reflect:!1,hasChanged:_},f="finalized";class g extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(t){var e;this.finalize(),(null!==(e=this.h)&&void 0!==e?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach((e,n)=>{const i=this._$Ep(n,e);void 0!==i&&(this._$Ev.set(i,n),t.push(i))}),t}static createProperty(t,e=m){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const n="symbol"==typeof t?Symbol():"__"+t,i=this.getPropertyDescriptor(t,n,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}}static getPropertyDescriptor(t,e,n){return{get(){return this[e]},set(i){const r=this[t];this[e]=i,this.requestUpdate(t,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||m}static finalize(){if(this.hasOwnProperty(f))return!1;this[f]=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const n of e)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(s(t))}else void 0!==t&&e.push(s(t));return e}static _$Ep(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}_$Eu(){var t;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach(t=>t(this))}addController(t){var e,n;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(n=t.hostConnected)||void 0===n||n.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])})}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return a(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach(t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)})}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach(t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)})}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$EO(t,e,n=m){var i;const r=this.constructor._$Ep(t,n);if(void 0!==r&&!0===n.reflect){const o=(void 0!==(null===(i=n.converter)||void 0===i?void 0:i.toAttribute)?n.converter:p).toAttribute(e,n.type);this._$El=t,null==o?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(t,e){var n;const i=this.constructor,r=i._$Ev.get(t);if(void 0!==r&&this._$El!==r){const t=i.getPropertyOptions(r),o="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(n=t.converter)||void 0===n?void 0:n.fromAttribute)?t.converter:p;this._$El=r,this[r]=o.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,n){let i=!0;void 0!==t&&(((n=n||this.constructor.getPropertyOptions(t)).hasChanged||_)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((t,e)=>this[e]=t),this._$Ei=void 0);let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),null===(t=this._$ES)||void 0===t||t.forEach(t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)}),this.update(n)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(n)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach(t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach((t,e)=>this._$EO(e,this[e],t)),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var y;g[f]=!0,g.elementProperties=new Map,g.elementStyles=[],g.shadowRootOptions={mode:"open"},null==h||h({ReactiveElement:g}),(null!==(l=c.reactiveElementVersions)&&void 0!==l?l:c.reactiveElementVersions=[]).push("1.6.3");const v=window,b=v.trustedTypes,x=b?b.createPolicy("lit-html",{createHTML:t=>t}):void 0,w="$lit$",k=`lit$${(Math.random()+"").slice(9)}$`,$="?"+k,M=`<${$}>`,C=document,S=()=>C.createComment(""),E=t=>null===t||"object"!=typeof t&&"function"!=typeof t,P=Array.isArray,A=t=>P(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]),R="[ \t\n\f\r]",T=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,I=/-->/g,N=/>/g,D=RegExp(`>|${R}(?:([^\\s"'>=/]+)(${R}*=${R}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),F=/'/g,B=/"/g,z=/^(?:script|style|textarea|title)$/i,O=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),L=O(1),U=(O(2),Symbol.for("lit-noChange")),H=Symbol.for("lit-nothing"),j=new WeakMap,W=C.createTreeWalker(C,129,null,!1);function X(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==x?x.createHTML(e):e}const Y=(t,e)=>{const n=t.length-1,i=[];let r,o=2===e?"<svg>":"",a=T;for(let e=0;e<n;e++){const n=t[e];let s,l,c=-1,u=0;for(;u<n.length&&(a.lastIndex=u,l=a.exec(n),null!==l);)u=a.lastIndex,a===T?"!--"===l[1]?a=I:void 0!==l[1]?a=N:void 0!==l[2]?(z.test(l[2])&&(r=RegExp("</"+l[2],"g")),a=D):void 0!==l[3]&&(a=D):a===D?">"===l[0]?(a=null!=r?r:T,c=-1):void 0===l[1]?c=-2:(c=a.lastIndex-l[2].length,s=l[1],a=void 0===l[3]?D:'"'===l[3]?B:F):a===B||a===F?a=D:a===I||a===N?a=T:(a=D,r=void 0);const d=a===D&&t[e+1].startsWith("/>")?" ":"";o+=a===T?n+M:c>=0?(i.push(s),n.slice(0,c)+w+n.slice(c)+k+d):n+k+(-2===c?(i.push(void 0),e):d)}return[X(t,o+(t[n]||"<?>")+(2===e?"</svg>":"")),i]};class q{constructor({strings:t,_$litType$:e},n){let i;this.parts=[];let r=0,o=0;const a=t.length-1,s=this.parts,[l,c]=Y(t,e);if(this.el=q.createElement(l,n),W.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(i=W.nextNode())&&s.length<a;){if(1===i.nodeType){if(i.hasAttributes()){const t=[];for(const e of i.getAttributeNames())if(e.endsWith(w)||e.startsWith(k)){const n=c[o++];if(t.push(e),void 0!==n){const t=i.getAttribute(n.toLowerCase()+w).split(k),e=/([.?@])?(.*)/.exec(n);s.push({type:1,index:r,name:e[2],strings:t,ctor:"."===e[1]?Q:"?"===e[1]?tt:"@"===e[1]?et:K})}else s.push({type:6,index:r})}for(const e of t)i.removeAttribute(e)}if(z.test(i.tagName)){const t=i.textContent.split(k),e=t.length-1;if(e>0){i.textContent=b?b.emptyScript:"";for(let n=0;n<e;n++)i.append(t[n],S()),W.nextNode(),s.push({type:2,index:++r});i.append(t[e],S())}}}else if(8===i.nodeType)if(i.data===$)s.push({type:2,index:r});else{let t=-1;for(;-1!==(t=i.data.indexOf(k,t+1));)s.push({type:7,index:r}),t+=k.length-1}r++}}static createElement(t,e){const n=C.createElement("template");return n.innerHTML=t,n}}function V(t,e,n=t,i){var r,o,a,s;if(e===U)return e;let l=void 0!==i?null===(r=n._$Co)||void 0===r?void 0:r[i]:n._$Cl;const c=E(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===c?l=void 0:(l=new c(t),l._$AT(t,n,i)),void 0!==i?(null!==(a=(s=n)._$Co)&&void 0!==a?a:s._$Co=[])[i]=l:n._$Cl=l),void 0!==l&&(e=V(t,l._$AS(t,e.values),l,i)),e}class G{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:n},parts:i}=this._$AD,r=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:C).importNode(n,!0);W.currentNode=r;let o=W.nextNode(),a=0,s=0,l=i[0];for(;void 0!==l;){if(a===l.index){let e;2===l.type?e=new Z(o,o.nextSibling,this,t):1===l.type?e=new l.ctor(o,l.name,l.strings,this,t):6===l.type&&(e=new nt(o,this,t)),this._$AV.push(e),l=i[++s]}a!==(null==l?void 0:l.index)&&(o=W.nextNode(),a++)}return W.currentNode=C,r}v(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class Z{constructor(t,e,n,i){var r;this.type=2,this._$AH=H,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=i,this._$Cp=null===(r=null==i?void 0:i.isConnected)||void 0===r||r}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=V(this,t,e),E(t)?t===H||null==t||""===t?(this._$AH!==H&&this._$AR(),this._$AH=H):t!==this._$AH&&t!==U&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):A(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==H&&E(this._$AH)?this._$AA.nextSibling.data=t:this.$(C.createTextNode(t)),this._$AH=t}g(t){var e;const{values:n,_$litType$:i}=t,r="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=q.createElement(X(i.h,i.h[0]),this.options)),i);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===r)this._$AH.v(n);else{const t=new G(r,this),e=t.u(this.options);t.v(n),this.$(e),this._$AH=t}}_$AC(t){let e=j.get(t.strings);return void 0===e&&j.set(t.strings,e=new q(t)),e}T(t){P(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,i=0;for(const r of t)i===e.length?e.push(n=new Z(this.k(S()),this.k(S()),this,this.options)):n=e[i],n._$AI(r),i++;i<e.length&&(this._$AR(n&&n._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cp=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class K{constructor(t,e,n,i,r){this.type=1,this._$AH=H,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=H}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,n,i){const r=this.strings;let o=!1;if(void 0===r)t=V(this,t,e,0),o=!E(t)||t!==this._$AH&&t!==U,o&&(this._$AH=t);else{const i=t;let a,s;for(t=r[0],a=0;a<r.length-1;a++)s=V(this,i[n+a],e,a),s===U&&(s=this._$AH[a]),o||(o=!E(s)||s!==this._$AH[a]),s===H?t=H:t!==H&&(t+=(null!=s?s:"")+r[a+1]),this._$AH[a]=s}o&&!i&&this.j(t)}j(t){t===H?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class Q extends K{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===H?void 0:t}}const J=b?b.emptyScript:"";class tt extends K{constructor(){super(...arguments),this.type=4}j(t){t&&t!==H?this.element.setAttribute(this.name,J):this.element.removeAttribute(this.name)}}class et extends K{constructor(t,e,n,i,r){super(t,e,n,i,r),this.type=5}_$AI(t,e=this){var n;if((t=null!==(n=V(this,t,e,0))&&void 0!==n?n:H)===U)return;const i=this._$AH,r=t===H&&i!==H||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,o=t!==H&&(i===H||r);r&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==n?n:this.element,t):this._$AH.handleEvent(t)}}class nt{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){V(this,t)}}const it=v.litHtmlPolyfillSupport;null==it||it(q,Z),(null!==(y=v.litHtmlVersions)&&void 0!==y?y:v.litHtmlVersions=[]).push("2.8.0");var rt,ot;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class at extends g{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const n=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=n.firstChild),n}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{var i,r;const o=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:e;let a=o._$litPart$;if(void 0===a){const t=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:null;o._$litPart$=a=new Z(e.insertBefore(S(),t),t,void 0,null!=n?n:{})}return a._$AI(t),a})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return U}}at.finalized=!0,at._$litElement$=!0,null===(rt=globalThis.litElementHydrateSupport)||void 0===rt||rt.call(globalThis,{LitElement:at});const st=globalThis.litElementPolyfillSupport;null==st||st({LitElement:at});(null!==(ot=globalThis.litElementVersions)&&void 0!==ot?ot:globalThis.litElementVersions=[]).push("3.3.3");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const lt=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,t)}};function ct(t){return(e,n)=>void 0!==n?((t,e,n)=>{e.constructor.createProperty(n,t)})(t,e,n):lt(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
function ut(t){return ct({...t,state:!0})}var dt;
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */null===(dt=window.HTMLSlotElement)||void 0===dt||dt.prototype.assignedElements;var ht,pt;!function(t){t.language="language",t.system="system",t.comma_decimal="comma_decimal",t.decimal_comma="decimal_comma",t.space_comma="space_comma",t.none="none"}(ht||(ht={})),function(t){t.language="language",t.system="system",t.am_pm="12",t.twenty_four="24"}(pt||(pt={}));function _t(t){return t.substr(0,t.indexOf("."))}var mt=["closed","locked","off"],ft=(new Set(["fan","input_boolean","light","switch","group","automation"]),function(t,e,n,i){i=i||{},n=null==n?{}:n;var r=new Event(e,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});return r.detail=n,t.dispatchEvent(r),r});new Set(["call-service","divider","section","weblink","cast","select"]);var gt=function(t){ft(window,"haptic",t)},yt=function(t,e,n){void 0===n&&(n=!1),n?history.replaceState(null,"",e):history.pushState(null,"",e),ft(window,"location-changed",{replace:n})},vt=function(t,e){return function(t,e,n){void 0===n&&(n=!0);var i,r=_t(e),o="group"===r?"homeassistant":r;switch(r){case"lock":i=n?"unlock":"lock";break;case"cover":i=n?"open_cover":"close_cover";break;default:i=n?"turn_on":"turn_off"}return t.callService(o,i,{entity_id:e})}(t,e,mt.includes(t.states[e].state))},bt=function(t,e,n,i){var r;"double_tap"===i&&n.double_tap_action?r=n.double_tap_action:"hold"===i&&n.hold_action?r=n.hold_action:"tap"===i&&n.tap_action&&(r=n.tap_action),function(t,e,n,i){if(i||(i={action:"more-info"}),!i.confirmation||i.confirmation.exemptions&&i.confirmation.exemptions.some(function(t){return t.user===e.user.id})||(gt("warning"),confirm(i.confirmation.text||"Are you sure you want to "+i.action+"?")))switch(i.action){case"more-info":(n.entity||n.camera_image)&&ft(t,"hass-more-info",{entityId:n.entity?n.entity:n.camera_image});break;case"navigate":i.navigation_path&&yt(0,i.navigation_path);break;case"url":i.url_path&&window.open(i.url_path);break;case"toggle":n.entity&&(vt(e,n.entity),gt("success"));break;case"call-service":if(!i.service)return void gt("failure");var r=i.service.split(".",2);e.callService(r[0],r[1],i.service_data,i.target),gt("success");break;case"fire-dom-event":ft(t,"ll-custom",i)}}(t,e,n,r)};function xt(t){return void 0!==t&&"none"!==t.action}function wt(t){return Array.isArray(t.points)&&t.points.length>=3}function kt(t){if(wt(t))return t.points;const e=Math.min(100,Math.max(0,Number(t.x1)??0)),n=Math.min(100,Math.max(0,Number(t.y1)??0)),i=Math.min(100,Math.max(0,Number(t.x2)??100)),r=Math.min(100,Math.max(0,Number(t.y2)??100)),o=Math.min(e,i),a=Math.min(n,r),s=Math.max(e,i),l=Math.max(n,r);return[{x:o,y:a},{x:s,y:a},{x:s,y:l},{x:o,y:l}]}function $t(t,e){const n=t,i="x"===e?t.x??n.x:t.y??n.y;if(null==i)return;const r=Number(i);return Number.isFinite(r)?r:void 0}function Mt(t){return Array.isArray(t.room_boundaries)&&t.room_boundaries.length>0?t.room_boundaries:t.room_boundary?[t.room_boundary]:[]}function Ct(t){if(!t)return[];if(Array.isArray(t.buildings)&&t.buildings.length>0)return t.buildings;const e=t.config?.buildings;return Array.isArray(e)?e:[]}function St(t){if(!t)return[];const e=Ct(t);if(e.length>0)return e.flatMap(t=>t.rooms??[]);if(Array.isArray(t.rooms)&&t.rooms.length>0)return t.rooms;const n=t.config?.rooms;return Array.isArray(n)&&n.length>0?n:[]}function Et(t,e){const n=Ct(t);if(0===n.length)return null;let i=0;for(let t=0;t<n.length;t++){const r=n[t].rooms??[];if(e<i+r.length)return{buildingIndex:t,roomIndexInBuilding:e-i};i+=r.length}return null}function Pt(t){const e=t?.categories;return Array.isArray(e)?e:[]}function At(t){return t.category_id??t.preset??"default"}function Rt(t){if(!t)return[];const e=t;return Array.isArray(e.boundary)&&e.boundary.length>0?e.boundary:Array.isArray(e.boundaries)&&e.boundaries.length>0?e.boundaries:[]}function Tt(t,e,n){if("window_contact"===n.preset||"sliding_door"===n.preset)return Mt(n);if(null!==e){const n=Rt(St(t)[e]);if(n.length>0)return n}return Mt(n)}function It(t){const e=Rt(t);if(0===e.length)return null;let n=100,i=100,r=0,o=0;for(const t of e){const e=kt(t);for(const t of e)n=Math.min(n,t.x),i=Math.min(i,t.y),r=Math.max(r,t.x),o=Math.max(o,t.y)}const a=Math.max(0,r-n),s=Math.max(0,o-i);return a<=0||s<=0?null:{left:n,top:i,width:a,height:s}}function Nt(t,e){const n=t?.states?.[e];if(!n)return"mdi:help-circle";if(n.attributes?.icon)return n.attributes.icon;const i=e.split(".")[0],r=n.state;return"light"===i||"switch"===i?"on"===r?"mdi:lightbulb-on":"mdi:lightbulb-outline":"cover"===i?"mdi:blinds":"climate"===i?"mdi:thermostat":"sensor"===i?"mdi:gauge":"binary_sensor"===i?"mdi:motion-sensor":"mdi:circle"}function Dt(t,e){return t?.states?.[e]?.attributes?.friendly_name||e}function Ft(t,e,n){const i=t?.states?.[e];if(!i)return 20;const r=i.attributes??{},o=n??(e.startsWith("climate.")?"current_temperature":void 0),a=null!=o?r[o]:i.state;if(null==a)return 20;const s="string"==typeof a?parseFloat(a.replace(",",".")):Number(a);return Number.isFinite(s)?s:20}var Bt,zt=function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a};let Ot=Bt=class extends at{constructor(){super(...arguments),this._config={type:"",image:"",rooms:[]},this._pickerFor=null,this._buildingDrag=null,this._buildingPlacementPicker=null,this._planDrag=null,this._drawStart=null,this._drawCurrent=null,this._pickerPolygonPoints=[],this._pickerImageNatural=null,this._pickerImageAspect=null,this._pickerContentRect=null,this._roomCollapsed=new Set,this._buildingCollapsed=new Set,this._newCategoryId="",this._newCategoryLabel="",this._pickerDrag=null,this._pickerDocMove=t=>this._onPickerDocMove(t),this._pickerDocUp=()=>this._onPickerDocUp(),this._xyDebounceTimer=null,this._xyPending=new Map,this._buildingDragMove=t=>{const e=this._buildingDrag;if(!e)return;const n=(t.clientX-e.startX)/e.previewW*100/e.viewScale,i=(t.clientY-e.startY)/e.previewH*100/e.viewScale,r=this._getBuildings()[e.buildingIndex];if(!r)return;const o=Number(r.width)??20,a=Number(r.aspect_ratio)>0?r.aspect_ratio:null,s=null!=a?o/a:Number(r.height)??20,l=Math.min(100-o,Math.max(0,e.startBX+n)),c=Math.min(100-s,Math.max(0,e.startBY+i));this._updateBuilding(e.buildingIndex,{x:Math.round(10*l)/10,y:Math.round(10*c)/10})},this._buildingDragUp=()=>{this._buildingDrag=null,document.removeEventListener("mousemove",this._buildingDragMove),document.removeEventListener("mouseup",this._buildingDragUp)},this._planDragMove=t=>{const e=this._planDrag;if(!e)return;const n=(t.clientX-e.startX)/e.previewW*100/e.viewScale,i=(t.clientY-e.startY)/e.previewH*100/e.viewScale,r=Math.round(10*(e.startOffsetX+n))/10,o=Math.round(10*(e.startOffsetY+i))/10;this._updateConfig({plan_offset_x:r,plan_offset_y:o})},this._planDragUp=()=>{this._planDrag=null,document.removeEventListener("mousemove",this._planDragMove),document.removeEventListener("mouseup",this._planDragUp)}}_scheduleXyUpdate(t,e,n){const i=`${t}-${e}`,r=this._xyPending.get(i),o={...r?.updates,...n};this._xyPending.set(i,{roomIndex:t,entityIndex:e,updates:o}),null!==this._xyDebounceTimer&&window.clearTimeout(this._xyDebounceTimer),this._xyDebounceTimer=window.setTimeout(()=>this._flushXyPending(),Bt.XY_DEBOUNCE_MS)}_flushXyPending(){this._xyDebounceTimer=null,this._xyPending.forEach(({roomIndex:t,entityIndex:e,updates:n})=>{this._updateRoomEntity(t,e,n)}),this._xyPending.clear()}disconnectedCallback(){super.disconnectedCallback?.(),null!==this._xyDebounceTimer&&(window.clearTimeout(this._xyDebounceTimer),this._xyDebounceTimer=null),this._xyPending.clear(),this._buildingDrag&&(this._buildingDrag=null,document.removeEventListener("mousemove",this._buildingDragMove),document.removeEventListener("mouseup",this._buildingDragUp))}setConfig(t){const e=t??{type:"",image:"",rooms:[]},n="string"==typeof e.image?e.image:e.image?.location??"";let i=Array.isArray(e.rooms)?e.rooms:[];if(0===i.length&&Array.isArray(e.entities)&&e.entities.length>0){i=[{name:"",boundary:[],entities:e.entities.map(t=>t.room_boundary&&!t.room_boundaries?.length?{...t,room_boundaries:[t.room_boundary]}:{...t})}]}0===i.length&&(i=[{name:"",boundary:[],entities:[]}]);const r=Array.isArray(e.buildings)?e.buildings:void 0;this._config={...e,image:n,rooms:i,buildings:r,entities:void 0,entity_filter:Array.isArray(e.entity_filter)?e.entity_filter:void 0,alert_entities:Array.isArray(e.alert_entities)?e.alert_entities:void 0,alert_badge_action:e.alert_badge_action,categories:Array.isArray(e.categories)?e.categories:void 0,image_dark:e.image_dark,dark_mode_filter:e.dark_mode_filter,dark_mode:e.dark_mode}}_getEffectiveCategories(){return Pt(this._config)}_removeCategory(t){const e=(Array.isArray(this._config.categories)?[...this._config.categories]:[]).filter(e=>e.id!==t);this._updateConfig({categories:e})}_addCategory(){const t=this._newCategoryId.trim(),e=this._newCategoryLabel.trim();if(!t||!e)return;const n=Array.isArray(this._config.categories)?[...this._config.categories]:[];n.some(e=>e.id===t)||(n.push({id:t,label:e}),this._updateConfig({categories:n}),this._newCategoryId="",this._newCategoryLabel="")}_emitConfig(){ft(this,"config-changed",{config:this._config})}_updateConfig(t){this._config={...this._config,...t},this._emitConfig()}_getRooms(){return St(this._config)}_getBuildings(){return Ct(this._config)}_updateRoom(t,e){const n=Et(this._config,t);if(n){const t=this._config.buildings.map((t,i)=>i!==n.buildingIndex?t:{...t,rooms:t.rooms.map((t,i)=>i!==n.roomIndexInBuilding?t:{...t,...e})});return void this._updateConfig({buildings:t})}const i=[...this._getRooms()];t>=i.length||(i[t]={...i[t],...e},this._updateConfig({rooms:i}))}_addRoom(){const t=[...this._getRooms(),{name:"",boundary:[],entities:[]}];this._updateConfig({rooms:t})}_addRoomToBuilding(t){const e=[...this._config.buildings??[]];if(t>=e.length)return;const n=e[t];e[t]={...n,rooms:[...n.rooms??[],{name:"",boundary:[],entities:[]}]},this._updateConfig({buildings:e})}_removeRoom(t){const e=Et(this._config,t);if(e){const t=this._config.buildings.map((t,n)=>n!==e.buildingIndex?t:{...t,rooms:t.rooms.filter((t,n)=>n!==e.roomIndexInBuilding)});return void this._updateConfig({buildings:t})}const n=this._getRooms().filter((e,n)=>n!==t);this._updateConfig({rooms:n.length?n:[{name:"",boundary:[],entities:[]}]})}_removeBuilding(t){const e=(this._config.buildings??[]).filter((e,n)=>n!==t);this._updateConfig({buildings:e})}_updateBuilding(t,e){const n=[...this._config.buildings??[]];t>=n.length||(n[t]={...n[t],...e},this._updateConfig({buildings:n}))}_onBuildingImageLoad(t,e){const n=e.target;n?.naturalWidth&&n?.naturalHeight&&this._updateBuilding(t,{aspect_ratio:n.naturalWidth/n.naturalHeight})}_addBuilding(){const t=[...this._config.buildings??[],{name:"",image:"",x:10,y:10,width:25,height:25,rooms:[]}];this._updateConfig({buildings:t})}_startBuildingDrag(t,e,n=1){e.preventDefault();const i=e.target.closest(".building-placement-wrap");if(!i)return;const r=i.getBoundingClientRect(),o=this._getBuildings()[t];o&&(this._buildingDrag={buildingIndex:t,startX:e.clientX,startY:e.clientY,startBX:Number(o.x)??0,startBY:Number(o.y)??0,previewW:r.width,previewH:r.height,viewScale:n},document.addEventListener("mousemove",this._buildingDragMove),document.addEventListener("mouseup",this._buildingDragUp))}_startPlanDrag(t,e=1){t.preventDefault();const n=t.target.closest(".building-placement-wrap");if(!n)return;const i=n.getBoundingClientRect(),r=Number(this._config.plan_offset_x)||0,o=Number(this._config.plan_offset_y)||0;this._planDrag={startX:t.clientX,startY:t.clientY,startOffsetX:r,startOffsetY:o,previewW:i.width,previewH:i.height,viewScale:e},document.addEventListener("mousemove",this._planDragMove),document.addEventListener("mouseup",this._planDragUp)}_getRoomEntities(t){const e=this._getRooms()[t];return e?.entities??[]}_updateRoomEntity(t,e,n){const i=Et(this._config,t);if(i){const t=this._config.buildings.map((t,r)=>{if(r!==i.buildingIndex)return t;const o=[...t.rooms[i.roomIndexInBuilding]?.entities??[]];if(e>=o.length)return t;o[e]={...o[e],...n};const a=[...t.rooms];return a[i.roomIndexInBuilding]={...a[i.roomIndexInBuilding],entities:o},{...t,rooms:a}});return void this._updateConfig({buildings:t})}const r=[...this._getRooms()];if(t>=r.length)return;const o=[...r[t].entities??[]];e>=o.length||(o[e]={...o[e],...n},r[t]={...r[t],entities:o},this._updateConfig({rooms:r}))}_removeRoomEntity(t,e){const n=Et(this._config,t);if(n){const t=this._config.buildings.map((t,i)=>{if(i!==n.buildingIndex)return t;const r=(t.rooms[n.roomIndexInBuilding]?.entities??[]).filter((t,n)=>n!==e),o=[...t.rooms];return o[n.roomIndexInBuilding]={...o[n.roomIndexInBuilding],entities:r},{...t,rooms:o}});return void this._updateConfig({buildings:t})}const i=[...this._getRooms()];if(t>=i.length)return;const r=i[t].entities?.filter((t,n)=>n!==e)??[];i[t]={...i[t],entities:r},this._updateConfig({rooms:i})}_addRoomEntity(t){const e=Et(this._config,t);if(e){const t=this._config.buildings.map((t,n)=>{if(n!==e.buildingIndex)return t;const i=[...t.rooms[e.roomIndexInBuilding]?.entities??[],{entity:""}],r=[...t.rooms];return r[e.roomIndexInBuilding]={...r[e.roomIndexInBuilding],entities:i},{...t,rooms:r}});return void this._updateConfig({buildings:t})}const n=[...this._getRooms()];if(t>=n.length)return;const i=[...n[t].entities??[],{entity:""}];n[t]={...n[t],entities:i},this._updateConfig({rooms:n})}_getRoomBoundaries(t){const e=this._getRooms()[t];return Array.isArray(e?.boundary)?e.boundary:[]}_updateRoomBoundary(t,e,n){const i=Et(this._config,t);if(i){const t=this._config.buildings.map((t,r)=>{if(r!==i.buildingIndex)return t;const o=[...t.rooms[i.roomIndexInBuilding]?.boundary??[]];if(e>=o.length)return t;o[e]={...o[e],...n};const a=[...t.rooms];return a[i.roomIndexInBuilding]={...a[i.roomIndexInBuilding],boundary:o},{...t,rooms:a}});return void this._updateConfig({buildings:t})}const r=[...this._getRooms()];if(t>=r.length)return;const o=[...this._getRoomBoundaries(t)];e>=o.length||(o[e]={...o[e],...n},r[t]={...r[t],boundary:o},this._updateConfig({rooms:r}))}_addRoomBoundary(t,e){const n=Et(this._config,t);if(n){const t=this._config.buildings.map((t,i)=>{if(i!==n.buildingIndex)return t;const r=[...t.rooms[n.roomIndexInBuilding]?.boundary??[]];r.push(e?{x1:10,y1:10,x2:40,y2:40,opacity:.4}:{x1:0,y1:0,x2:100,y2:0});const o=[...t.rooms];return o[n.roomIndexInBuilding]={...o[n.roomIndexInBuilding],boundary:r},{...t,rooms:o}});return void this._updateConfig({buildings:t})}const i=[...this._getRooms()];if(t>=i.length)return;const r=[...this._getRoomBoundaries(t)];r.push(e?{x1:10,y1:10,x2:40,y2:40,opacity:.4}:{x1:0,y1:0,x2:100,y2:0}),i[t]={...i[t],boundary:r},this._updateConfig({rooms:i})}_addRoomBoundaryPolygon(t,e){if(e.length<3)return;const n=t=>Math.round(10*t)/10,i=Et(this._config,t);if(i){const t=this._config.buildings.map((t,r)=>{if(r!==i.buildingIndex)return t;const o=[...t.rooms[i.roomIndexInBuilding]?.boundary??[]];o.push({points:e.map(t=>({x:n(t.x),y:n(t.y)})),opacity:.4});const a=[...t.rooms];return a[i.roomIndexInBuilding]={...a[i.roomIndexInBuilding],boundary:o},{...t,rooms:a}});return void this._updateConfig({buildings:t})}const r=[...this._getRooms()];if(t>=r.length)return;const o=[...this._getRoomBoundaries(t)];o.push({points:e.map(t=>({x:n(t.x),y:n(t.y)})),opacity:.4}),r[t]={...r[t],boundary:o},this._updateConfig({rooms:r})}_removeRoomBoundary(t,e){const n=Et(this._config,t);if(n){const t=this._config.buildings.map((t,i)=>{if(i!==n.buildingIndex)return t;const r=(t.rooms[n.roomIndexInBuilding]?.boundary??[]).filter((t,n)=>n!==e),o=[...t.rooms];return o[n.roomIndexInBuilding]={...o[n.roomIndexInBuilding],boundary:r},{...t,rooms:o}});return void this._updateConfig({buildings:t})}const i=[...this._getRooms()];if(t>=i.length)return;const r=this._getRoomBoundaries(t).filter((t,n)=>n!==e);i[t]={...i[t],boundary:r},this._updateConfig({rooms:i})}_updateEntityBoundary(t,e,n,i){const r=Et(this._config,t);if(r){const t=this._config.buildings.map((t,o)=>{if(o!==r.buildingIndex)return t;const a=[...t.rooms[r.roomIndexInBuilding]?.entities??[]],s=a[e];if(!s)return t;const l=[...Mt(s)];if(n>=l.length)return t;l[n]={...l[n],...i},a[e]={...s,room_boundaries:l};const c=[...t.rooms];return c[r.roomIndexInBuilding]={...c[r.roomIndexInBuilding],entities:a},{...t,rooms:c}});return void this._updateConfig({buildings:t})}const o=[...this._getRooms()];if(t>=o.length)return;const a=[...o[t].entities??[]],s=a[e];if(!s)return;const l=[...Mt(s)];n>=l.length||(l[n]={...l[n],...i},a[e]={...s,room_boundaries:l},o[t]={...o[t],entities:a},this._updateConfig({rooms:o}))}_addEntityBoundary(t,e,n){const i=Et(this._config,t);if(i){const t=this._config.buildings.map((t,r)=>{if(r!==i.buildingIndex)return t;const o=[...t.rooms[i.roomIndexInBuilding]?.entities??[]],a=o[e];if(!a)return t;const s=[...Mt(a)];s.push(n?{x1:10,y1:10,x2:40,y2:40,opacity:.4}:{x1:0,y1:0,x2:100,y2:0}),o[e]={...a,room_boundaries:s};const l=[...t.rooms];return l[i.roomIndexInBuilding]={...l[i.roomIndexInBuilding],entities:o},{...t,rooms:l}});return void this._updateConfig({buildings:t})}const r=[...this._getRooms()];if(t>=r.length)return;const o=[...r[t].entities??[]],a=o[e];if(!a)return;const s=[...Mt(a)];s.push(n?{x1:10,y1:10,x2:40,y2:40,opacity:.4}:{x1:0,y1:0,x2:100,y2:0}),o[e]={...a,room_boundaries:s},r[t]={...r[t],entities:o},this._updateConfig({rooms:r})}_addEntityBoundaryPolygon(t,e,n){if(n.length<3)return;const i=t=>Math.round(10*t)/10,r=Et(this._config,t);if(r){const t=this._config.buildings.map((t,o)=>{if(o!==r.buildingIndex)return t;const a=[...t.rooms[r.roomIndexInBuilding]?.entities??[]],s=a[e];if(!s)return t;const l=[...Mt(s)];l.push({points:n.map(t=>({x:i(t.x),y:i(t.y)})),opacity:.4}),a[e]={...s,room_boundaries:l};const c=[...t.rooms];return c[r.roomIndexInBuilding]={...c[r.roomIndexInBuilding],entities:a},{...t,rooms:c}});return void this._updateConfig({buildings:t})}const o=[...this._getRooms()];if(t>=o.length)return;const a=[...o[t].entities??[]],s=a[e];if(!s)return;const l=[...Mt(s)];l.push({points:n.map(t=>({x:i(t.x),y:i(t.y)})),opacity:.4}),a[e]={...s,room_boundaries:l},o[t]={...o[t],entities:a},this._updateConfig({rooms:o})}_removeEntityBoundary(t,e,n){const i=Et(this._config,t);if(i){const t=this._config.buildings.map((t,r)=>{if(r!==i.buildingIndex)return t;const o=[...t.rooms[i.roomIndexInBuilding]?.entities??[]],a=o[e];if(!a)return t;const s=Mt(a).filter((t,e)=>e!==n),l=s.length?{...a,room_boundaries:s}:{...a,room_boundaries:void 0,room_boundary:void 0};o[e]=l;const c=[...t.rooms];return c[i.roomIndexInBuilding]={...c[i.roomIndexInBuilding],entities:o},{...t,rooms:c}});return void this._updateConfig({buildings:t})}const r=[...this._getRooms()];if(t>=r.length)return;const o=[...r[t].entities??[]],a=o[e];if(!a)return;const s=Mt(a);if(n>=s.length)return;const l=s.filter((t,e)=>e!==n),c=l.length?{...a,room_boundaries:l}:{...a,room_boundaries:void 0,room_boundary:void 0};o[e]=c,r[t]={...r[t],entities:o},this._updateConfig({rooms:r})}_getPercentFromEvent(t){const e=t.currentTarget,n=e?.querySelector?.("img")||e?.closest?.(".picker-image-wrap")?.querySelector?.("img")||e;if(!n||!n.naturalWidth)return null;if(!this._pickerImageNatural&&n.naturalWidth&&n.naturalHeight&&(this._pickerImageNatural={w:n.naturalWidth,h:n.naturalHeight}),!this._pickerImageNatural)return null;const i=n.getBoundingClientRect(),r=this._pickerImageNatural.w,o=this._pickerImageNatural.h,a=i.width,s=i.height,l=Math.min(a/r,s/o),c=r*l,u=o*l,d=(a-c)/2,h=(s-u)/2,p=t.clientX-i.left-d,_=t.clientY-i.top-h;if(p<0||_<0||p>c||_>u)return null;return{x:Math.min(100,Math.max(0,p/c*100)),y:Math.min(100,Math.max(0,_/u*100))}}_getPercentFromPickerEvent(t){const e=this.renderRoot?.querySelector?.(".picker-image-wrap"),n=e?.querySelector?.("img");if(!n||!this._pickerImageNatural)return null;const i=n.getBoundingClientRect(),r=this._pickerImageNatural.w,o=this._pickerImageNatural.h,a=i.width,s=i.height,l=Math.min(a/r,s/o),c=r*l,u=o*l,d=(a-c)/2,h=(s-u)/2,p=t.clientX-i.left-d,_=t.clientY-i.top-h;if(p<0||_<0||p>c||_>u)return null;return{x:Math.min(100,Math.max(0,p/c*100)),y:Math.min(100,Math.max(0,_/u*100))}}_openPickerPosition(t,e){this._pickerFor={type:"position",roomIndex:t,entityIndex:e},this._drawStart=null,this._drawCurrent=null}_openPickerRect(t,e){this._pickerFor=void 0!==e?{type:"rect",roomIndex:t,boundaryIndex:e}:{type:"rectNew",roomIndex:t},this._drawStart=null,this._drawCurrent=null}_openPickerLine(t,e,n){this._pickerFor=void 0!==n?{type:"line",roomIndex:t,entityIndex:e,lineIndex:n}:{type:"lineNew",roomIndex:t,entityIndex:e},this._drawStart=null,this._drawCurrent=null}_openPickerPolygon(t,e){if(void 0!==e){const n=this._getRoomBoundaries(t)[e];this._pickerPolygonPoints=wt(n)?n.points.map(t=>({...t})):[],this._pickerFor={type:"polygon",roomIndex:t,boundaryIndex:e}}else this._pickerPolygonPoints=[],this._pickerFor={type:"polygonNew",roomIndex:t};this._drawStart=null,this._drawCurrent=null}_closePicker(){this._pickerFor=null,this._drawStart=null,this._drawCurrent=null,this._pickerPolygonPoints=[],this._pickerImageAspect=null,this._pickerContentRect=null,this._pickerDrag&&(this._pickerDrag=null,document.removeEventListener("mousemove",this._pickerDocMove),document.removeEventListener("mouseup",this._pickerDocUp))}_startPickerDragPosition(t){t.preventDefault(),t.stopPropagation(),this._pickerFor&&"position"===this._pickerFor.type&&(this._pickerDrag={kind:"position"},document.addEventListener("mousemove",this._pickerDocMove),document.addEventListener("mouseup",this._pickerDocUp))}_startPickerDragRect(t,e,n){n.preventDefault(),n.stopPropagation(),this._pickerFor&&"rect"===this._pickerFor.type&&(this._pickerDrag={kind:"rect",boundaryIndex:t,corner:e},document.addEventListener("mousemove",this._pickerDocMove),document.addEventListener("mouseup",this._pickerDocUp))}_startPickerDragLine(t,e,n){n.preventDefault(),n.stopPropagation(),this._pickerFor&&"line"===this._pickerFor.type&&(this._pickerDrag={kind:"line",lineIndex:t,end:e},document.addEventListener("mousemove",this._pickerDocMove),document.addEventListener("mouseup",this._pickerDocUp))}_startPickerDragPolygon(t,e,n){n.preventDefault(),n.stopPropagation(),this._pickerFor&&"polygon"===this._pickerFor.type&&(this._pickerDrag={kind:"polygon",boundaryIndex:t,pointIndex:e},document.addEventListener("mousemove",this._pickerDocMove),document.addEventListener("mouseup",this._pickerDocUp))}_finishPickerPolygon(){if(!this._pickerFor||"polygon"!==this._pickerFor.type&&"polygonNew"!==this._pickerFor.type)return;if(this._pickerPolygonPoints.length<3)return;const t=t=>Math.round(10*t)/10,e=this._pickerPolygonPoints.map(e=>({x:t(e.x),y:t(e.y)})),n=this._pickerFor.roomIndex;"polygon"===this._pickerFor.type?this._updateRoomBoundary(n,this._pickerFor.boundaryIndex,{points:e}):this._addRoomBoundaryPolygon(n,e),this._closePicker()}_onPickerDocMove(t){const e=this._getPercentFromPickerEvent(t);if(!e||!this._pickerDrag||!this._pickerFor)return;const n=this._pickerFor.roomIndex,i=t=>Math.round(10*t)/10;if("position"===this._pickerDrag.kind&&"position"===this._pickerFor.type){const t=this._pickerFor.entityIndex;return void this._updateRoomEntity(n,t,{x:i(e.x),y:i(e.y)})}if("rect"===this._pickerDrag.kind){const t=this._getRoomBoundaries(n);if(this._pickerDrag.boundaryIndex>=t.length)return;const r=t[this._pickerDrag.boundaryIndex],o=0===this._pickerDrag.corner?e.x:r.x1??0,a=0===this._pickerDrag.corner?e.y:r.y1??0,s=1===this._pickerDrag.corner?e.x:r.x2??100,l=1===this._pickerDrag.corner?e.y:r.y2??100,c=Math.min(o,s),u=Math.min(a,l),d=Math.max(o,s),h=Math.max(a,l);return void this._updateRoomBoundary(n,this._pickerDrag.boundaryIndex,{x1:i(c),y1:i(u),x2:i(d),y2:i(h)})}if("line"===this._pickerDrag.kind&&"line"===this._pickerFor.type){const t=this._pickerFor.entityIndex,r=this._getRoomEntities(n)[t];if(!r)return;const o=Mt(r);if(this._pickerDrag.lineIndex>=o.length)return;const a=o[this._pickerDrag.lineIndex],s=0===this._pickerDrag.end?e.x:a.x1??0,l=0===this._pickerDrag.end?e.y:a.y1??0,c=1===this._pickerDrag.end?e.x:a.x2??0,u=1===this._pickerDrag.end?e.y:a.y2??0;return void this._updateEntityBoundary(n,t,this._pickerDrag.lineIndex,{x1:i(s),y1:i(l),x2:i(c),y2:i(u)})}if("polygon"===this._pickerDrag.kind){const t=this._pickerDrag.pointIndex,r=[...this._pickerPolygonPoints];t>=0&&t<r.length&&(r[t]={x:i(e.x),y:i(e.y)},this._pickerPolygonPoints=r,this._updateRoomBoundary(n,this._pickerDrag.boundaryIndex,{points:r}))}}_onPickerDocUp(){this._pickerDrag=null,document.removeEventListener("mousemove",this._pickerDocMove),document.removeEventListener("mouseup",this._pickerDocUp)}_onPickerImageLoad(t){const e=t.target;if(!e?.naturalWidth||!e?.naturalHeight)return;this._pickerImageNatural={w:e.naturalWidth,h:e.naturalHeight},this._pickerImageAspect=e.naturalWidth/e.naturalHeight,this._pickerContentRect=null;const n=e.naturalWidth,i=e.naturalHeight,r=e.closest&&e.closest(".picker-image-wrap"),o=()=>{if(!r||!this._pickerImageNatural)return;const t=r.getBoundingClientRect(),o=e.getBoundingClientRect(),a=o.width,s=o.height,l=Math.min(a/n,s/i),c=n*l,u=i*l,d=o.left+(a-c)/2,h=o.top+(s-u)/2,p=(d-t.left)/t.width*100,_=(h-t.top)/t.height*100,m=c/t.width*100,f=u/t.height*100;this._pickerContentRect={left:p,top:_,width:m,height:f}};requestAnimationFrame(()=>{o(),this.requestUpdate()})}_onPickerImageClick(t){t.preventDefault();const e=this._getPercentFromEvent(t)??this._getPercentFromPickerEvent(t);if(!e||!this._pickerFor)return;const n=this._pickerFor.roomIndex;if("position"===this._pickerFor.type)return this._updateRoomEntity(n,this._pickerFor.entityIndex,{x:Math.round(10*e.x)/10,y:Math.round(10*e.y)/10}),void this._closePicker();if("polygon"!==this._pickerFor.type&&"polygonNew"!==this._pickerFor.type){if("line"===this._pickerFor.type||"lineNew"===this._pickerFor.type||"rect"===this._pickerFor.type||"rectNew"===this._pickerFor.type){if(!this._drawStart)return this._drawStart=e,void(this._drawCurrent=e);const t=this._drawStart.x,i=this._drawStart.y,r=e.x,o=e.y;if("line"===this._pickerFor.type||"lineNew"===this._pickerFor.type){const e=this._pickerFor.entityIndex;if("line"===this._pickerFor.type)this._updateEntityBoundary(n,e,this._pickerFor.lineIndex,{x1:t,y1:i,x2:r,y2:o});else{this._addEntityBoundary(n,e,!1);const a=Mt(this._getRoomEntities(n)[e]);this._updateEntityBoundary(n,e,a.length-1,{x1:t,y1:i,x2:r,y2:o})}}else{const e=Math.min(t,r),a=Math.min(i,o),s=Math.max(t,r),l=Math.max(i,o);if(Math.abs(s-e)<1&&Math.abs(l-a)<1)return this._drawStart=null,void(this._drawCurrent=null);if("rect"===this._pickerFor.type)this._updateRoomBoundary(n,this._pickerFor.boundaryIndex,{x1:e,y1:a,x2:s,y2:l,opacity:.4});else{this._addRoomBoundary(n,!0);const t=this._getRoomBoundaries(n);this._updateRoomBoundary(n,t.length-1,{x1:e,y1:a,x2:s,y2:l,opacity:.4})}}this._closePicker()}}else"polygonNew"===this._pickerFor.type&&(this._pickerPolygonPoints=[...this._pickerPolygonPoints,{x:Math.round(10*e.x)/10,y:Math.round(10*e.y)/10}])}_onPickerImageMouseMove(t){const e=this._getPercentFromEvent(t);this._pickerFor&&this._drawStart&&("line"!==this._pickerFor.type&&"lineNew"!==this._pickerFor.type&&"rect"!==this._pickerFor.type&&"rectNew"!==this._pickerFor.type||(this._drawCurrent=e??this._drawStart))}_updateAlertEntity(t,e){const n=[...this._config.alert_entities??[]];n[t]=e.trim(),this._updateConfig({alert_entities:n})}_removeAlertEntity(t){const e=[...this._config.alert_entities??[]];e.splice(t,1),this._updateConfig({alert_entities:e.length?e:void 0})}_addAlertEntity(){const t=[...this._config.alert_entities??[],""];this._updateConfig({alert_entities:t})}render(){const t="string"==typeof this._config.image?this._config.image:"",e=this._config.title??"",n=Number(this._config.rotation)??0,i=this._getRooms(),r=this.hass?.states?Object.keys(this.hass.states).sort():[];let o=null,a=[];if(this._pickerFor&&"roomIndex"in this._pickerFor){const t=this._pickerFor.roomIndex;"position"===this._pickerFor.type||"line"===this._pickerFor.type||"lineNew"===this._pickerFor.type?(o=this._getRoomEntities(t)[this._pickerFor.entityIndex]??null,a=o?Mt(o):[]):a=this._getRoomBoundaries(t)}return L`
      <div class="editor">
        ${this._pickerFor&&t?L`
        <div class="picker-modal-backdrop" @click=${t=>t.target===t.currentTarget&&this._closePicker()}>
          <div class="picker-modal" @click=${t=>t.stopPropagation()}>
            <div class="picker-header">
              <span class="picker-title">
                ${"position"===this._pickerFor.type?(()=>{const t=this._getRooms()[this._pickerFor.roomIndex];return`Position: Punkt klicken oder ziehen${t&&It(t)?" (X/Y relativ zum Raum)":""}`})():""}
                ${"rect"===this._pickerFor.type||"rectNew"===this._pickerFor.type?"Zone: zwei Punkte klicken (Ecke – gegenüberliegende Ecke)":""}
                ${"polygonNew"===this._pickerFor.type?"Polygon: Klicks setzen Punkte (mind. 3), dann Fertig":""}
                ${"polygon"===this._pickerFor.type?"Polygon bearbeiten: Punkte verschieben, dann Fertig":""}
                ${"line"===this._pickerFor.type||"lineNew"===this._pickerFor.type?"Linie: zwei Punkte klicken (Start – Ende)":""}
              </span>
              ${"polygon"===this._pickerFor?.type||"polygonNew"===this._pickerFor?.type?L`<button type="button" class="btn-confirm" ?disabled=${this._pickerPolygonPoints.length<3} @click=${()=>this._finishPickerPolygon()}>Fertig</button>`:""}
              <button type="button" class="btn-cancel" @click=${()=>this._closePicker()}>Abbrechen</button>
            </div>
            <div
              class="picker-image-wrap"
              style=${null!=this._pickerImageAspect?`aspect-ratio: ${this._pickerImageAspect}`:""}
              @mousedown=${t=>t.preventDefault()}
              @mousemove=${t=>this._onPickerImageMouseMove(t)}
              @mouseleave=${()=>{this._drawStart=null,this._drawCurrent=null}}
              @click=${t=>this._onPickerImageClick(t)}
            >
              <div class="picker-image-layer">
                <img
                  class="picker-image"
                  src=${t}
                  alt="Plan"
                  draggable="false"
                  @load=${t=>this._onPickerImageLoad(t)}
                />
              </div>
              <div class="picker-overlay-layer" style=${this._pickerContentRect?`left:${this._pickerContentRect.left}%;top:${this._pickerContentRect.top}%;width:${this._pickerContentRect.width}%;height:${this._pickerContentRect.height}%`:"left:0;top:0;width:100%;height:100%"}
                @click=${t=>{(t.target===t.currentTarget||"rectNew"===this._pickerFor?.type||"lineNew"===this._pickerFor?.type||"polygonNew"===this._pickerFor?.type)&&(this._onPickerImageClick(t),t.stopPropagation())}}>
                ${("polygon"===this._pickerFor?.type||"polygonNew"===this._pickerFor?.type)&&this._pickerPolygonPoints.length>0?(()=>{const t=this._pickerPolygonPoints,e=t=>{t.preventDefault(),t.stopPropagation()},n="polygon"===this._pickerFor?.type;return L`
                    ${t.length>=2?t.map((e,i)=>0===i?null:L`
                      <div class="picker-line ${n?"editing":""}" style="left:${t[i-1].x}%;top:${t[i-1].y}%;width:${Math.hypot(e.x-t[i-1].x,e.y-t[i-1].y)}%;transform:rotate(${Math.atan2(e.y-t[i-1].y,e.x-t[i-1].x)*(180/Math.PI)}deg)"></div>
                    `).filter(Boolean):""}
                    ${t.length>=3?L`<div class="picker-line ${n?"editing":""}" style="left:${t[t.length-1].x}%;top:${t[t.length-1].y}%;width:${Math.hypot(t[0].x-t[t.length-1].x,t[0].y-t[t.length-1].y)}%;transform:rotate(${Math.atan2(t[0].y-t[t.length-1].y,t[0].x-t[t.length-1].x)*(180/Math.PI)}deg)"></div>`:""}
                    ${t.map((t,i)=>L`
                      <div class="picker-point ${n?"draggable":""}" style="left:${t.x}%;top:${t.y}%"
                        @mousedown=${n?t=>{"polygon"===this._pickerFor?.type&&this._startPickerDragPolygon(this._pickerFor.boundaryIndex,i,t)}:void 0} @click=${n?e:void 0}></div>
                    `)}
                  `})():""}
                ${"position"===this._pickerFor?.type&&o&&null!=Number(o.x)&&null!=Number(o.y)?(()=>{const t=Math.min(100,Math.max(0,Number(o.x)??50)),e=Math.min(100,Math.max(0,Number(o.y)??50));return L`<div class="picker-point draggable" style="left:${t}%;top:${e}%"
                        @mousedown=${t=>this._startPickerDragPosition(t)} @click=${t=>{t.preventDefault(),t.stopPropagation()}}></div>`})():""}
                ${"rect"===this._pickerFor?.type||"rectNew"===this._pickerFor?.type||"line"===this._pickerFor?.type||"lineNew"===this._pickerFor?.type?a.map((t,e)=>{if(("rect"===this._pickerFor?.type||"rectNew"===this._pickerFor?.type)&&wt(t))return null;const n="rect"===this._pickerFor?.type&&this._pickerFor.boundaryIndex===e||"line"===this._pickerFor?.type&&this._pickerFor.lineIndex===e,i=t=>{t.preventDefault(),t.stopPropagation()},r=t;if("line"===this._pickerFor?.type||"lineNew"===this._pickerFor?.type){const t=Math.hypot((r.x2??0)-(r.x1??0),(r.y2??0)-(r.y1??0))||1,o=Math.atan2((r.y2??0)-(r.y1??0),(r.x2??0)-(r.x1??0))*(180/Math.PI),a="line"===this._pickerFor?.type;return L`
                      <div class="picker-line ${n?"editing":""}" style="left:${r.x1}%;top:${r.y1}%;width:${t}%;transform:rotate(${o}deg)"></div>
                      <div class="picker-point ${a?"draggable":""}" style="left:${r.x1}%;top:${r.y1}%"
                        @mousedown=${a?t=>this._startPickerDragLine(e,0,t):void 0} @click=${a?i:void 0}></div>
                      <div class="picker-point ${a?"draggable":""}" style="left:${r.x2}%;top:${r.y2}%"
                        @mousedown=${a?t=>this._startPickerDragLine(e,1,t):void 0} @click=${a?i:void 0}></div>`}const o=Math.min(r.x1??0,r.x2??100),a=Math.min(r.y1??0,r.y2??100),s=Math.abs((r.x2??100)-(r.x1??0))||1,l=Math.abs((r.y2??100)-(r.y1??0))||1,c="rect"===this._pickerFor?.type;return L`
                    <div class="picker-rect ${n?"editing":""}" style="left:${o}%;top:${a}%;width:${s}%;height:${l}%"></div>
                    <div class="picker-point ${c?"draggable":""}" style="left:${o}%;top:${a}%"
                      @mousedown=${c?t=>this._startPickerDragRect(e,0,t):void 0} @click=${c?i:void 0}></div>
                    <div class="picker-point ${c?"draggable":""}" style="left:${o+s}%;top:${a+l}%"
                      @mousedown=${c?t=>this._startPickerDragRect(e,1,t):void 0} @click=${c?i:void 0}></div>`}):""}
                ${this._drawStart&&this._drawCurrent?"rect"===this._pickerFor?.type||"rectNew"===this._pickerFor?.type?(()=>{const t=Math.min(this._drawStart.x,this._drawCurrent.x),e=Math.min(this._drawStart.y,this._drawCurrent.y),n=Math.abs(this._drawCurrent.x-this._drawStart.x)||1,i=Math.abs(this._drawCurrent.y-this._drawStart.y)||1;return L`
                        <div class="picker-rect draw-preview" style="left:${t}%;top:${e}%;width:${n}%;height:${i}%"></div>
                        <div class="picker-point draw-preview" style="left:${this._drawStart.x}%;top:${this._drawStart.y}%"></div>
                        <div class="picker-point draw-preview" style="left:${this._drawCurrent.x}%;top:${this._drawCurrent.y}%"></div>`})():"line"===this._pickerFor?.type||"lineNew"===this._pickerFor?.type?(()=>{const t=Math.hypot(this._drawCurrent.x-this._drawStart.x,this._drawCurrent.y-this._drawStart.y)||1,e=Math.atan2(this._drawCurrent.y-this._drawStart.y,this._drawCurrent.x-this._drawStart.x)*(180/Math.PI);return L`
                          <div class="picker-line draw-preview" style="left:${this._drawStart.x}%;top:${this._drawStart.y}%;width:${t}%;transform:rotate(${e}deg)"></div>
                          <div class="picker-point draw-preview" style="left:${this._drawStart.x}%;top:${this._drawStart.y}%"></div>
                          <div class="picker-point draw-preview" style="left:${this._drawCurrent.x}%;top:${this._drawCurrent.y}%"></div>`})():"":""}
              </div>
            </div>
          </div>
        </div>
        `:""}
        ${null!==this._buildingPlacementPicker?(()=>{const t=this._getBuildings(),e=Number(this._config.plan_offset_x)||0,n=Number(this._config.plan_offset_y)||0;let i=100,r=100,o=0,a=0;for(const s of t){const t=(Number(s.x)??0)+e,l=(Number(s.y)??0)+n,c=Number(s.width)??20,u=Number(s.aspect_ratio)>0?s.aspect_ratio:null,d=null!=u?c/u:Number(s.height)??20;i=Math.min(i,t),r=Math.min(r,l),o=Math.max(o,t+c),a=Math.max(a,l+d)}const s=Math.max(.1,o-i),l=Math.max(.1,a-r),c=(i+o)/2,u=(r+a)/2,d=Math.min(5,Math.max(1,100/s,100/l));return L`
        <div class="picker-modal-backdrop" @click=${t=>t.target===t.currentTarget&&(this._buildingPlacementPicker=null)}>
          <div class="picker-modal" @click=${t=>t.stopPropagation()}>
            <div class="picker-header">
              <span class="picker-title">Plan positionieren – alle Gebäude bewegbar, leerer Bereich = Gesamtplan verschieben</span>
              <button type="button" class="btn-cancel" @click=${()=>{this._buildingPlacementPicker=null}}>Schließen</button>
            </div>
            <div
              class="building-placement-wrap building-placement-fullscreen"
              style="position: relative; width: 80vmin; height: 80vmin; max-width: 100%; max-height: 100%; margin: 0 auto; flex-shrink: 0; border-radius: 8px; overflow: hidden; background: transparent; ${this._planDrag||this._buildingDrag?"cursor: grabbing;":"cursor: default;"}"
              @mousedown=${t=>{t.target.closest(".building-box")||this._startPlanDrag(t,d)}}
            >
              <div class="building-placement-inner" style="position: absolute; left: 0; top: 0; width: 100%; height: 100%; transform: translate(${50-c}%, ${50-u}%) scale(${d}); transform-origin: 50% 50%;">
                ${t.map((t,i)=>{const r=Number(t.rotation)??0,o=Math.max(.25,Math.min(3,Number(t.scale)??1)),a=Number(t.width)??20,s=Number(t.aspect_ratio)>0?t.aspect_ratio:null,l=null!=s?a/s:Number(t.height)??20,c=(Number(t.x)??0)+e,u=(Number(t.y)??0)+n,h="string"==typeof t.image?t.image:"";return L`
                    <div class="building-box"
                      style="position: absolute; left: ${c}%; top: ${u}%; width: ${a}%; height: ${l}%; transform: scale(${o}) rotate(${r}deg); transform-origin: 50% 50%; overflow: hidden; box-sizing: border-box; border: 1px solid var(--divider-color); pointer-events: auto; cursor: grab; display: flex; align-items: center; justify-content: center; background: transparent !important;"
                      aria-hidden
                      @mousedown=${t=>{t.stopPropagation(),this._startBuildingDrag(i,t,d)}}
                    >
                      ${h?L`<img src="${h}" alt="" style="width: 100%; height: 100%; object-fit: ${null!=s?"fill":"contain"}; object-position: center; display: block; pointer-events: none;" @load=${t=>this._onBuildingImageLoad(i,t)} />`:""}
                    </div>
                  `})}
              </div>
            </div>
          </div>
        </div>
          `})():""}
        <section class="editor-section">
          <h4 class="section-title"><ha-icon icon="mdi:image"></ha-icon> Bild</h4>
          <div class="field">
            <label>Bild-URL</label>
            <input type="text" .value=${t} placeholder="/local/raumplan.png"
              @change=${t=>this._updateConfig({image:t.target.value.trim()})} />
            <span class="hint">Bild unter <code>config/www/</code> speichern, dann <code>/local/dateiname.png</code> angeben.</span>
          </div>
          <div class="field-row">
            <div class="field">
              <label>Titel</label>
              <input type="text" .value=${e} placeholder="Optional" @change=${t=>this._updateConfig({title:t.target.value.trim()})} />
            </div>
            <div class="field">
              <label>Drehung</label>
              <select .value=${String(n)} @change=${t=>this._updateConfig({rotation:Number(t.target.value)})}>
                <option value="0">0°</option><option value="90">90°</option><option value="180">180°</option><option value="270">270°</option>
              </select>
            </div>
          </div>
          <div class="field">
            <label>Dark Mode</label>
            <select .value=${!0===this._config.dark_mode?"dark":!1===this._config.dark_mode?"light":"auto"}
              @change=${t=>{const e=t.target.value;this._updateConfig({dark_mode:"auto"===e?void 0:"dark"===e})}}>
              <option value="auto">Auto (System/Theme)</option>
              <option value="light">Immer Hell</option>
              <option value="dark">Immer Dunkel</option>
            </select>
            <span class="hint">Auto nutzt die Systemeinstellung (prefers-color-scheme).</span>
          </div>
          <div class="field">
            <label>Bild-URL (Dark Mode, optional)</label>
            <input type="text" .value=${this._config.image_dark??""} placeholder="z. B. /local/raumplan_dark.svg"
              @change=${t=>this._updateConfig({image_dark:t.target.value.trim()||void 0})} />
            <span class="hint">Anderes Bild bei Dark Mode (z. B. invertierte SVG).</span>
          </div>
          <div class="field">
            <label>CSS-Filter (Dark Mode, optional)</label>
            <input type="text" .value=${this._config.dark_mode_filter??""} placeholder="z. B. brightness(0.88) contrast(1.05)"
              @change=${t=>this._updateConfig({dark_mode_filter:t.target.value.trim()||void 0})} />
            <span class="hint">Standard bei Auto: leichte Abdunklung. Für Inversion: <code>invert(1)</code>.</span>
          </div>
        </section>
        <section class="editor-section">
          <h4 class="section-title"><ha-icon icon="mdi:tag-multiple"></ha-icon> Kategorien (Filter-Tabs)</h4>
          <p class="section-hint">Kategorien erscheinen als Tabs. Entitäten mit derselben Kategorie werden gemeinsam ein-/ausgeblendet. Standard-Kategorien sind entfernbar.</p>
          <div class="entity-boundaries" style="margin-bottom: 10px;">
            ${this._getEffectiveCategories().map(t=>L`
              <span class="category-chip" style="display: inline-flex; align-items: center; gap: 6px; padding: 6px 10px; margin: 4px; border-radius: 8px; background: var(--secondary-background-color); border: 1px solid var(--divider-color);">
                <span>${t.label}</span>
                <button type="button" class="btn-remove" title="Kategorie entfernen" @click=${()=>this._removeCategory(t.id)}><ha-icon icon="mdi:close"></ha-icon></button>
              </span>
            `)}
          </div>
          <div class="entity-coords-wrap" style="flex-wrap: wrap; gap: 8px; align-items: center;">
            <input type="text" .value=${this._newCategoryId} @input=${t=>{this._newCategoryId=t.target.value}} placeholder="ID (z. B. lights)"
              style="width: 120px;" />
            <input type="text" .value=${this._newCategoryLabel} @input=${t=>{this._newCategoryLabel=t.target.value}} placeholder="Anzeigename"
              style="width: 140px;" />
            <button type="button" class="btn-add-small" @click=${()=>this._addCategory()}><ha-icon icon="mdi:plus"></ha-icon> Kategorie hinzufügen</button>
          </div>
        </section>
        <section class="editor-section">
          ${this._getBuildings().length>0?L`
          <h4 class="section-title"><ha-icon icon="mdi:office-building"></ha-icon> Gebäude</h4>
          <p class="section-hint">Gebäude haben ein eigenes Bild und werden auf dem Hauptplan positioniert. Die Räume liegen in den jeweiligen Gebäuden.</p>
          <div class="entity-coords-wrap" style="flex-wrap: wrap; gap: 8px; align-items: center; margin-bottom: 12px;">
            <span class="boundaries-label">Plan verschieben (ganze Karte, alle Gebäude gemeinsam):</span>
            <input type="number" step="0.1" .value=${String(Number(this._config.plan_offset_x)||0)} placeholder="X" style="width: 56px;"
              @change=${t=>this._updateConfig({plan_offset_x:parseFloat(t.target.value)||0})} />
            <input type="number" step="0.1" .value=${String(Number(this._config.plan_offset_y)||0)} placeholder="Y" style="width: 56px;"
              @change=${t=>this._updateConfig({plan_offset_y:parseFloat(t.target.value)||0})} />
          </div>
          <div class="boundaries-label" style="margin-bottom: 4px;">Positionierung (alle Gebäude sichtbar und bewegbar – leerer Bereich ziehen = Plan verschieben):</div>
          <div
            class="building-placement-wrap building-placement-preview"
            style="position: relative; width: 200px; height: 200px; aspect-ratio: 1; background: transparent; border: 1px solid var(--divider-color); border-radius: 8px; overflow: hidden; margin-bottom: 6px; ${this._planDrag||this._buildingDrag?"cursor: grabbing;":"cursor: default;"}"
            @mousedown=${t=>{t.target.closest(".building-box")||this._startPlanDrag(t)}}
          >
            ${(()=>{const t=Number(this._config.plan_offset_x)||0,e=Number(this._config.plan_offset_y)||0;return this._getBuildings().map((n,i)=>{const r=Number(n.rotation)??0,o=Math.max(.25,Math.min(3,Number(n.scale)??1)),a=Number(n.width)??20,s=Number(n.aspect_ratio)>0?n.aspect_ratio:null,l=null!=s?a/s:Number(n.height)??20,c=(Number(n.x)??0)+t,u=(Number(n.y)??0)+e,d="string"==typeof n.image?n.image:"";return L`
                  <div class="building-box"
                    style="position: absolute; left: ${c}%; top: ${u}%; width: ${a}%; height: ${l}%; transform: scale(${o}) rotate(${r}deg); transform-origin: 50% 50%; overflow: hidden; box-sizing: border-box; border: 1px solid var(--divider-color); pointer-events: auto; cursor: grab; display: flex; align-items: center; justify-content: center; background: transparent !important;"
                    aria-hidden
                    @mousedown=${t=>{t.stopPropagation(),this._startBuildingDrag(i,t)}}
                  >
                    ${d?L`<img src="${d}" alt="" style="width: 100%; height: 100%; object-fit: ${null!=s?"fill":"contain"}; object-position: center; display: block; pointer-events: none;" @load=${t=>this._onBuildingImageLoad(i,t)} />`:""}
                  </div>
                `})})()}
          </div>
          <button type="button" class="btn-draw" style="margin-bottom: 12px;" @click=${()=>{this._buildingPlacementPicker=0}} title="Positionierung im Vollbild">
            <ha-icon icon="mdi:fullscreen"></ha-icon> Im Vollbild positionieren
          </button>
          <div class="room-list">
            ${this._getBuildings().map((t,e)=>L`
              <div class="room-block building-block">
                <div class="room-header">
                  <button type="button" class="btn-collapse" title="${this._buildingCollapsed.has(e)?"Aufklappen":"Einklappen"}"
                    @click=${()=>{const t=new Set(this._buildingCollapsed);t.has(e)?t.delete(e):t.add(e),this._buildingCollapsed=t}}>
                    <ha-icon icon="${this._buildingCollapsed.has(e)?"mdi:chevron-right":"mdi:chevron-down"}"></ha-icon>
                  </button>
                  <input type="text" class="room-name" .value=${t.name??""} placeholder="Gebäudename (optional)"
                    @change=${t=>this._updateBuilding(e,{name:t.target.value.trim()||void 0})} />
                  <button type="button" class="btn-remove" @click=${()=>this._removeBuilding(e)} title="Gebäude entfernen"><ha-icon icon="mdi:delete-outline"></ha-icon></button>
                </div>
                <div class="room-body ${this._buildingCollapsed.has(e)?"collapsed":""}">
                  <div class="field" style="margin-bottom: 8px;">
                    <label>Bild-URL des Gebäudeplans</label>
                    <input type="text" .value=${t.image??""} placeholder="/local/gebaeude_a.png"
                      @change=${t=>this._updateBuilding(e,{image:t.target.value.trim()})} />
                  </div>
                  <div class="entity-coords-wrap" style="flex-wrap: wrap; gap: 8px; align-items: center; margin-bottom: 8px;">
                    <span class="boundaries-label">Position auf Plan (%):</span>
                    <input type="number" min="0" max="100" step="0.1" .value=${String(Number(t.x)??0)} placeholder="x" style="width: 56px;"
                      @change=${t=>this._updateBuilding(e,{x:Math.min(100,Math.max(0,parseFloat(t.target.value)||0))})} />
                    <input type="number" min="0" max="100" step="0.1" .value=${String(Number(t.y)??0)} placeholder="y" style="width: 56px;"
                      @change=${t=>this._updateBuilding(e,{y:Math.min(100,Math.max(0,parseFloat(t.target.value)||0))})} />
                    <input type="number" min="1" max="100" step="0.1" .value=${String(Number(t.width)??20)} placeholder="Breite" style="width: 56px;"
                      @change=${t=>this._updateBuilding(e,{width:Math.min(100,Math.max(1,parseFloat(t.target.value)||20))})} />
                    <input type="number" min="1" max="100" step="0.1" .value=${String(Number(t.height)??20)} placeholder="Höhe" style="width: 56px;"
                      @change=${t=>this._updateBuilding(e,{height:Math.min(100,Math.max(1,parseFloat(t.target.value)||20))})} />
                  </div>
                  <div class="entity-coords-wrap" style="flex-wrap: wrap; gap: 8px; align-items: center; margin-bottom: 8px;">
                    <span class="boundaries-label">Drehung (Grad):</span>
                    <input type="number" min="0" max="360" step="15" .value=${String(Number(t.rotation)??0)} placeholder="0" style="width: 56px;"
                      @change=${t=>this._updateBuilding(e,{rotation:(parseFloat(t.target.value)||0)%360})} />
                  </div>
                  <div class="entity-coords-wrap" style="flex-wrap: wrap; gap: 8px; align-items: center; margin-bottom: 8px;">
                    <span class="boundaries-label">Skalierung (1 = 100 %):</span>
                    <input type="number" min="0.25" max="3" step="0.1" .value=${String(Number(t.scale)??1)} placeholder="1" style="width: 56px;"
                      @change=${t=>this._updateBuilding(e,{scale:Math.min(3,Math.max(.25,parseFloat(t.target.value)||1))})} />
                  </div>
                  <span class="boundaries-label">Räume in diesem Gebäude:</span>
                  ${(t.rooms??[]).map((t,n)=>{const i=this._getBuildings().slice(0,e).reduce((t,e)=>t+(e.rooms?.length??0),0)+n;return L`
              <div class="room-block">
                <div class="room-header">
                  <button type="button" class="btn-collapse" title="${this._roomCollapsed.has(i)?"Aufklappen":"Einklappen"}"
                    @click=${()=>{const t=new Set(this._roomCollapsed);t.has(i)?t.delete(i):t.add(i),this._roomCollapsed=t}}>
                    <ha-icon icon="${this._roomCollapsed.has(i)?"mdi:chevron-right":"mdi:chevron-down"}"></ha-icon>
                  </button>
                  <input type="text" class="room-name" .value=${t.name??""} placeholder="Raumname (optional)"
                    @change=${t=>this._updateRoom(i,{name:t.target.value.trim()||void 0})} />
                  <button type="button" class="btn-remove" @click=${()=>this._removeRoom(i)} title="Raum entfernen"><ha-icon icon="mdi:delete-outline"></ha-icon></button>
                </div>
                <div class="room-body ${this._roomCollapsed.has(i)?"collapsed":""}">
                <div class="room-boundaries" title="Grenze / Heatmap-Zone dieses Raums (Rechteck oder Polygon)">
                  <span class="boundaries-label">Boundary (Raum/Heatmap):</span>
                  ${this._getRoomBoundaries(i).map((t,e)=>{if(wt(t))return L`
                    <div class="entity-coords room-boundary">
                      <span class="boundary-type">Polygon (${t.points.length} Ecken)</span>
                      <input type="number" min="0" max="1" step="0.01" class="entity-opacity" .value=${String(Math.min(1,Math.max(0,Number(t.opacity)??.4)))} title="Deckkraft"
                        @change=${t=>this._updateRoomBoundary(i,e,{opacity:Math.min(1,Math.max(0,parseFloat(t.target.value)||.4))})} />
                      <button type="button" class="btn-draw" @click=${()=>this._openPickerPolygon(i,e)} title="Polygon bearbeiten"><ha-icon icon="mdi:vector-polygon"></ha-icon></button>
                      <button type="button" class="btn-remove" @click=${()=>this._removeRoomBoundary(i,e)} title="Zone entfernen"><ha-icon icon="mdi:delete-outline"></ha-icon></button>
                    </div>
                  `;const n=t;return L`
                    <div class="entity-coords room-boundary">
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(n.x1)??0)} placeholder="x1"
                        @change=${t=>this._updateRoomBoundary(i,e,{x1:Math.min(100,Math.max(0,parseFloat(t.target.value)||0))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(n.y1)??0)} placeholder="y1"
                        @change=${t=>this._updateRoomBoundary(i,e,{y1:Math.min(100,Math.max(0,parseFloat(t.target.value)||0))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(n.x2)??100)} placeholder="x2"
                        @change=${t=>this._updateRoomBoundary(i,e,{x2:Math.min(100,Math.max(0,parseFloat(t.target.value)||100))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(n.y2)??100)} placeholder="y2"
                        @change=${t=>this._updateRoomBoundary(i,e,{y2:Math.min(100,Math.max(0,parseFloat(t.target.value)||100))})} />
                      <input type="number" min="0" max="1" step="0.01" class="entity-opacity" .value=${String(Math.min(1,Math.max(0,Number(n.opacity)??.4)))} title="Deckkraft"
                        @change=${t=>this._updateRoomBoundary(i,e,{opacity:Math.min(1,Math.max(0,parseFloat(t.target.value)||.4))})} />
                      <button type="button" class="btn-draw" @click=${()=>this._openPickerRect(i,e)} title="Rechteck bearbeiten"><ha-icon icon="mdi:draw"></ha-icon></button>
                      <button type="button" class="btn-remove" @click=${()=>this._removeRoomBoundary(i,e)} title="Zone entfernen"><ha-icon icon="mdi:delete-outline"></ha-icon></button>
                    </div>
                  `})}
                  <button type="button" class="btn-add-small" @click=${()=>this._addRoomBoundary(i,!0)} title="Rechteck-Zone"><ha-icon icon="mdi:plus"></ha-icon></button>
                  <button type="button" class="btn-draw-small" @click=${()=>this._openPickerRect(i)} title="Rechteck zeichnen"><ha-icon icon="mdi:draw"></ha-icon> Rechteck</button>
                  <button type="button" class="btn-draw-small" @click=${()=>this._openPickerPolygon(i)} title="Polygon zeichnen"><ha-icon icon="mdi:vector-polygon"></ha-icon> Polygon</button>
                </div>
                <div class="room-entities">
                  <span class="boundaries-label">Entitäten im Raum:</span>
                  ${(t.entities??[]).map((t,e)=>L`
              <div class="entity-row">
                <input type="text" list="rp-entities-${i}-${e}" .value=${t.entity} placeholder="light.wohnzimmer"
                  @change=${t=>this._updateRoomEntity(i,e,{entity:t.target.value.trim()})} />
                <datalist id="rp-entities-${i}-${e}">
                  ${r.slice(0,200).map(t=>L`<option value="${t}">${Dt(this.hass,t)}</option>`)}
                </datalist>
                <input type="text" class="entity-icon" .value=${t.icon??""} placeholder="Icon (mdi:...)"
                  @change=${t=>{const n=t.target.value.trim();this._updateRoomEntity(i,e,{icon:n||void 0})}} />
                <select class="entity-preset" .value=${t.preset??"default"}
                  @change=${t=>{const n=t.target.value;this._updateRoomEntity(i,e,"smoke_detector"===n?{preset:n,show_name:!1}:{preset:n})}}>
                  <option value="default">Standard</option>
                  <option value="temperature">Temperatur</option>
                  <option value="binary_sensor">Binary Sensor</option>
                  <option value="window_contact">Fensterkontakt</option>
                  <option value="sliding_door">Schiebetür</option>
                  <option value="smoke_detector">Rauchmelder</option>
                </select>
                <span class="boundaries-label" title="Filter-Tab">Kategorie:</span>
                <select class="entity-category" .value=${At(t)}
                  @change=${n=>{const r=n.target.value;this._updateRoomEntity(i,e,{category_id:r===(t.preset??"default")?void 0:r})}}>
                  ${this._getEffectiveCategories().map(t=>L`<option value=${t.id}>${t.label}</option>`)}
                </select>
                <div class="entity-coords-wrap">
                  <div class="entity-coords">
                    <input type="number" min="0" max="100" step="0.1" .value=${String(Number(t.x)||50)} title="X (%)"
                      @input=${t=>{const n=Math.min(100,Math.max(0,parseFloat(t.target.value)||50));this._scheduleXyUpdate(i,e,{x:n})}}
                      @change=${t=>{this._xyPending.delete(`${i}-${e}`),this._updateRoomEntity(i,e,{x:Math.min(100,Math.max(0,parseFloat(t.target.value)||50))})}} />
                    <input type="number" min="0" max="100" step="0.1" .value=${String(Number(t.y)||50)} title="Y (%)"
                      @input=${t=>{const n=Math.min(100,Math.max(0,parseFloat(t.target.value)||50));this._scheduleXyUpdate(i,e,{y:n})}}
                      @change=${t=>{this._xyPending.delete(`${i}-${e}`),this._updateRoomEntity(i,e,{y:Math.min(100,Math.max(0,parseFloat(t.target.value)||50))})}} />
                    <button type="button" class="btn-draw" @click=${()=>this._openPickerPosition(i,e)} title="Auf Plan setzen"><ha-icon icon="mdi:crosshairs-gps"></ha-icon></button>
                  </div>
                </div>
                <button type="button" class="btn-remove" @click=${()=>this._removeRoomEntity(i,e)} title="Entität entfernen"><ha-icon icon="mdi:delete-outline"></ha-icon></button>
              </div>
                  `)}
                  <button type="button" class="btn-add-small" @click=${()=>this._addRoomEntity(i)}><ha-icon icon="mdi:plus"></ha-icon> Entität</button>
                </div>
                </div>
              </div>
            `})}
                  <button type="button" class="btn-add-small" @click=${()=>this._addRoomToBuilding(e)}><ha-icon icon="mdi:plus"></ha-icon> Raum in diesem Gebäude</button>
                </div>
              </div>
            `)}
          <button type="button" class="btn-add-small" style="margin-top: 8px;" @click=${()=>this._addBuilding()}><ha-icon icon="mdi:plus"></ha-icon> Gebäude hinzufügen</button>
          </div>
          `:L`
          <h4 class="section-title"><ha-icon icon="mdi:door-open"></ha-icon> Räume</h4>
          <p class="section-hint">Jeder Raum hat eine Boundary (Heatmap/Abdunkeln). Darin liegende Entities (Temperatur, Licht etc.) nutzen diese. Optional können Sie <strong>Gebäude</strong> nutzen: Gebäude haben ein eigenes Bild und werden auf dem Hauptplan positioniert; die Räume liegen dann in den Gebäuden.</p>
          <button type="button" class="btn-add-small" style="margin-bottom: 10px;" @click=${()=>this._addBuilding()}><ha-icon icon="mdi:office-building"></ha-icon> Gebäude nutzen (neu)</button>
          <div class="room-list">
            ${i.map((t,e)=>L`
              <div class="room-block">
                <div class="room-header">
                  <button type="button" class="btn-collapse" title="${this._roomCollapsed.has(e)?"Aufklappen":"Einklappen"}"
                    @click=${()=>{const t=new Set(this._roomCollapsed);t.has(e)?t.delete(e):t.add(e),this._roomCollapsed=t}}>
                    <ha-icon icon="${this._roomCollapsed.has(e)?"mdi:chevron-right":"mdi:chevron-down"}"></ha-icon>
                  </button>
                  <input type="text" class="room-name" .value=${t.name??""} placeholder="Raumname (optional)"
                    @change=${t=>this._updateRoom(e,{name:t.target.value.trim()||void 0})} />
                  <button type="button" class="btn-remove" @click=${()=>this._removeRoom(e)} title="Raum entfernen"><ha-icon icon="mdi:delete-outline"></ha-icon></button>
                </div>
                <div class="room-body ${this._roomCollapsed.has(e)?"collapsed":""}">
                <div class="room-boundaries" title="Grenze / Heatmap-Zone dieses Raums (Rechteck oder Polygon)">
                  <span class="boundaries-label">Boundary (Raum/Heatmap):</span>
                  ${this._getRoomBoundaries(e).map((t,n)=>{if(wt(t))return L`
                    <div class="entity-coords room-boundary">
                      <span class="boundary-type">Polygon (${t.points.length} Ecken)</span>
                      <input type="number" min="0" max="1" step="0.01" class="entity-opacity" .value=${String(Math.min(1,Math.max(0,Number(t.opacity)??.4)))} title="Deckkraft"
                        @change=${t=>this._updateRoomBoundary(e,n,{opacity:Math.min(1,Math.max(0,parseFloat(t.target.value)||.4))})} />
                      <button type="button" class="btn-draw" @click=${()=>this._openPickerPolygon(e,n)} title="Polygon bearbeiten"><ha-icon icon="mdi:vector-polygon"></ha-icon></button>
                      <button type="button" class="btn-remove" @click=${()=>this._removeRoomBoundary(e,n)} title="Zone entfernen"><ha-icon icon="mdi:delete-outline"></ha-icon></button>
                    </div>
                  `;const i=t;return L`
                    <div class="entity-coords room-boundary">
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(i.x1)??0)} placeholder="x1"
                        @change=${t=>this._updateRoomBoundary(e,n,{x1:Math.min(100,Math.max(0,parseFloat(t.target.value)||0))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(i.y1)??0)} placeholder="y1"
                        @change=${t=>this._updateRoomBoundary(e,n,{y1:Math.min(100,Math.max(0,parseFloat(t.target.value)||0))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(i.x2)??100)} placeholder="x2"
                        @change=${t=>this._updateRoomBoundary(e,n,{x2:Math.min(100,Math.max(0,parseFloat(t.target.value)||100))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(i.y2)??100)} placeholder="y2"
                        @change=${t=>this._updateRoomBoundary(e,n,{y2:Math.min(100,Math.max(0,parseFloat(t.target.value)||100))})} />
                      <input type="number" min="0" max="1" step="0.01" class="entity-opacity" .value=${String(Math.min(1,Math.max(0,Number(i.opacity)??.4)))} title="Deckkraft"
                        @change=${t=>this._updateRoomBoundary(e,n,{opacity:Math.min(1,Math.max(0,parseFloat(t.target.value)||.4))})} />
                      <button type="button" class="btn-draw" @click=${()=>this._openPickerRect(e,n)} title="Rechteck bearbeiten"><ha-icon icon="mdi:draw"></ha-icon></button>
                      <button type="button" class="btn-remove" @click=${()=>this._removeRoomBoundary(e,n)} title="Zone entfernen"><ha-icon icon="mdi:delete-outline"></ha-icon></button>
                    </div>
                  `})}
                  <button type="button" class="btn-add-small" @click=${()=>this._addRoomBoundary(e,!0)} title="Rechteck-Zone"><ha-icon icon="mdi:plus"></ha-icon></button>
                  <button type="button" class="btn-draw-small" @click=${()=>this._openPickerRect(e)} title="Rechteck zeichnen"><ha-icon icon="mdi:draw"></ha-icon> Rechteck</button>
                  <button type="button" class="btn-draw-small" @click=${()=>this._openPickerPolygon(e)} title="Polygon zeichnen"><ha-icon icon="mdi:vector-polygon"></ha-icon> Polygon</button>
                </div>
                <div class="room-entities">
                  <span class="boundaries-label">Entitäten im Raum:</span>
                  ${(t.entities??[]).map((n,i)=>L`
              <div class="entity-row">
                <input type="text" list="rp-entities-${e}-${i}" .value=${n.entity} placeholder="light.wohnzimmer"
                  @change=${t=>this._updateRoomEntity(e,i,{entity:t.target.value.trim()})} />
                <datalist id="rp-entities-${e}-${i}">
                  ${r.slice(0,200).map(t=>L`<option value="${t}">${Dt(this.hass,t)}</option>`)}
                </datalist>
                <input type="text" class="entity-icon" .value=${n.icon??""} placeholder="Icon (mdi:...)"
                  @change=${t=>{const n=t.target.value.trim();this._updateRoomEntity(e,i,{icon:n||void 0})}} />
                <select class="entity-preset" .value=${n.preset??"default"}
                  @change=${t=>{const n=t.target.value;this._updateRoomEntity(e,i,"smoke_detector"===n?{preset:n,show_name:!1}:{preset:n})}}>
                  <option value="default">Standard</option>
                  <option value="temperature">Temperatur</option>
                  <option value="binary_sensor">Binary Sensor</option>
                  <option value="window_contact">Fensterkontakt</option>
                  <option value="sliding_door">Schiebetür</option>
                  <option value="smoke_detector">Rauchmelder</option>
                </select>
                <span class="boundaries-label" title="Filter-Tab">Kategorie:</span>
                <select class="entity-category" .value=${At(n)}
                  @change=${t=>{const r=t.target.value;this._updateRoomEntity(e,i,{category_id:r===(n.preset??"default")?void 0:r})}}>
                  ${this._getEffectiveCategories().map(t=>L`<option value=${t.id}>${t.label}</option>`)}
                </select>
                ${"temperature"===n.preset?L`
                  <span class="hint-inline">(nutzt Raumboundary)</span>
                  <input type="text" class="entity-temp-attr" .value=${n.temperature_attribute??""} placeholder="Attribut (z. B. current_temperature)"
                    title="Leer = State; bei Klima automatisch current_temperature"
                    @change=${t=>{const n=t.target.value.trim();this._updateRoomEntity(e,i,{temperature_attribute:n||void 0})}} />
                `:""}
                ${"window_contact"===n.preset?L`
                <div class="entity-boundaries">
                  <span class="boundaries-label">Linien:</span>
                  ${Mt(n).filter(t=>!wt(t)).map((t,r)=>{const o=t,a=Mt(n).indexOf(t);return L`
                    <div class="entity-coords room-boundary">
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(o.x1)??0)} placeholder="x1"
                        @change=${t=>this._updateEntityBoundary(e,i,a,{x1:Math.min(100,Math.max(0,parseFloat(t.target.value)||0))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(o.y1)??0)} placeholder="y1"
                        @change=${t=>this._updateEntityBoundary(e,i,a,{y1:Math.min(100,Math.max(0,parseFloat(t.target.value)||0))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(o.x2)??100)} placeholder="x2"
                        @change=${t=>this._updateEntityBoundary(e,i,a,{x2:Math.min(100,Math.max(0,parseFloat(t.target.value)||100))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(o.y2)??100)} placeholder="y2"
                        @change=${t=>this._updateEntityBoundary(e,i,a,{y2:Math.min(100,Math.max(0,parseFloat(t.target.value)||100))})} />
                      <button type="button" class="btn-draw" @click=${()=>this._openPickerLine(e,i,a)} title="Linie bearbeiten"><ha-icon icon="mdi:draw"></ha-icon></button>
                      <button type="button" class="btn-remove" @click=${()=>this._removeEntityBoundary(e,i,a)} title="Linie entfernen"><ha-icon icon="mdi:delete-outline"></ha-icon></button>
                    </div>
                  `})}
                  <button type="button" class="btn-add-small" @click=${()=>this._addEntityBoundary(e,i,!1)} title="Linie hinzufügen"><ha-icon icon="mdi:plus"></ha-icon></button>
                  <button type="button" class="btn-draw-small" @click=${()=>this._openPickerLine(e,i)} title="Linie zeichnen"><ha-icon icon="mdi:draw"></ha-icon> Zeichnen</button>
                </div>
                <input type="number" min="0.2" max="3" step="0.1" .value=${String(Math.min(3,Math.max(.2,Number(n.line_thickness)??1)))} title="Liniendicke"
                  @change=${t=>this._updateRoomEntity(e,i,{line_thickness:Math.min(3,Math.max(.2,Number(t.target.value)||1))})} />
                <input type="color" .value=${n.line_color_open??"#f44336"} title="Farbe offen"
                  @change=${t=>this._updateRoomEntity(e,i,{line_color_open:t.target.value})} />
                <input type="color" .value=${n.line_color_closed??"#9e9e9e"} title="Farbe zu"
                  @change=${t=>this._updateRoomEntity(e,i,{line_color_closed:t.target.value})} />
                <span class="boundaries-label" title="Schloss-Symbol (Offen/Zu)">Schloss:</span>
                <select title="Schloss über oder unter der Linie"
                  .value=${n.window_icon_position??"above"}
                  @change=${t=>this._updateRoomEntity(e,i,{window_icon_position:t.target.value})}>
                  <option value="above">Über der Linie</option>
                  <option value="below">Unter der Linie</option>
                </select>
                `:""}
                ${"sliding_door"===n.preset?L`
                <div class="entity-boundaries">
                  <span class="boundaries-label">Linie (Führung):</span>
                  ${Mt(n).filter(t=>!wt(t)).map((t,r)=>{const o=t,a=Mt(n).indexOf(t);return L`
                    <div class="entity-coords room-boundary">
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(o.x1)??0)} placeholder="x1"
                        @change=${t=>this._updateEntityBoundary(e,i,a,{x1:Math.min(100,Math.max(0,parseFloat(t.target.value)||0))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(o.y1)??0)} placeholder="y1"
                        @change=${t=>this._updateEntityBoundary(e,i,a,{y1:Math.min(100,Math.max(0,parseFloat(t.target.value)||0))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(o.x2)??100)} placeholder="x2"
                        @change=${t=>this._updateEntityBoundary(e,i,a,{x2:Math.min(100,Math.max(0,parseFloat(t.target.value)||100))})} />
                      <input type="number" min="0" max="100" step="0.01" .value=${String(Number(o.y2)??100)} placeholder="y2"
                        @change=${t=>this._updateEntityBoundary(e,i,a,{y2:Math.min(100,Math.max(0,parseFloat(t.target.value)||100))})} />
                      <button type="button" class="btn-draw" @click=${()=>this._openPickerLine(e,i,a)} title="Linie bearbeiten"><ha-icon icon="mdi:draw"></ha-icon></button>
                      <button type="button" class="btn-remove" @click=${()=>this._removeEntityBoundary(e,i,a)} title="Linie entfernen"><ha-icon icon="mdi:delete-outline"></ha-icon></button>
                    </div>
                  `})}
                  <button type="button" class="btn-add-small" @click=${()=>this._addEntityBoundary(e,i,!1)} title="Linie hinzufügen"><ha-icon icon="mdi:plus"></ha-icon></button>
                  <button type="button" class="btn-draw-small" @click=${()=>this._openPickerLine(e,i)} title="Linie zeichnen"><ha-icon icon="mdi:draw"></ha-icon> Zeichnen</button>
                </div>
                <span class="boundaries-label">Richtung:</span>
                <select title="Schieberichtung beim Öffnen"
                  .value=${n.sliding_door_direction??"left"}
                  @change=${t=>this._updateRoomEntity(e,i,{sliding_door_direction:t.target.value})}>
                  <option value="left">Links (Tür schiebt nach rechts)</option>
                  <option value="right">Rechts (Tür schiebt nach links)</option>
                  <option value="double">Doppelt (zwei Türen, auf-/zufahren)</option>
                </select>
                <span class="boundaries-label" title="Führungsschiene">Führung:</span>
                <input type="number" min="0.2" max="3" step="0.1" .value=${String(Math.min(3,Math.max(.2,Number(n.line_thickness)??1)))} title="Dicke Führungsschiene"
                  @change=${t=>this._updateRoomEntity(e,i,{line_thickness:Math.min(3,Math.max(.2,Number(t.target.value)||1))})} />
                <span class="boundaries-label" title="Tür-Linie">Tür:</span>
                <input type="number" min="0.2" max="3" step="0.1" .value=${String(Math.min(3,Math.max(.2,Number(n.sliding_door_door_thickness)??Number(n.line_thickness)??1)))} title="Dicke Tür-Linie"
                  @change=${t=>this._updateRoomEntity(e,i,{sliding_door_door_thickness:Math.min(3,Math.max(.2,Number(t.target.value)||1))})} />
                <input type="color" .value=${n.line_color_closed??"#9e9e9e"} title="Farbe Führungsschiene (BG)"
                  @change=${t=>this._updateRoomEntity(e,i,{line_color_closed:t.target.value})} />
                <input type="color" .value=${n.line_color_open??"#03a9f4"} title="Farbe Tür"
                  @change=${t=>this._updateRoomEntity(e,i,{line_color_open:t.target.value})} />
                `:""}
                <div class="entity-coords-wrap">
                  <div class="entity-coords">
                    <input type="number" min="0" max="100" step="0.1" .value=${String(Number(n.x)||50)} title="X (%)"
                      @input=${t=>{const n=Math.min(100,Math.max(0,parseFloat(t.target.value)||50));this._scheduleXyUpdate(e,i,{x:n})}}
                      @change=${t=>{this._xyPending.delete(`${e}-${i}`),this._updateRoomEntity(e,i,{x:Math.min(100,Math.max(0,parseFloat(t.target.value)||50))})}} />
                    <input type="number" min="0" max="100" step="0.1" .value=${String(Number(n.y)||50)} title="Y (%)"
                      @input=${t=>{const n=Math.min(100,Math.max(0,parseFloat(t.target.value)||50));this._scheduleXyUpdate(e,i,{y:n})}}
                      @change=${t=>{this._xyPending.delete(`${e}-${i}`),this._updateRoomEntity(e,i,{y:Math.min(100,Math.max(0,parseFloat(t.target.value)||50))})}} />
                    <button type="button" class="btn-draw" @click=${()=>this._openPickerPosition(e,i)} title="Position auf Plan setzen (raum-relativ)"><ha-icon icon="mdi:crosshairs-gps"></ha-icon></button>
                  </div>
                  ${It(t)?L`<span class="coords-hint">X/Y relativ zum Raum</span>`:""}
                </div>
                <input type="number" class="entity-scale" min="0.3" max="2" step="0.1" .value=${String(Math.min(2,Math.max(.3,Number(n.scale)||1)))} title="Skalierung"
                  @change=${t=>this._updateRoomEntity(e,i,{scale:Math.min(2,Math.max(.3,parseFloat(t.target.value)||1))})} />
                <input type="color" .value=${n.color||"#03a9f4"} title="Farbe"
                  @change=${t=>{const r=t.target.value;this._updateRoomEntity(e,i,{color:"#03a9f4"!==r||n.color?r:void 0})}} />
                <input type="number" class="entity-opacity" min="0" max="1" step="0.01" .value=${String(Math.min(1,Math.max(0,Number(n.background_opacity)??1)))} title="Deckkraft"
                  @change=${t=>this._updateRoomEntity(e,i,{background_opacity:Math.min(1,Math.max(0,parseFloat(t.target.value)||1))})} />
                <label class="entity-check"><input type="checkbox" .checked=${!!n.show_value} @change=${t=>this._updateRoomEntity(e,i,{show_value:t.target.checked})} /> Wert</label>
                <label class="entity-check"><input type="checkbox" .checked=${!1!==n.show_name} @change=${t=>this._updateRoomEntity(e,i,{show_name:t.target.checked})} /> Text</label>
                <button type="button" class="btn-remove" @click=${()=>this._removeRoomEntity(e,i)} title="Entität entfernen"><ha-icon icon="mdi:delete-outline"></ha-icon></button>
              </div>
            `)}
                </div>
                <button type="button" class="btn-add-small" @click=${()=>this._addRoomEntity(e)}><ha-icon icon="mdi:plus"></ha-icon> Entität in Raum</button>
                </div>
              </div>
            `)}
          </div>
          <button type="button" class="btn-add" @click=${this._addRoom}>
            <ha-icon icon="mdi:plus"></ha-icon> Raum hinzufügen
          </button>
          `}
        </section>
        <section class="editor-section">
          <h4 class="section-title"><ha-icon icon="mdi:bell-badge-outline"></ha-icon> Meldungen (Badge)</h4>
          <p class="section-hint">Entitäten für das Meldungs-Badge (z. B. Rauchmelder). Badge erscheint rechts in der Tab-Leiste, zeigt die Anzahl aktiver Meldungen (state on/triggered).</p>
          <div class="entity-list">
            ${(this._config.alert_entities??[]).map((t,e)=>L`
              <div class="entity-row">
                <input type="text" list="rp-alert-${e}" .value=${t} placeholder="binary_sensor.smoke_wohnzimmer"
                  @change=${t=>this._updateAlertEntity(e,t.target.value)} />
                <datalist id="rp-alert-${e}">
                  ${r.slice(0,200).map(t=>L`<option value="${t}">${Dt(this.hass,t)}</option>`)}
                </datalist>
                <button type="button" class="btn-remove" @click=${()=>this._removeAlertEntity(e)} title="Entfernen">
                  <ha-icon icon="mdi:delete-outline"></ha-icon>
                </button>
              </div>
            `)}
          </div>
          <button type="button" class="btn-add" @click=${this._addAlertEntity}>
            <ha-icon icon="mdi:plus"></ha-icon> Meldungs-Entität hinzufügen
          </button>
        </section>
      </div>
    `}static get styles(){return o`
      :host {
        display: block;
        width: 100%;
        max-width: 100%;
        min-width: 0;
      }
      .editor {
        padding: clamp(12px, 3vw, 20px);
        max-width: 560px;
        width: 100%;
        box-sizing: border-box;
      }
      .editor * {
        box-sizing: border-box;
      }
      .editor-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 24px;
      }
      .editor-header ha-icon {
        color: var(--primary-color, #03a9f4);
        flex-shrink: 0;
      }
      .editor-header h3 {
        margin: 0;
        font-size: clamp(1rem, 2.5vw, 1.1rem);
        font-weight: 600;
        color: var(--primary-text-color);
      }
      .editor-section {
        margin-bottom: 28px;
      }
      .section-title {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 0 0 12px;
        font-size: clamp(0.9rem, 2.2vw, 0.95rem);
        font-weight: 600;
        color: var(--primary-text-color);
      }
      .section-title ha-icon {
        color: var(--primary-color, #03a9f4);
        flex-shrink: 0;
      }
      .section-hint {
        margin: 0 0 12px;
        font-size: clamp(0.8rem, 2vw, 0.85rem);
        color: var(--secondary-text-color);
        line-height: 1.4;
      }
      .field {
        margin-bottom: 16px;
      }
      .field-row {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 16px;
      }
      @media (max-width: 480px) {
        .field-row {
          grid-template-columns: 1fr;
        }
      }
      .field label {
        display: block;
        font-size: 0.8rem;
        font-weight: 500;
        color: var(--secondary-text-color);
        margin-bottom: 6px;
      }
      .field input,
      .field select {
        width: 100%;
        padding: 10px 14px;
        border: 1px solid var(--divider-color, rgba(255, 255, 255, 0.12));
        border-radius: 8px;
        background: var(--ha-card-background, #1e1e1e);
        color: var(--primary-text-color);
        font-size: clamp(14px, 3.5vw, 16px);
      }
      .field input:focus,
      .field select:focus {
        outline: none;
        border-color: var(--primary-color, #03a9f4);
      }
      .hint {
        display: block;
        font-size: 0.8rem;
        color: var(--secondary-text-color);
        margin-top: 6px;
      }
      .hint code {
        background: rgba(255, 255, 255, 0.1);
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.75rem;
      }
      .room-list {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }
      .room-block {
        border: 1px solid var(--divider-color, rgba(255, 255, 255, 0.12));
        border-radius: 10px;
        padding: 12px;
        background: var(--secondary-background-color, rgba(255, 255, 255, 0.05));
      }
      .room-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 10px;
      }
      .room-header .room-name {
        flex: 1;
        min-width: 0;
        font-weight: 500;
      }
      .btn-collapse {
        flex-shrink: 0;
        padding: 4px;
        min-width: 28px;
        min-height: 28px;
        border: none;
        border-radius: 4px;
        background: transparent;
        color: var(--secondary-text-color);
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .btn-collapse:hover {
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
      }
      .room-body.collapsed {
        display: none;
      }
      .room-boundaries {
        margin-bottom: 12px;
      }
      .room-entities {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .hint-inline {
        font-size: 0.8rem;
        color: var(--secondary-text-color);
        margin-left: 4px;
      }
      .entity-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .entity-row {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 10px;
        padding: 12px 14px;
        background: var(--ha-card-background, #1e1e1e);
        border: 1px solid var(--divider-color, rgba(255, 255, 255, 0.12));
        border-radius: 10px;
      }
      .entity-row input,
      .entity-row select,
      .entity-row button {
        padding: 8px 10px;
        border: 1px solid var(--divider-color, rgba(255, 255, 255, 0.12));
        border-radius: 8px;
        background: var(--ha-card-background, #1e1e1e);
        color: var(--primary-text-color, #e1e1e1);
        font-size: 14px;
        font-family: inherit;
      }
      .entity-row input:focus,
      .entity-row select:focus {
        outline: none;
        border-color: var(--primary-color, #03a9f4);
      }
      .entity-row input[list],
      .entity-row input[type='text'] {
        flex: 1 1 140px;
        min-width: 0;
      }
      .entity-row input.entity-icon {
        width: clamp(90px, 22vw, 120px);
      }
      .entity-row select.entity-preset,
      .entity-row select.entity-category {
        width: auto;
        min-width: 100px;
      }
      .entity-row input.entity-temp-attr {
        width: clamp(120px, 18vw, 200px);
      }
      .entity-coords-wrap {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
      }
      .entity-coords {
        display: flex;
        gap: 6px;
        flex-shrink: 0;
      }
      .entity-coords input {
        width: clamp(44px, 12vw, 52px);
      }
      .coords-hint {
        font-size: 0.75rem;
        color: var(--secondary-text-color);
        white-space: nowrap;
      }
      .entity-boundaries {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 8px;
        width: 100%;
      }
      .entity-boundaries .room-boundary {
        display: flex;
        align-items: center;
        gap: 6px;
        flex-wrap: wrap;
      }
      .boundaries-label {
        font-size: 0.8rem;
        color: var(--secondary-text-color);
        margin-right: 4px;
        flex-shrink: 0;
      }
      .btn-add-small {
        padding: 6px 10px;
        border: 1px dashed var(--divider-color, rgba(255, 255, 255, 0.12));
        border-radius: 8px;
        background: transparent;
        color: var(--primary-color, #03a9f4);
        cursor: pointer;
        flex-shrink: 0;
      }
      .btn-add-small:hover {
        border-color: var(--primary-color, #03a9f4);
      }
      .picker-modal-backdrop {
        position: fixed;
        inset: 0;
        z-index: 9999;
        background: rgba(0, 0, 0, 0.75);
        display: flex;
        flex-direction: column;
        align-items: stretch;
        justify-content: stretch;
        padding: 0;
        box-sizing: border-box;
      }
      .picker-modal {
        display: flex;
        flex-direction: column;
        flex: 1;
        min-height: 0;
        background: var(--ha-card-background, #1e1e1e);
        box-shadow: 0 0 0 1px var(--divider-color, rgba(255, 255, 255, 0.12));
        padding: 12px 16px 16px;
      }
      .picker-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
        flex-shrink: 0;
      }
      .picker-title {
        font-size: 1rem;
        font-weight: 500;
        color: var(--primary-text-color);
      }
      .btn-cancel {
        padding: 8px 14px;
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        background: transparent;
        color: var(--secondary-text-color);
        cursor: pointer;
        font-size: 0.85rem;
      }
      .btn-cancel:hover {
        background: rgba(255, 255, 255, 0.06);
      }
      .btn-confirm {
        padding: 8px 14px;
        border: 1px solid var(--primary-color, #03a9f4);
        border-radius: 8px;
        background: rgba(3, 169, 244, 0.2);
        color: var(--primary-color, #03a9f4);
        cursor: pointer;
        font-size: 0.85rem;
      }
      .btn-confirm:hover:not(:disabled) {
        background: rgba(3, 169, 244, 0.3);
      }
      .btn-confirm:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .boundary-type {
        font-size: 0.85rem;
        color: var(--secondary-text-color);
        margin-right: 4px;
      }
      .picker-image-wrap {
        position: relative;
        flex: 1;
        min-height: 200px;
        width: 100%;
        border-radius: 8px;
        overflow: hidden;
        cursor: crosshair;
        background: var(--secondary-background-color, #2a2a2a);
        user-select: none;
        -webkit-user-drag: none;
      }
      .picker-image-layer {
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        z-index: 0;
      }
      .picker-image {
        width: 100%;
        height: 100%;
        object-fit: contain;
        display: block;
        pointer-events: none;
      }
      .picker-overlay-layer {
        position: absolute;
        z-index: 10;
        pointer-events: auto;
        box-sizing: border-box;
        outline: 3px solid #00bcd4;
      }
      .picker-point {
        position: absolute;
        width: 14px;
        height: 14px;
        margin-left: -7px;
        margin-top: -7px;
        border-radius: 50%;
        background: #00bcd4;
        border: 2px solid #fff;
        box-sizing: border-box;
      }
      .picker-point.draggable {
        cursor: move;
        pointer-events: auto;
      }
      .picker-point.draw-preview {
        background: #00bcd4;
        border-color: #fff;
      }
      .picker-rect {
        position: absolute;
        box-sizing: border-box;
        border: 2px solid rgba(255,255,255,0.9);
        background: rgba(0,188,212,0.2);
      }
      .picker-rect.editing {
        border-color: #00bcd4;
        background: rgba(0,188,212,0.25);
      }
      .picker-rect.draw-preview {
        border: 2px solid #00bcd4;
        background: rgba(0,188,212,0.35);
      }
      .picker-line {
        position: absolute;
        height: 4px;
        margin-top: -2px;
        transform-origin: 0 50%;
        background: rgba(255,255,255,0.9);
        box-sizing: border-box;
      }
      .picker-line.editing {
        background: #00bcd4;
      }
      .picker-line.draw-preview {
        background: #00bcd4;
      }
      .btn-draw {
        padding: 6px 10px;
        border-radius: 8px;
        border: 1px solid var(--primary-color, #03a9f4);
        background: rgba(3, 169, 244, 0.12);
        color: var(--primary-color, #03a9f4);
        cursor: pointer;
        flex-shrink: 0;
      }
      .btn-draw:hover {
        background: rgba(3, 169, 244, 0.2);
      }
      .btn-draw-small {
        padding: 6px 10px;
        border-radius: 8px;
        border: 1px dashed var(--primary-color, #03a9f4);
        background: transparent;
        color: var(--primary-color, #03a9f4);
        cursor: pointer;
        font-size: 0.8rem;
      }
      .btn-draw-small:hover {
        background: rgba(3, 169, 244, 0.1);
      }
      .entity-row input.entity-scale {
        width: clamp(50px, 14vw, 60px);
      }
      .entity-row input.entity-opacity {
        width: 56px;
      }
      .entity-row .entity-check {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 0.85rem;
        color: var(--secondary-text-color);
        cursor: pointer;
        white-space: nowrap;
      }
      .entity-row .entity-check input[type='checkbox'] {
        width: auto;
        padding: 0;
      }
      .entity-row input[type='color'] {
        width: 36px;
        height: 36px;
        min-width: 36px;
        padding: 2px;
        cursor: pointer;
      }
      .btn-remove {
        padding: 8px 10px;
        border: none;
        border-radius: 8px;
        background: rgba(244, 67, 54, 0.15);
        color: #f44336;
        cursor: pointer;
        flex-shrink: 0;
      }
      .btn-remove:hover {
        background: rgba(244, 67, 54, 0.3);
      }
      .btn-add {
        padding: 12px 18px;
        width: 100%;
        margin-top: 12px;
        border: 2px dashed var(--divider-color, rgba(255, 255, 255, 0.12));
        border-radius: 10px;
        background: transparent;
        color: var(--primary-color, #03a9f4);
        font-size: clamp(13px, 3.2vw, 14px);
        font-weight: 500;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }
      .btn-add:hover {
        border-color: var(--primary-color, #03a9f4);
        background: rgba(3, 169, 244, 0.08);
      }
    `}};Ot.XY_DEBOUNCE_MS=250,zt([ct({attribute:!1})],Ot.prototype,"hass",void 0),zt([ut()],Ot.prototype,"_config",void 0),zt([ut()],Ot.prototype,"_pickerFor",void 0),zt([ut()],Ot.prototype,"_buildingDrag",void 0),zt([ut()],Ot.prototype,"_buildingPlacementPicker",void 0),zt([ut()],Ot.prototype,"_planDrag",void 0),zt([ut()],Ot.prototype,"_drawStart",void 0),zt([ut()],Ot.prototype,"_drawCurrent",void 0),zt([ut()],Ot.prototype,"_pickerPolygonPoints",void 0),zt([ut()],Ot.prototype,"_pickerImageAspect",void 0),zt([ut()],Ot.prototype,"_pickerContentRect",void 0),zt([ut()],Ot.prototype,"_roomCollapsed",void 0),zt([ut()],Ot.prototype,"_buildingCollapsed",void 0),zt([ut()],Ot.prototype,"_newCategoryId",void 0),zt([ut()],Ot.prototype,"_newCategoryLabel",void 0),zt([ut()],Ot.prototype,"_pickerDrag",void 0),Ot=Bt=zt([(t=>e=>"function"==typeof e?((t,e)=>(customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:n,elements:i}=e;return{kind:n,elements:i,finisher(e){customElements.define(t,e)}}})(t,e))("room-plan-editor")],Ot);var Lt,Ut,Ht,jt,Wt,Xt,Yt,qt,Vt,Gt,Zt,Kt={},Qt=[],Jt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,te=Array.isArray;function ee(t,e){for(var n in e)t[n]=e[n];return t}function ne(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function ie(t,e,n){var i,r,o,a={};for(o in e)"key"==o?i=e[o]:"ref"==o?r=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?Lt.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===a[o]&&(a[o]=t.defaultProps[o]);return re(t,a,i,r,null)}function re(t,e,n,i,r){var o={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++Ht:r,__i:-1,__u:0};return null==r&&null!=Ut.vnode&&Ut.vnode(o),o}function oe(t){return t.children}function ae(t,e){this.props=t,this.context=e}function se(t,e){if(null==e)return t.__?se(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?se(t):null}function le(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return le(t)}}function ce(t){(!t.__d&&(t.__d=!0)&&jt.push(t)&&!ue.__r++||Wt!=Ut.debounceRendering)&&((Wt=Ut.debounceRendering)||Xt)(ue)}function ue(){for(var t,e,n,i,r,o,a,s=1;jt.length;)jt.length>s&&jt.sort(Yt),t=jt.shift(),s=jt.length,t.__d&&(n=void 0,i=void 0,r=(i=(e=t).__v).__e,o=[],a=[],e.__P&&((n=ee({},i)).__v=i.__v+1,Ut.vnode&&Ut.vnode(n),ye(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[r]:null,o,null==r?se(i):r,!!(32&i.__u),a),n.__v=i.__v,n.__.__k[n.__i]=n,be(o,n,a),i.__e=i.__=null,n.__e!=r&&le(n)));ue.__r=0}function de(t,e,n,i,r,o,a,s,l,c,u){var d,h,p,_,m,f,g,y=i&&i.__k||Qt,v=e.length;for(l=function(t,e,n,i,r){var o,a,s,l,c,u=n.length,d=u,h=0;for(t.__k=new Array(r),o=0;o<r;o++)null!=(a=e[o])&&"boolean"!=typeof a&&"function"!=typeof a?("string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?a=t.__k[o]=re(null,a,null,null,null):te(a)?a=t.__k[o]=re(oe,{children:a},null,null,null):void 0===a.constructor&&a.__b>0?a=t.__k[o]=re(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):t.__k[o]=a,l=o+h,a.__=t,a.__b=t.__b+1,s=null,-1!=(c=a.__i=_e(a,n,l,d))&&(d--,(s=n[c])&&(s.__u|=2)),null==s||null==s.__v?(-1==c&&(r>u?h--:r<u&&h++),"function"!=typeof a.type&&(a.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,a.__u|=4))):t.__k[o]=null;if(d)for(o=0;o<u;o++)null!=(s=n[o])&&!(2&s.__u)&&(s.__e==i&&(i=se(s)),ke(s,s));return i}(n,e,y,l,v),d=0;d<v;d++)null!=(p=n.__k[d])&&(h=-1==p.__i?Kt:y[p.__i]||Kt,p.__i=d,f=ye(t,p,h,r,o,a,s,l,c,u),_=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&we(h.ref,null,p),u.push(p.ref,p.__c||_,p)),null==m&&null!=_&&(m=_),(g=!!(4&p.__u))||h.__k===p.__k?l=he(p,l,t,g):"function"==typeof p.type&&void 0!==f?l=f:_&&(l=_.nextSibling),p.__u&=-7);return n.__e=m,l}function he(t,e,n,i){var r,o;if("function"==typeof t.type){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=he(r[o],e,n,i));return e}t.__e!=e&&(i&&(e&&t.type&&!e.parentNode&&(e=se(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8==e.nodeType);return e}function pe(t,e){return e=e||[],null==t||"boolean"==typeof t||(te(t)?t.some(function(t){pe(t,e)}):e.push(t)),e}function _e(t,e,n,i){var r,o,a,s=t.key,l=t.type,c=e[n],u=null!=c&&!(2&c.__u);if(null===c&&null==s||u&&s==c.key&&l==c.type)return n;if(i>(u?1:0))for(r=n-1,o=n+1;r>=0||o<e.length;)if(null!=(c=e[a=r>=0?r--:o++])&&!(2&c.__u)&&s==c.key&&l==c.type)return a;return-1}function me(t,e,n){"-"==e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||Jt.test(e)?n:n+"px"}function fe(t,e,n,i,r){var o,a;t:if("style"==e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||me(t.style,e,"");if(n)for(e in n)i&&n[e]==i[e]||me(t.style,e,n[e])}else if("o"==e[0]&&"n"==e[1])o=e!=(e=e.replace(qt,"$1")),a=e.toLowerCase(),e=a in t||"onFocusOut"==e||"onFocusIn"==e?a.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?i?n.u=i.u:(n.u=Vt,t.addEventListener(e,o?Zt:Gt,o)):t.removeEventListener(e,o?Zt:Gt,o);else{if("http://www.w3.org/2000/svg"==r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!=e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==n?"":n))}}function ge(t){return function(e){if(this.l){var n=this.l[e.type+t];if(null==e.t)e.t=Vt++;else if(e.t<n.u)return;return n(Ut.event?Ut.event(e):e)}}}function ye(t,e,n,i,r,o,a,s,l,c){var u,d,h,p,_,m,f,g,y,v,b,x,w,k,$,M,C,S=e.type;if(void 0!==e.constructor)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=e.__e=n.__e]),(u=Ut.__b)&&u(e);t:if("function"==typeof S)try{if(g=e.props,y="prototype"in S&&S.prototype.render,v=(u=S.contextType)&&i[u.__c],b=u?v?v.props.value:u.__:i,n.__c?f=(d=e.__c=n.__c).__=d.__E:(y?e.__c=d=new S(g,b):(e.__c=d=new ae(g,b),d.constructor=S,d.render=$e),v&&v.sub(d),d.state||(d.state={}),d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),y&&null==d.__s&&(d.__s=d.state),y&&null!=S.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=ee({},d.__s)),ee(d.__s,S.getDerivedStateFromProps(g,d.__s))),p=d.props,_=d.state,d.__v=e,h)y&&null==S.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),y&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(y&&null==S.getDerivedStateFromProps&&g!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(g,b),e.__v==n.__v||!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(g,d.__s,b)){for(e.__v!=n.__v&&(d.props=g,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(t){t&&(t.__=e)}),x=0;x<d._sb.length;x++)d.__h.push(d._sb[x]);d._sb=[],d.__h.length&&a.push(d);break t}null!=d.componentWillUpdate&&d.componentWillUpdate(g,d.__s,b),y&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(p,_,m)})}if(d.context=b,d.props=g,d.__P=t,d.__e=!1,w=Ut.__r,k=0,y){for(d.state=d.__s,d.__d=!1,w&&w(e),u=d.render(d.props,d.state,d.context),$=0;$<d._sb.length;$++)d.__h.push(d._sb[$]);d._sb=[]}else do{d.__d=!1,w&&w(e),u=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++k<25);d.state=d.__s,null!=d.getChildContext&&(i=ee(ee({},i),d.getChildContext())),y&&!h&&null!=d.getSnapshotBeforeUpdate&&(m=d.getSnapshotBeforeUpdate(p,_)),M=u,null!=u&&u.type===oe&&null==u.key&&(M=xe(u.props.children)),s=de(t,te(M)?M:[M],e,n,i,r,o,a,s,l,c),d.base=e.__e,e.__u&=-161,d.__h.length&&a.push(d),f&&(d.__E=d.__=null)}catch(t){if(e.__v=null,l||null!=o)if(t.then){for(e.__u|=l?160:128;s&&8==s.nodeType&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,e.__e=s}else{for(C=o.length;C--;)ne(o[C]);ve(e)}else e.__e=n.__e,e.__k=n.__k,t.then||ve(e);Ut.__e(t,e,n)}else null==o&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):s=e.__e=function(t,e,n,i,r,o,a,s,l){var c,u,d,h,p,_,m,f=n.props||Kt,g=e.props,y=e.type;if("svg"==y?r="http://www.w3.org/2000/svg":"math"==y?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=o)for(c=0;c<o.length;c++)if((p=o[c])&&"setAttribute"in p==!!y&&(y?p.localName==y:3==p.nodeType)){t=p,o[c]=null;break}if(null==t){if(null==y)return document.createTextNode(g);t=document.createElementNS(r,y,g.is&&g),s&&(Ut.__m&&Ut.__m(e,o),s=!1),o=null}if(null==y)f===g||s&&t.data==g||(t.data=g);else{if(o=o&&Lt.call(t.childNodes),!s&&null!=o)for(f={},c=0;c<t.attributes.length;c++)f[(p=t.attributes[c]).name]=p.value;for(c in f)if(p=f[c],"children"==c);else if("dangerouslySetInnerHTML"==c)d=p;else if(!(c in g)){if("value"==c&&"defaultValue"in g||"checked"==c&&"defaultChecked"in g)continue;fe(t,c,null,p,r)}for(c in g)p=g[c],"children"==c?h=p:"dangerouslySetInnerHTML"==c?u=p:"value"==c?_=p:"checked"==c?m=p:s&&"function"!=typeof p||f[c]===p||fe(t,c,p,f[c],r);if(u)s||d&&(u.__html==d.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(d&&(t.innerHTML=""),de("template"==e.type?t.content:t,te(h)?h:[h],e,n,i,"foreignObject"==y?"http://www.w3.org/1999/xhtml":r,o,a,o?o[0]:n.__k&&se(n,0),s,l),null!=o)for(c=o.length;c--;)ne(o[c]);s||(c="value","progress"==y&&null==_?t.removeAttribute("value"):null!=_&&(_!==t[c]||"progress"==y&&!_||"option"==y&&_!=f[c])&&fe(t,c,_,f[c],r),c="checked",null!=m&&m!=t[c]&&fe(t,c,m,f[c],r))}return t}(n.__e,e,n,i,r,o,a,l,c);return(u=Ut.diffed)&&u(e),128&e.__u?void 0:s}function ve(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(ve)}function be(t,e,n){for(var i=0;i<n.length;i++)we(n[i],n[++i],n[++i]);Ut.__c&&Ut.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){Ut.__e(t,e.__v)}})}function xe(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:te(t)?t.map(xe):ee({},t)}function we(t,e,n){try{if("function"==typeof t){var i="function"==typeof t.__u;i&&t.__u(),i&&null==e||(t.__u=t(e))}else t.current=e}catch(t){Ut.__e(t,n)}}function ke(t,e,n){var i,r;if(Ut.unmount&&Ut.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||we(i,null,e)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){Ut.__e(t,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&ke(i[r],e,n||"function"!=typeof t.type);n||ne(t.__e),t.__c=t.__=t.__e=void 0}function $e(t,e,n){return this.constructor(t,n)}function Me(t,e,n){var i,r,o,a;e==document&&(e=document.documentElement),Ut.__&&Ut.__(t,e),r=(i="function"==typeof n)?null:n&&n.__k||e.__k,o=[],a=[],ye(e,t=(!i&&n||e).__k=ie(oe,null,[t]),r||Kt,Kt,e.namespaceURI,!i&&n?[n]:r?null:e.firstChild?Lt.call(e.childNodes):null,o,!i&&n?n:r?r.__e:e.firstChild,i,a),be(o,t,a)}Lt=Qt.slice,Ut={__e:function(t,e,n,i){for(var r,o,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&null!=o.getDerivedStateFromError&&(r.setState(o.getDerivedStateFromError(t)),a=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,i||{}),a=r.__d),a)return r.__E=r}catch(e){t=e}throw t}},Ht=0,ae.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=ee({},this.state),"function"==typeof t&&(t=t(ee({},n),this.props)),t&&ee(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),ce(this))},ae.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ce(this))},ae.prototype.render=oe,jt=[],Xt="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Yt=function(t,e){return t.__v.__b-e.__v.__b},ue.__r=0,qt=/(PointerCapture)$|Capture$/i,Vt=0,Gt=ge(!1),Zt=ge(!0);var Ce=0;Array.isArray;function Se(t,e,n,i,r,o){e||(e={});var a,s,l=e;if("ref"in l)for(s in l={},e)"ref"==s?a=e[s]:l[s]=e[s];var c={type:t,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ce,__i:-1,__u:0,__source:r,__self:o};if("function"==typeof t&&(a=t.defaultProps))for(s in a)void 0===l[s]&&(l[s]=a[s]);return Ut.vnode&&Ut.vnode(c),c}var Ee,Pe,Ae,Re,Te=0,Ie=[],Ne=Ut,De=Ne.__b,Fe=Ne.__r,Be=Ne.diffed,ze=Ne.__c,Oe=Ne.unmount,Le=Ne.__;function Ue(t,e){Ne.__h&&Ne.__h(Pe,t,Te||e),Te=0;var n=Pe.__H||(Pe.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function He(t){return Te=1,je(tn,t)}function je(t,e,n){var i=Ue(Ee++,2);if(i.t=t,!i.__c&&(i.__=[n?n(e):tn(void 0,e),function(t){var e=i.__N?i.__N[0]:i.__[0],n=i.t(e,t);e!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=Pe,!Pe.__f)){var r=function(t,e,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter(function(t){return!!t.__c});if(r.every(function(t){return!t.__N}))return!o||o.call(this,t,e,n);var a=i.__c.props!==t;return r.forEach(function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(a=!0)}}),o&&o.call(this,t,e,n)||a};Pe.__f=!0;var o=Pe.shouldComponentUpdate,a=Pe.componentWillUpdate;Pe.componentWillUpdate=function(t,e,n){if(this.__e){var i=o;o=void 0,r(t,e,n),o=i}a&&a.call(this,t,e,n)},Pe.shouldComponentUpdate=r}return i.__N||i.__}function We(t,e){var n=Ue(Ee++,3);!Ne.__s&&Je(n.__H,e)&&(n.__=t,n.u=e,Pe.__H.__h.push(n))}function Xe(t){return Te=5,Ye(function(){return{current:t}},[])}function Ye(t,e){var n=Ue(Ee++,7);return Je(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(t,e){return Te=8,Ye(function(){return t},e)}function Ve(){for(var t;t=Ie.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ke),t.__H.__h.forEach(Qe),t.__H.__h=[]}catch(e){t.__H.__h=[],Ne.__e(e,t.__v)}}Ne.__b=function(t){Pe=null,De&&De(t)},Ne.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Le&&Le(t,e)},Ne.__r=function(t){Fe&&Fe(t),Ee=0;var e=(Pe=t.__c).__H;e&&(Ae===Pe?(e.__h=[],Pe.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Ke),e.__h.forEach(Qe),e.__h=[],Ee=0)),Ae=Pe},Ne.diffed=function(t){Be&&Be(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==Ie.push(e)&&Re===Ne.requestAnimationFrame||((Re=Ne.requestAnimationFrame)||Ze)(Ve)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Ae=Pe=null},Ne.__c=function(t,e){e.some(function(t){try{t.__h.forEach(Ke),t.__h=t.__h.filter(function(t){return!t.__||Qe(t)})}catch(n){e.some(function(t){t.__h&&(t.__h=[])}),e=[],Ne.__e(n,t.__v)}}),ze&&ze(t,e)},Ne.unmount=function(t){Oe&&Oe(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(t){try{Ke(t)}catch(t){e=t}}),n.__H=void 0,e&&Ne.__e(e,n.__v))};var Ge="function"==typeof requestAnimationFrame;function Ze(t){var e,n=function(){clearTimeout(i),Ge&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,35);Ge&&(e=requestAnimationFrame(n))}function Ke(t){var e=Pe,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),Pe=e}function Qe(t){var e=Pe;t.__c=t.__(),Pe=e}function Je(t,e){return!t||t.length!==e.length||e.some(function(e,n){return e!==t[n]})}function tn(t,e){return"function"==typeof e?e(t):e}function en(t,e){for(var n in e)t[n]=e[n];return t}function nn(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var i in e)if("__source"!==i&&t[i]!==e[i])return!0;return!1}function rn(t,e){this.props=t,this.context=e}(rn.prototype=new ae).isPureReactComponent=!0,rn.prototype.shouldComponentUpdate=function(t,e){return nn(this.props,t)||nn(this.state,e)};var on=Ut.__b;Ut.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),on&&on(t)};"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref");var an=Ut.__e;Ut.__e=function(t,e,n,i){if(t.then)for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e);an(t,e,n,i)};var sn=Ut.unmount;function ln(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(t){"function"==typeof t.__c&&t.__c()}),t.__c.__H=null),null!=(t=en({},t)).__c&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return ln(t,e,n)})),t}function cn(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return cn(t,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function un(){this.__u=0,this.o=null,this.__b=null}function dn(t){if(!t.__)return null;var e=t.__.__c;return e&&e.__a&&e.__a(t)}function hn(){this.i=null,this.l=null}Ut.unmount=function(t){var e=t.__c;e&&(e.__z=!0),e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),sn&&sn(t)},(un.prototype=new ae).__c=function(t,e){var n=e.__c,i=this;null==i.o&&(i.o=[]),i.o.push(n);var r=dn(i.__v),o=!1,a=function(){o||i.__z||(o=!0,n.__R=null,r?r(l):l())};n.__R=a;var s=n.__P;n.__P=null;var l=function(){if(! --i.__u){if(i.state.__a){var t=i.state.__a;i.__v.__k[0]=cn(t,t.__c.__P,t.__c.__O)}var e;for(i.setState({__a:i.__b=null});e=i.o.pop();)e.__P=s,e.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(a,a)},un.prototype.componentWillUnmount=function(){this.o=[]},un.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=ln(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__a&&ie(oe,null,t.fallback);return r&&(r.__u&=-33),[ie(oe,null,e.__a?null:t.children),r]};var pn=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(hn.prototype=new ae).__a=function(t){var e=this,n=dn(e.__v),i=e.l.get(t);return i[0]++,function(r){var o=function(){e.props.revealOrder?(i.push(r),pn(e,t,i)):r()};n?n(o):o()}},hn.prototype.render=function(t){this.i=null,this.l=new Map;var e=pe(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},hn.prototype.componentDidUpdate=hn.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){pn(t,n,e)})};var _n="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,mn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,fn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,gn=/[A-Z0-9]/g,yn="undefined"!=typeof document,vn=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(t)};function bn(t,e,n){return null==e.__k&&(e.textContent=""),Me(t,e),"function"==typeof n&&n(),t?t.__c:null}ae.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(ae.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var xn=Ut.event;function wn(){}function kn(){return this.cancelBubble}function $n(){return this.defaultPrevented}Ut.event=function(t){return xn&&(t=xn(t)),t.persist=wn,t.isPropagationStopped=kn,t.isDefaultPrevented=$n,t.nativeEvent=t};var Mn={enumerable:!1,configurable:!0,get:function(){return this.class}},Cn=Ut.vnode;Ut.vnode=function(t){"string"==typeof t.type&&function(t){var e=t.props,n=t.type,i={},r=-1===n.indexOf("-");for(var o in e){var a=e[o];if(!("value"===o&&"defaultValue"in e&&null==a||yn&&"children"===o&&"noscript"===n||"class"===o||"className"===o)){var s=o.toLowerCase();"defaultValue"===o&&"value"in e&&null==e.value?o="value":"download"===o&&!0===a?a="":"translate"===s&&"no"===a?a=!1:"o"===s[0]&&"n"===s[1]?"ondoubleclick"===s?o="ondblclick":"onchange"!==s||"input"!==n&&"textarea"!==n||vn(e.type)?"onfocus"===s?o="onfocusin":"onblur"===s?o="onfocusout":fn.test(o)&&(o=s):s=o="oninput":r&&mn.test(o)?o=o.replace(gn,"-$&").toLowerCase():null===a&&(a=void 0),"oninput"===s&&i[o=s]&&(o="oninputCapture"),i[o]=a}}"select"==n&&i.multiple&&Array.isArray(i.value)&&(i.value=pe(e.children).forEach(function(t){t.props.selected=-1!=i.value.indexOf(t.props.value)})),"select"==n&&null!=i.defaultValue&&(i.value=pe(e.children).forEach(function(t){t.props.selected=i.multiple?-1!=i.defaultValue.indexOf(t.props.value):i.defaultValue==t.props.value})),e.class&&!e.className?(i.class=e.class,Object.defineProperty(i,"className",Mn)):(e.className&&!e.class||e.class&&e.className)&&(i.class=i.className=e.className),t.props=i}(t),t.$$typeof=_n,Cn&&Cn(t)};var Sn=Ut.__r;Ut.__r=function(t){Sn&&Sn(t),t.__c};var En=Ut.diffed;Ut.diffed=function(t){En&&En(t);var e=t.props,n=t.__e;null!=n&&"textarea"===t.type&&"value"in e&&e.value!==n.value&&(n.value=null==e.value?"":e.value)};function Pn(t){const{config:e,hass:n,allTabIds:i,categoryLabels:r,selectedTabs:o,onSelectTab:a,host:s}=t,l=e?.alert_entities??[],c=[null,...i],u=i.length>0&&o.size===i.length,d=i.length>0||l.length>0,h=n?.states&&l.length>0?l.filter(t=>{const e=n?.states?.[t]?.state;return"on"===e||"triggered"===e||"active"===e}).length:0;if(!d)return null;const p={background:"var(--primary-color, #03a9f4)",color:"#fff"},_="var(--filter-tab-inactive-bg)",m={background:_,color:"var(--filter-tab-inactive-color)"},f="var(--filter-tab-inactive-hover-bg)",g="var(--filter-tab-inactive-hover-color)";return Se("div",{className:"filter-tabs-bar",style:{padding:"0 16px",height:48,minHeight:48,flexShrink:0,display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,background:"var(--ha-card-background)",borderBottom:"1px solid var(--divider-color)",overflow:"hidden"},children:[Se("div",{style:{display:"flex",flexWrap:"nowrap",alignItems:"center",gap:8,minWidth:0,flex:1,overflowX:"auto",overflowY:"hidden"},children:c.map(t=>{const e=null===t?u:o.has(t);return Se("button",{type:"button",onClick:()=>a(t),className:"filter-tab",style:{flexShrink:0,padding:"6px 14px",border:"1px solid var(--divider-color)",borderRadius:16,fontSize:"0.875rem",fontWeight:500,cursor:"pointer",transition:"background-color 0.2s, color 0.2s, border-color 0.2s",fontFamily:"inherit",...e?p:m},onMouseEnter:t=>{e||(t.currentTarget.style.background=f,t.currentTarget.style.color=g)},onMouseLeave:t=>{e||(t.currentTarget.style.background=_,t.currentTarget.style.color=m.color)},children:null===t?"Alle":r[t]??t},t??"all")})}),l.length>0&&Se("button",{type:"button",onClick:()=>{const t=e?.alert_badge_action??{action:"more-info"},i=l[0]??"";bt(s,n,{entity:i,tap_action:t},"tap"),gt("light")},className:"filter-tab filter-tab-alert",style:{flexShrink:0,display:"inline-flex",alignItems:"center",gap:6,padding:"6px 12px",border:"1px solid var(--divider-color)",borderRadius:16,fontSize:"0.875rem",fontWeight:500,cursor:"pointer",transition:"opacity 0.2s, background-color 0.2s, color 0.2s",fontFamily:"inherit",...h>0?{background:"var(--error-color)",color:"#fff"}:m},title:"Meldungen",onMouseEnter:t=>{0===h?(t.currentTarget.style.background=f,t.currentTarget.style.color=g):t.currentTarget.style.opacity="0.9"},onMouseLeave:t=>{0===h?(t.currentTarget.style.background=_,t.currentTarget.style.color=m.color):t.currentTarget.style.opacity="1"},children:[Se("ha-icon",{icon:"mdi:bell-badge-outline",style:{width:20,height:20}}),Se("span",{style:{minWidth:"1.2em",textAlign:"center",fontWeight:600},children:h})]})]})}function An(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rn(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}
/*!
 * GSAP 3.14.2
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Tn,In,Nn,Dn,Fn,Bn,zn,On,Ln,Un,Hn,jn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Wn={duration:.5,overwrite:!1,delay:0},Xn=1e8,Yn=1e-8,qn=2*Math.PI,Vn=qn/4,Gn=0,Zn=Math.sqrt,Kn=Math.cos,Qn=Math.sin,Jn=function(t){return"string"==typeof t},ti=function(t){return"function"==typeof t},ei=function(t){return"number"==typeof t},ni=function(t){return void 0===t},ii=function(t){return"object"==typeof t},ri=function(t){return!1!==t},oi=function(){return"undefined"!=typeof window},ai=function(t){return ti(t)||Jn(t)},si="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},li=Array.isArray,ci=/random\([^)]+\)/g,ui=/,\s*/g,di=/(?:-?\.?\d|\.)+/gi,hi=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,pi=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_i=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,mi=/[+-]=-?[.\d]+/,fi=/[^,'"\[\]\s]+/gi,gi=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,yi={},vi={},bi=function(t){return(vi=Zi(t,yi))&&Qo},xi=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},wi=function(t,e){return!e&&console.warn(t)},ki=function(t,e){return t&&(yi[t]=e)&&vi&&(vi[t]=e)||yi},$i=function(){return 0},Mi={suppressEvents:!0,isStart:!0,kill:!1},Ci={suppressEvents:!0,kill:!1},Si={suppressEvents:!0},Ei={},Pi=[],Ai={},Ri={},Ti={},Ii=30,Ni=[],Di="",Fi=function(t){var e,n,i=t[0];if(ii(i)||ti(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=Ni.length;n--&&!Ni[n].targetTest(i););e=Ni[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new ho(t[n],e)))||t.splice(n,1);return t},Bi=function(t){return t._gsap||Fi(Er(t))[0]._gsap},zi=function(t,e,n){return(n=t[e])&&ti(n)?t[e]():ni(n)&&t.getAttribute&&t.getAttribute(e)||n},Oi=function(t,e){return(t=t.split(",")).forEach(e)||t},Li=function(t){return Math.round(1e5*t)/1e5||0},Ui=function(t){return Math.round(1e7*t)/1e7||0},Hi=function(t,e){var n=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+i:"-"===n?t-i:"*"===n?t*i:t/i},ji=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},Wi=function(){var t,e,n=Pi.length,i=Pi.slice(0);for(Ai={},Pi.length=0,t=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Xi=function(t){return!!(t._initted||t._startAt||t.add)},Yi=function(t,e,n,i){Pi.length&&!In&&Wi(),t.render(e,n,i||!!(In&&e<0&&Xi(t))),Pi.length&&!In&&Wi()},qi=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(fi).length<2?e:Jn(t)?t.trim():t},Vi=function(t){return t},Gi=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Zi=function(t,e){for(var n in e)t[n]=e[n];return t},Ki=function t(e,n){for(var i in n)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=ii(n[i])?t(e[i]||(e[i]={}),n[i]):n[i]);return e},Qi=function(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i},Ji=function(t){var e,n=t.parent||Dn,i=t.keyframes?(e=li(t.keyframes),function(t,n){for(var i in n)i in t||"duration"===i&&e||"ease"===i||(t[i]=n[i])}):Gi;if(ri(t.inherit))for(;n;)i(t,n.vars.defaults),n=n.parent||n._dp;return t},tr=function(t,e,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var o,a=t[i];if(r)for(o=e[r];a&&a[r]>o;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=a,e.parent=e._dp=t,e},er=function(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,o=e._next;r?r._next=o:t[n]===e&&(t[n]=o),o?o._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},nr=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},ir=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},rr=function(t,e,n,i){return t._startAt&&(In?t._startAt.revert(Ci):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,i))},or=function t(e){return!e||e._ts&&t(e.parent)},ar=function(t){return t._repeat?sr(t._tTime,t=t.duration()+t._rDelay)*t:0},sr=function(t,e){var n=Math.floor(t=Ui(t/e));return t&&n===t?n-1:n},lr=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},cr=function(t){return t._end=Ui(t._start+(t._tDur/Math.abs(t._ts||t._rts||Yn)||0))},ur=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Ui(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),cr(t),n._dirty||ir(n,t)),t},dr=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=lr(t.rawTime(),e),(!e._dur||kr(0,e.totalDuration(),n)-e._tTime>Yn)&&e.render(n,!0)),ir(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},hr=function(t,e,n,i){return e.parent&&nr(e),e._start=Ui((ei(n)?n:n||t!==Dn?br(t,n,e):t._time)+e._delay),e._end=Ui(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),tr(t,e,"_first","_last",t._sort?"_start":0),fr(e)||(t._recent=e),i||dr(t,e),t._ts<0&&ur(t,t._tTime),t},pr=function(t,e){return(yi.ScrollTrigger||xi("scrollTrigger",e))&&yi.ScrollTrigger.create(e,t)},_r=function(t,e,n,i,r){return bo(t,e,r),t._initted?!n&&t._pt&&!In&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&Ln!==Qr.frame?(Pi.push(t),t._lazy=[r,i],1):void 0:1},mr=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},fr=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},gr=function(t,e,n,i){var r=t._repeat,o=Ui(e)||0,a=t._tTime/t._tDur;return a&&!i&&(t._time*=o/t._dur),t._dur=o,t._tDur=r?r<0?1e10:Ui(o*(r+1)+t._rDelay*r):o,a>0&&!i&&ur(t,t._tTime=t._tDur*a),t.parent&&cr(t),n||ir(t.parent,t),t},yr=function(t){return t instanceof _o?ir(t):gr(t,t._dur)},vr={_start:0,endTime:$i,totalDuration:$i},br=function t(e,n,i){var r,o,a,s=e.labels,l=e._recent||vr,c=e.duration()>=Xn?l.endTime(!1):e._dur;return Jn(n)&&(isNaN(n)||n in s)?(o=n.charAt(0),a="%"===n.substr(-1),r=n.indexOf("="),"<"===o||">"===o?(r>=0&&(n=n.replace(/=/,"")),("<"===o?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(r<0?l:i).totalDuration()/100:1)):r<0?(n in s||(s[n]=c),s[n]):(o=parseFloat(n.charAt(r-1)+n.substr(r+1)),a&&i&&(o=o/100*(li(i)?i[0]:i).totalDuration()),r>1?t(e,n.substr(0,r-1),i)+o:c+o)):null==n?c:+n},xr=function(t,e,n){var i,r,o=ei(e[1]),a=(o?2:1)+(t<2?0:1),s=e[a];if(o&&(s.duration=e[1]),s.parent=n,t){for(i=s,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=ri(r.vars.inherit)&&r.parent;s.immediateRender=ri(i.immediateRender),t<2?s.runBackwards=1:s.startAt=e[a-1]}return new Mo(e[0],s,e[a+1])},wr=function(t,e){return t||0===t?e(t):e},kr=function(t,e,n){return n<t?t:n>e?e:n},$r=function(t,e){return Jn(t)&&(e=gi.exec(t))?e[1]:""},Mr=[].slice,Cr=function(t,e){return t&&ii(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&ii(t[0]))&&!t.nodeType&&t!==Fn},Sr=function(t,e,n){return void 0===n&&(n=[]),t.forEach(function(t){var i;return Jn(t)&&!e||Cr(t,1)?(i=n).push.apply(i,Er(t)):n.push(t)})||n},Er=function(t,e,n){return Nn&&!e&&Nn.selector?Nn.selector(t):!Jn(t)||n||!Bn&&Jr()?li(t)?Sr(t,n):Cr(t)?Mr.call(t,0):t?[t]:[]:Mr.call((e||zn).querySelectorAll(t),0)},Pr=function(t){return t=Er(t)[0]||wi("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return Er(e,n.querySelectorAll?n:n===t?wi("Invalid scope")||zn.createElement("div"):t)}},Ar=function(t){return t.sort(function(){return.5-Math.random()})},Rr=function(t){if(ti(t))return t;var e=ii(t)?t:{each:t},n=ao(e.ease),i=e.from||0,r=parseFloat(e.base)||0,o={},a=i>0&&i<1,s=isNaN(i)||a,l=e.axis,c=i,u=i;return Jn(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!a&&s&&(c=i[0],u=i[1]),function(t,a,d){var h,p,_,m,f,g,y,v,b,x=(d||e).length,w=o[x];if(!w){if(!(b="auto"===e.grid?0:(e.grid||[1,Xn])[1])){for(y=-Xn;y<(y=d[b++].getBoundingClientRect().left)&&b<x;);b<x&&b--}for(w=o[x]=[],h=s?Math.min(b,x)*c-.5:i%b,p=b===Xn?0:s?x*u/b-.5:i/b|0,y=0,v=Xn,g=0;g<x;g++)_=g%b-h,m=p-(g/b|0),w[g]=f=l?Math.abs("y"===l?m:_):Zn(_*_+m*m),f>y&&(y=f),f<v&&(v=f);"random"===i&&Ar(w),w.max=y-v,w.min=v,w.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(b>x?x-1:l?"y"===l?x/b:b:Math.max(b,x/b))||0)*("edges"===i?-1:1),w.b=x<0?r-x:r,w.u=$r(e.amount||e.each)||0,n=n&&x<0?ro(n):n}return x=(w[t]-w.min)/w.max||0,Ui(w.b+(n?n(x):x)*w.v)+w.u}},Tr=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var i=Ui(Math.round(parseFloat(n)/t)*t*e);return(i-i%1)/e+(ei(n)?0:$r(n))}},Ir=function(t,e){var n,i,r=li(t);return!r&&ii(t)&&(n=r=t.radius||Xn,t.values?(t=Er(t.values),(i=!ei(t[0]))&&(n*=n)):t=Tr(t.increment)),wr(e,r?ti(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){for(var r,o,a=parseFloat(i?e.x:e),s=parseFloat(i?e.y:0),l=Xn,c=0,u=t.length;u--;)(r=i?(r=t[u].x-a)*r+(o=t[u].y-s)*o:Math.abs(t[u]-a))<l&&(l=r,c=u);return c=!n||l<=n?t[c]:e,i||c===e||ei(e)?c:c+$r(e)}:Tr(t))},Nr=function(t,e,n,i){return wr(li(t)?!e:!0===n?!!(n=0):!i,function(){return li(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*i)/i})},Dr=function(t,e,n){return wr(n,function(n){return t[~~e(n)]})},Fr=function(t){return t.replace(ci,function(t){var e=t.indexOf("[")+1,n=t.substring(e||7,e?t.indexOf("]"):t.length-1).split(ui);return Nr(e?n:+n[0],e?0:+n[1],+n[2]||1e-5)})},Br=function(t,e,n,i,r){var o=e-t,a=i-n;return wr(r,function(e){return n+((e-t)/o*a||0)})},zr=function(t,e,n){var i,r,o,a=t.labels,s=Xn;for(i in a)(r=a[i]-e)<0==!!n&&r&&s>(r=Math.abs(r))&&(o=i,s=r);return o},Or=function(t,e,n){var i,r,o,a=t.vars,s=a[e],l=Nn,c=t._ctx;if(s)return i=a[e+"Params"],r=a.callbackScope||t,n&&Pi.length&&Wi(),c&&(Nn=c),o=i?s.apply(r,i):s.call(r),Nn=l,o},Lr=function(t){return nr(t),t.scrollTrigger&&t.scrollTrigger.kill(!!In),t.progress()<1&&Or(t,"onInterrupt"),t},Ur=[],Hr=function(t){if(t)if(t=!t.name&&t.default||t,oi()||t.headless){var e=t.name,n=ti(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:$i,render:No,add:yo,kill:Fo,modifier:Do,rawVars:0},o={targetTest:0,get:0,getSetter:Ao,aliases:{},register:0};if(Jr(),t!==i){if(Ri[e])return;Gi(i,Gi(Qi(t,r),o)),Zi(i.prototype,Zi(r,Qi(t,o))),Ri[i.prop=e]=i,t.targetTest&&(Ni.push(i),Ei[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}ki(e,i),t.register&&t.register(Qo,i,Oo)}else Ur.push(t)},jr=255,Wr={aqua:[0,jr,jr],lime:[0,jr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,jr],navy:[0,0,128],white:[jr,jr,jr],olive:[128,128,0],yellow:[jr,jr,0],orange:[jr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[jr,0,0],pink:[jr,192,203],cyan:[0,jr,jr],transparent:[jr,jr,jr,0]},Xr=function(t,e,n){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*jr+.5|0},Yr=function(t,e,n){var i,r,o,a,s,l,c,u,d,h,p=t?ei(t)?[t>>16,t>>8&jr,t&jr]:0:Wr.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Wr[t])p=Wr[t];else if("#"===t.charAt(0)){if(t.length<6&&(i=t.charAt(1),r=t.charAt(2),o=t.charAt(3),t="#"+i+i+r+r+o+o+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(p=parseInt(t.substr(1,6),16))>>16,p>>8&jr,p&jr,parseInt(t.substr(7),16)/255];p=[(t=parseInt(t.substr(1),16))>>16,t>>8&jr,t&jr]}else if("hsl"===t.substr(0,3))if(p=h=t.match(di),e){if(~t.indexOf("="))return p=t.match(hi),n&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,s=+p[1]/100,i=2*(l=+p[2]/100)-(r=l<=.5?l*(s+1):l+s-l*s),p.length>3&&(p[3]*=1),p[0]=Xr(a+1/3,i,r),p[1]=Xr(a,i,r),p[2]=Xr(a-1/3,i,r);else p=t.match(di)||Wr.transparent;p=p.map(Number)}return e&&!h&&(i=p[0]/jr,r=p[1]/jr,o=p[2]/jr,l=((c=Math.max(i,r,o))+(u=Math.min(i,r,o)))/2,c===u?a=s=0:(d=c-u,s=l>.5?d/(2-c-u):d/(c+u),a=c===i?(r-o)/d+(r<o?6:0):c===r?(o-i)/d+2:(i-r)/d+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*s+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},qr=function(t){var e=[],n=[],i=-1;return t.split(Gr).forEach(function(t){var r=t.match(pi)||[];e.push.apply(e,r),n.push(i+=r.length+1)}),e.c=n,e},Vr=function(t,e,n){var i,r,o,a,s="",l=(t+s).match(Gr),c=e?"hsla(":"rgba(",u=0;if(!l)return t;if(l=l.map(function(t){return(t=Yr(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),n&&(o=qr(t),(i=n.c).join(s)!==o.c.join(s)))for(a=(r=t.replace(Gr,"1").split(pi)).length-1;u<a;u++)s+=r[u]+(~i.indexOf(u)?l.shift()||c+"0,0,0,0)":(o.length?o:l.length?l:n).shift());if(!r)for(a=(r=t.split(Gr)).length-1;u<a;u++)s+=r[u]+l[u];return s+r[a]},Gr=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Wr)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Zr=/hsl[a]?\(/,Kr=function(t){var e,n=t.join(" ");if(Gr.lastIndex=0,Gr.test(n))return e=Zr.test(n),t[1]=Vr(t[1],e),t[0]=Vr(t[0],e,qr(t[1])),!0},Qr=function(){var t,e,n,i,r,o,a=Date.now,s=500,l=33,c=a(),u=c,d=1e3/240,h=d,p=[],_=function n(_){var m,f,g,y,v=a()-u,b=!0===_;if((v>s||v<0)&&(c+=v-l),((m=(g=(u+=v)-c)-h)>0||b)&&(y=++i.frame,r=g-1e3*i.time,i.time=g/=1e3,h+=m+(m>=d?4:d-m),f=1),b||(t=e(n)),f)for(o=0;o<p.length;o++)p[o](g,r,y,_)};return i={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(t){return r/(1e3/(t||60))},wake:function(){On&&(!Bn&&oi()&&(Fn=Bn=window,zn=Fn.document||{},yi.gsap=Qo,(Fn.gsapVersions||(Fn.gsapVersions=[])).push(Qo.version),bi(vi||Fn.GreenSockGlobals||!Fn.gsap&&Fn||{}),Ur.forEach(Hr)),n="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,t&&i.sleep(),e=n||function(t){return setTimeout(t,h-1e3*i.time+1|0)},Hn=1,_(2))},sleep:function(){(n?cancelAnimationFrame:clearTimeout)(t),Hn=0,e=$i},lagSmoothing:function(t,e){s=t||1/0,l=Math.min(e||33,s)},fps:function(t){d=1e3/(t||240),h=1e3*i.time+d},add:function(t,e,n){var r=e?function(e,n,o,a){t(e,n,o,a),i.remove(r)}:t;return i.remove(t),p[n?"unshift":"push"](r),Jr(),r},remove:function(t,e){~(e=p.indexOf(t))&&p.splice(e,1)&&o>=e&&o--},_listeners:p},i}(),Jr=function(){return!Hn&&Qr.wake()},to={},eo=/^[\d.\-M][\d.\-,\s]/,no=/["']/g,io=function(t){for(var e,n,i,r={},o=t.substr(1,t.length-3).split(":"),a=o[0],s=1,l=o.length;s<l;s++)n=o[s],e=s!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[a]=isNaN(i)?i.replace(no,"").trim():+i,a=n.substr(e+1).trim();return r},ro=function(t){return function(e){return 1-t(1-e)}},oo=function t(e,n){for(var i,r=e._first;r;)r instanceof _o?t(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},ao=function(t,e){return t&&(ti(t)?t:to[t]||function(t){var e,n,i,r,o=(t+"").split("("),a=to[o[0]];return a&&o.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[io(o[1])]:(e=t,n=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",n),e.substring(n,~r&&r<i?e.indexOf(")",i+1):i)).split(",").map(qi)):to._CE&&eo.test(t)?to._CE("",t):a}(t))||e},so=function(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,o={easeIn:e,easeOut:n,easeInOut:i};return Oi(t,function(t){for(var e in to[t]=yi[t]=o,to[r=t.toLowerCase()]=n,o)to[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=to[t+"."+e]=o[e]}),o},lo=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},co=function t(e,n,i){var r=n>=1?n:1,o=(i||(e?.3:.45))/(n<1?n:1),a=o/qn*(Math.asin(1/r)||0),s=function(t){return 1===t?1:r*Math.pow(2,-10*t)*Qn((t-a)*o)+1},l="out"===e?s:"in"===e?function(t){return 1-s(1-t)}:lo(s);return o=qn/o,l.config=function(n,i){return t(e,n,i)},l},uo=function t(e,n){void 0===n&&(n=1.70158);var i=function(t){return t?--t*t*((n+1)*t+n)+1:0},r="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:lo(i);return r.config=function(n){return t(e,n)},r};Oi("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;so(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},function(t){return 1-Math.pow(1-t,n)},function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2})}),to.Linear.easeNone=to.none=to.Linear.easeIn,so("Elastic",co("in"),co("out"),co()),function(t,e){var n=1/e,i=2*n,r=2.5*n,o=function(o){return o<n?t*o*o:o<i?t*Math.pow(o-1.5/e,2)+.75:o<r?t*(o-=2.25/e)*o+.9375:t*Math.pow(o-2.625/e,2)+.984375};so("Bounce",function(t){return 1-o(1-t)},o)}(7.5625,2.75),so("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)}),so("Circ",function(t){return-(Zn(1-t*t)-1)}),so("Sine",function(t){return 1===t?1:1-Kn(t*Vn)}),so("Back",uo("in"),uo("out"),uo()),to.SteppedEase=to.steps=yi.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0;return function(t){return((i*kr(0,.99999999,t)|0)+r)*n}}},Wn.ease=to["quad.out"],Oi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return Di+=t+","+t+"Params,"});var ho=function(t,e){this.id=Gn++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:zi,this.set=e?e.getSetter:Ao},po=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,gr(this,+t.duration,1,1),this.data=t.data,Nn&&(this._ctx=Nn,Nn.data.push(this)),Hn||Qr.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,gr(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Jr(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(ur(this,t),!n._dp||n.parent||dr(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&hr(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===Yn||!this._initted&&this._dur&&t||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Yi(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+ar(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+ar(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?sr(this._tTime,n)+1:1},e.timeScale=function(t,e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var n=this.parent&&this._ts?lr(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(kr(-Math.abs(this._delay),this.totalDuration(),n),!1!==e),cr(this),function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Jr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Yn&&(this._tTime-=Yn)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=Ui(t);var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&hr(e,this,this._start-this._delay),this}return this._start},e.endTime=function(t){return this._start+(ri(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?lr(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=Si);var e=In;return In=t,Xi(this)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),In=e,this},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,yr(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,yr(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(br(this,t),ri(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,ri(e)),this._dur||(this._zTime=-1e-8),this},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-Yn))},e.eventCallback=function(t,e,n){var i=this.vars;return arguments.length>1?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this,n=e._prom;return new Promise(function(i){var r=ti(t)?t:Vi,o=function(){var t=e.then;e.then=null,n&&n(),ti(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),i(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?o():e._prom=o})},e.kill=function(){Lr(this)},t}();Gi(po.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var _o=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=ri(e.sortChildren),Dn&&hr(e.parent||Dn,An(i),n),e.reversed&&i.reverse(),e.paused&&i.paused(!0),e.scrollTrigger&&pr(An(i),e.scrollTrigger),i}Rn(e,t);var n=e.prototype;return n.to=function(t,e,n){return xr(0,arguments,this),this},n.from=function(t,e,n){return xr(1,arguments,this),this},n.fromTo=function(t,e,n,i){return xr(2,arguments,this),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,Ji(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Mo(t,e,br(this,n),1),this},n.call=function(t,e,n){return hr(this,Mo.delayedCall(0,t,e),n)},n.staggerTo=function(t,e,n,i,r,o,a){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new Mo(t,n,br(this,r)),this},n.staggerFrom=function(t,e,n,i,r,o,a){return n.runBackwards=1,Ji(n).immediateRender=ri(n.immediateRender),this.staggerTo(t,e,n,i,r,o,a)},n.staggerFromTo=function(t,e,n,i,r,o,a,s){return i.startAt=n,Ji(i).immediateRender=ri(i.immediateRender),this.staggerTo(t,e,i,r,o,a,s)},n.render=function(t,e,n){var i,r,o,a,s,l,c,u,d,h,p,_,m=this._time,f=this._dirty?this.totalDuration():this._tDur,g=this._dur,y=t<=0?0:Ui(t),v=this._zTime<0!=t<0&&(this._initted||!g);if(this!==Dn&&y>f&&t>=0&&(y=f),y!==this._tTime||n||v){if(m!==this._time&&g&&(y+=this._time-m,t+=this._time-m),i=y,d=this._start,l=!(u=this._ts),v&&(g||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(p=this._yoyo,s=g+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*s+t,e,n);if(i=Ui(y%s),y===f?(a=this._repeat,i=g):((a=~~(h=Ui(y/s)))&&a===h&&(i=g,a--),i>g&&(i=g)),h=sr(this._tTime,s),!m&&this._tTime&&h!==a&&this._tTime-h*s-this._dur<=0&&(h=a),p&&1&a&&(i=g-i,_=1),a!==h&&!this._lock){var b=p&&1&h,x=b===(p&&1&a);if(a<h&&(b=!b),m=b?0:y%g?g:y,this._lock=1,this.render(m||(_?0:Ui(a*s)),e,!g)._lock=0,this._tTime=y,!e&&this.parent&&Or(this,"onRepeat"),this.vars.repeatRefresh&&!_&&(this.invalidate()._lock=1,h=a),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(g=this._dur,f=this._tDur,x&&(this._lock=2,m=b?g:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!_&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;oo(this,_)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if("isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if("isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,Ui(m),Ui(i)),c&&(y-=i-(i=c._start))),this._tTime=y,this._time=i,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&y&&g&&!e&&!h&&(Or(this,"onStart"),this._tTime!==y))return this;if(i>=m&&t>=0)for(r=this._first;r;){if(o=r._next,(r._act||i>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){c=0,o&&(y+=this._zTime=-1e-8);break}}r=o}else{r=this._last;for(var w=t<0?t:i;r;){if(o=r._prev,(r._act||w<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(w-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(w-r._start)*r._ts,e,n||In&&Xi(r)),i!==this._time||!this._ts&&!l){c=0,o&&(y+=this._zTime=w?-1e-8:Yn);break}}r=o}}if(c&&!e&&(this.pause(),c.render(i>=m?0:-1e-8)._zTime=i>=m?1:-1,this._ts))return this._start=d,cr(this),this.render(t,e,n);this._onUpdate&&!e&&Or(this,"onUpdate",!0),(y===f&&this._tTime>=this.totalDuration()||!y&&m)&&(d!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((t||!g)&&(y===f&&this._ts>0||!y&&this._ts<0)&&nr(this,1),e||t<0&&!m||!y&&!m&&f||(Or(this,y===f&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<f&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(ei(e)||(e=br(this,e,t)),!(t instanceof po)){if(li(t))return t.forEach(function(t){return n.add(t,e)}),this;if(Jn(t))return this.addLabel(t,e);if(!ti(t))return this;t=Mo.delayedCall(0,t)}return this!==t?hr(this,t,e):this},n.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-Xn);for(var r=[],o=this._first;o;)o._start>=i&&(o instanceof Mo?e&&r.push(o):(n&&r.push(o),t&&r.push.apply(r,o.getChildren(!0,e,n)))),o=o._next;return r},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return Jn(t)?this.removeLabel(t):ti(t)?this.killTweensOf(t):(t.parent===this&&er(this,t),t===this._recent&&(this._recent=this._last),ir(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ui(Qr.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=br(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var i=Mo.delayedCall(0,e||$i,n);return i.data="isPause",this._hasPause=1,hr(this,i,br(this,t))},n.removePause=function(t){var e=this._first;for(t=br(this,t);e;)e._start===t&&"isPause"===e.data&&nr(e),e=e._next},n.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)mo!==i[r]&&i[r].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,i=[],r=Er(t),o=this._first,a=ei(e);o;)o instanceof Mo?ji(o._targets,r)&&(a?(!mo||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&i.push(o):(n=o.getTweensOf(r,e)).length&&i.push.apply(i,n),o=o._next;return i},n.tweenTo=function(t,e){e=e||{};var n,i=this,r=br(i,t),o=e,a=o.startAt,s=o.onStart,l=o.onStartParams,c=o.immediateRender,u=Mo.to(i,Gi({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale())||Yn,onStart:function(){if(i.pause(),!n){var t=e.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale());u._dur!==t&&gr(u,t,0,1).render(u._time,!0,!0),n=1}s&&s.apply(u,l||[])}},e));return c?u.render(0):u},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,Gi({startAt:{time:br(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),zr(this,br(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),zr(this,br(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+Yn)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);var i,r=this._first,o=this.labels;for(t=Ui(t);r;)r._start>=n&&(r._start+=t,r._end+=t),r=r._next;if(e)for(i in o)o[i]>=n&&(o[i]+=t);return ir(this)},n.invalidate=function(e){var n=this._first;for(this._lock=0;n;)n.invalidate(e),n=n._next;return t.prototype.invalidate.call(this,e)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),ir(this)},n.totalDuration=function(t){var e,n,i,r=0,o=this,a=o._last,s=Xn;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-t:t));if(o._dirty){for(i=o.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>s&&o._sort&&a._ts&&!o._lock?(o._lock=1,hr(o,a,n-a._delay,1)._lock=0):s=n,n<0&&a._ts&&(r-=n,(!i&&!o._dp||i&&i.smoothChildTiming)&&(o._start+=Ui(n/o._ts),o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-Infinity),s=0),a._end>r&&a._ts&&(r=a._end),a=e;gr(o,o===Dn&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(t){if(Dn._ts&&(Yi(Dn,lr(t,Dn)),Ln=Qr.frame),Qr.frame>=Ii){Ii+=jn.autoSleep||120;var e=Dn._first;if((!e||!e._ts)&&jn.autoSleep&&Qr._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Qr.sleep()}}},e}(po);Gi(_o.prototype,{_lock:0,_hasPause:0,_forcing:0});var mo,fo,go=function(t,e,n,i,r,o,a){var s,l,c,u,d,h,p,_,m=new Oo(this._pt,t,e,0,1,Io,null,r),f=0,g=0;for(m.b=n,m.e=i,n+="",(p=~(i+="").indexOf("random("))&&(i=Fr(i)),o&&(o(_=[n,i],t,e),n=_[0],i=_[1]),l=n.match(_i)||[];s=_i.exec(i);)u=s[0],d=i.substring(f,s.index),c?c=(c+1)%5:"rgba("===d.substr(-5)&&(c=1),u!==l[g++]&&(h=parseFloat(l[g-1])||0,m._pt={_next:m._pt,p:d||1===g?d:",",s:h,c:"="===u.charAt(1)?Hi(h,u)-h:parseFloat(u)-h,m:c&&c<4?Math.round:0},f=_i.lastIndex);return m.c=f<i.length?i.substring(f,i.length):"",m.fp=a,(mi.test(i)||p)&&(m.e=0),this._pt=m,m},yo=function(t,e,n,i,r,o,a,s,l,c){ti(i)&&(i=i(r||0,t,o));var u,d=t[e],h="get"!==n?n:ti(d)?l?t[e.indexOf("set")||!ti(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():d,p=ti(d)?l?Eo:So:Co;if(Jn(i)&&(~i.indexOf("random(")&&(i=Fr(i)),"="===i.charAt(1)&&((u=Hi(h,i)+($r(h)||0))||0===u)&&(i=u)),!c||h!==i||fo)return isNaN(h*i)||""===i?(!d&&!(e in t)&&xi(e,i),go.call(this,t,e,h,i,p,s||jn.stringFilter,l)):(u=new Oo(this._pt,t,e,+h||0,i-(h||0),"boolean"==typeof d?To:Ro,0,p),l&&(u.fp=l),a&&u.modifier(a,this,t),this._pt=u)},vo=function(t,e,n,i,r,o){var a,s,l,c;if(Ri[t]&&!1!==(a=new Ri[t]).init(r,a.rawVars?e[t]:function(t,e,n,i,r){if(ti(t)&&(t=wo(t,r,e,n,i)),!ii(t)||t.style&&t.nodeType||li(t)||si(t))return Jn(t)?wo(t,r,e,n,i):t;var o,a={};for(o in t)a[o]=wo(t[o],r,e,n,i);return a}(e[t],i,r,o,n),n,i,o)&&(n._pt=s=new Oo(n._pt,r,t,0,1,a.render,a,0,a.priority),n!==Un))for(l=n._ptLookup[n._targets.indexOf(r)],c=a._props.length;c--;)l[a._props[c]]=s;return a},bo=function t(e,n,i){var r,o,a,s,l,c,u,d,h,p,_,m,f,g=e.vars,y=g.ease,v=g.startAt,b=g.immediateRender,x=g.lazy,w=g.onUpdate,k=g.runBackwards,$=g.yoyoEase,M=g.keyframes,C=g.autoRevert,S=e._dur,E=e._startAt,P=e._targets,A=e.parent,R=A&&"nested"===A.data?A.vars.targets:P,T="auto"===e._overwrite&&!Tn,I=e.timeline;if(I&&(!M||!y)&&(y="none"),e._ease=ao(y,Wn.ease),e._yEase=$?ro(ao(!0===$?y:$,Wn.ease)):0,$&&e._yoyo&&!e._repeat&&($=e._yEase,e._yEase=e._ease,e._ease=$),e._from=!I&&!!g.runBackwards,!I||M&&!g.stagger){if(m=(d=P[0]?Bi(P[0]).harness:0)&&g[d.prop],r=Qi(g,Ei),E&&(E._zTime<0&&E.progress(1),n<0&&k&&b&&!C?E.render(-1,!0):E.revert(k&&S?Ci:Mi),E._lazy=0),v){if(nr(e._startAt=Mo.set(P,Gi({data:"isStart",overwrite:!1,parent:A,immediateRender:!0,lazy:!E&&ri(x),startAt:null,delay:0,onUpdate:w&&function(){return Or(e,"onUpdate")},stagger:0},v))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(In||!b&&!C)&&e._startAt.revert(Ci),b&&S&&n<=0&&i<=0)return void(n&&(e._zTime=n))}else if(k&&S&&!E)if(n&&(b=!1),a=Gi({overwrite:!1,data:"isFromStart",lazy:b&&!E&&ri(x),immediateRender:b,stagger:0,parent:A},r),m&&(a[d.prop]=m),nr(e._startAt=Mo.set(P,a)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(In?e._startAt.revert(Ci):e._startAt.render(-1,!0)),e._zTime=n,b){if(!n)return}else t(e._startAt,Yn,Yn);for(e._pt=e._ptCache=0,x=S&&ri(x)||x&&!S,o=0;o<P.length;o++){if(u=(l=P[o])._gsap||Fi(P)[o]._gsap,e._ptLookup[o]=p={},Ai[u.id]&&Pi.length&&Wi(),_=R===P?o:R.indexOf(l),d&&!1!==(h=new d).init(l,m||r,e,_,R)&&(e._pt=s=new Oo(e._pt,l,h.name,0,1,h.render,h,0,h.priority),h._props.forEach(function(t){p[t]=s}),h.priority&&(c=1)),!d||m)for(a in r)Ri[a]&&(h=vo(a,r,e,_,l,R))?h.priority&&(c=1):p[a]=s=yo.call(e,l,a,"get",r[a],_,R,0,g.stringFilter);e._op&&e._op[o]&&e.kill(l,e._op[o]),T&&e._pt&&(mo=e,Dn.killTweensOf(l,p,e.globalTime(n)),f=!e.parent,mo=0),e._pt&&x&&(Ai[u.id]=1)}c&&zo(e),e._onInit&&e._onInit(e)}e._onUpdate=w,e._initted=(!e._op||e._pt)&&!f,M&&n<=0&&I.render(Xn,!0,!0)},xo=function(t,e,n,i){var r,o,a=e.ease||i||"power1.inOut";if(li(e))o=n[t]||(n[t]=[]),e.forEach(function(t,n){return o.push({t:n/(e.length-1)*100,v:t,e:a})});else for(r in e)o=n[r]||(n[r]=[]),"ease"===r||o.push({t:parseFloat(t),v:e[r],e:a})},wo=function(t,e,n,i,r){return ti(t)?t.call(e,n,i,r):Jn(t)&&~t.indexOf("random(")?Fr(t):t},ko=Di+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",$o={};Oi(ko+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return $o[t]=1});var Mo=function(t){function e(e,n,i,r){var o;"number"==typeof n&&(i.duration=n,n=i,i=null);var a,s,l,c,u,d,h,p,_=(o=t.call(this,r?n:Ji(n))||this).vars,m=_.duration,f=_.delay,g=_.immediateRender,y=_.stagger,v=_.overwrite,b=_.keyframes,x=_.defaults,w=_.scrollTrigger,k=_.yoyoEase,$=n.parent||Dn,M=(li(e)||si(e)?ei(e[0]):"length"in n)?[e]:Er(e);if(o._targets=M.length?Fi(M):wi("GSAP target "+e+" not found. https://gsap.com",!jn.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=v,b||y||ai(m)||ai(f)){if(n=o.vars,(a=o.timeline=new _o({data:"nested",defaults:x||{},targets:$&&"nested"===$.data?$.vars.targets:M})).kill(),a.parent=a._dp=An(o),a._start=0,y||ai(m)||ai(f)){if(c=M.length,h=y&&Rr(y),ii(y))for(u in y)~ko.indexOf(u)&&(p||(p={}),p[u]=y[u]);for(s=0;s<c;s++)(l=Qi(n,$o)).stagger=0,k&&(l.yoyoEase=k),p&&Zi(l,p),d=M[s],l.duration=+wo(m,An(o),s,d,M),l.delay=(+wo(f,An(o),s,d,M)||0)-o._delay,!y&&1===c&&l.delay&&(o._delay=f=l.delay,o._start+=f,l.delay=0),a.to(d,l,h?h(s,d,M):0),a._ease=to.none;a.duration()?m=f=0:o.timeline=0}else if(b){Ji(Gi(a.vars.defaults,{ease:"none"})),a._ease=ao(b.ease||n.ease||"none");var C,S,E,P=0;if(li(b))b.forEach(function(t){return a.to(M,t,">")}),a.duration();else{for(u in l={},b)"ease"===u||"easeEach"===u||xo(u,b[u],l,b.easeEach);for(u in l)for(C=l[u].sort(function(t,e){return t.t-e.t}),P=0,s=0;s<C.length;s++)(E={ease:(S=C[s]).e,duration:(S.t-(s?C[s-1].t:0))/100*m})[u]=S.v,a.to(M,E,P),P+=E.duration;a.duration()<m&&a.to({},{duration:m-a.duration()})}}m||o.duration(m=a.duration())}else o.timeline=0;return!0!==v||Tn||(mo=An(o),Dn.killTweensOf(M),mo=0),hr($,An(o),i),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(g||!m&&!b&&o._start===Ui($._time)&&ri(g)&&or(An(o))&&"nested"!==$.data)&&(o._tTime=-1e-8,o.render(Math.max(0,-f)||0)),w&&pr(An(o),w),o}Rn(e,t);var n=e.prototype;return n.render=function(t,e,n){var i,r,o,a,s,l,c,u,d,h=this._time,p=this._tDur,_=this._dur,m=t<0,f=t>p-Yn&&!m?p:t<Yn?0:t;if(_){if(f!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(i=f,u=this.timeline,this._repeat){if(a=_+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*a+t,e,n);if(i=Ui(f%a),f===p?(o=this._repeat,i=_):(o=~~(s=Ui(f/a)))&&o===s?(i=_,o--):i>_&&(i=_),(l=this._yoyo&&1&o)&&(d=this._yEase,i=_-i),s=sr(this._tTime,a),i===h&&!n&&this._initted&&o===s)return this._tTime=f,this;o!==s&&(u&&this._yEase&&oo(u,l),this.vars.repeatRefresh&&!l&&!this._lock&&i!==a&&this._initted&&(this._lock=n=1,this.render(Ui(a*o),!0).invalidate()._lock=0))}if(!this._initted){if(_r(this,m?t:i,n,e,f))return this._tTime=0,this;if(!(h===this._time||n&&this.vars.repeatRefresh&&o!==s))return this;if(_!==this._dur)return this.render(t,e,n)}if(this._tTime=f,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(d||this._ease)(i/_),this._from&&(this.ratio=c=1-c),!h&&f&&!e&&!s&&(Or(this,"onStart"),this._tTime!==f))return this;for(r=this._pt;r;)r.r(c,r.d),r=r._next;u&&u.render(t<0?t:u._dur*u._ease(i/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(m&&rr(this,t,0,n),Or(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!e&&this.parent&&Or(this,"onRepeat"),f!==this._tDur&&f||this._tTime!==f||(m&&!this._onUpdate&&rr(this,t,0,!0),(t||!_)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&nr(this,1),e||m&&!h||!(f||h||l)||(Or(this,f===p?"onComplete":"onReverseComplete",!0),this._prom&&!(f<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,i){var r,o,a,s=t.ratio,l=e<0||!e&&(!t._start&&mr(t)&&(t._initted||!fr(t))||(t._ts<0||t._dp._ts<0)&&!fr(t))?0:1,c=t._rDelay,u=0;if(c&&t._repeat&&(u=kr(0,t._tDur,e),o=sr(u,c),t._yoyo&&1&o&&(l=1-l),o!==sr(t._tTime,c)&&(s=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==s||In||i||t._zTime===Yn||!e&&t._zTime){if(!t._initted&&_r(t,e,i,n,u))return;for(a=t._zTime,t._zTime=e||(n?Yn:0),n||(n=e&&!a),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=u,r=t._pt;r;)r.r(l,r.d),r=r._next;e<0&&rr(t,e,0,!0),t._onUpdate&&!n&&Or(t,"onUpdate"),u&&t._repeat&&!n&&t.parent&&Or(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&nr(t,1),n||In||(Or(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},n.resetTo=function(t,e,n,i,r){Hn||Qr.wake(),this._ts||this.play();var o=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||bo(this,o),function(t,e,n,i,r,o,a,s){var l,c,u,d,h=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!h)for(h=t._ptCache[e]=[],u=t._ptLookup,d=t._targets.length;d--;){if((l=u[d][e])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==e&&l.fp!==e;)l=l._next;if(!l)return fo=1,t.vars[e]="+=0",bo(t,a),fo=0,s?wi(e+" not eligible for reset"):1;h.push(l)}for(d=h.length;d--;)(l=(c=h[d])._pt||c).s=!i&&0!==i||r?l.s+(i||0)+o*l.c:i,l.c=n-l.s,c.e&&(c.e=Li(n)+$r(c.e)),c.b&&(c.b=l.s+$r(c.b))}(this,t,e,n,i,this._ease(o/this._dur),o,r)?this.resetTo(t,e,n,i,1):(ur(this,0),this.parent||tr(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?Lr(this):this.scrollTrigger&&this.scrollTrigger.kill(!!In),this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,mo&&!0!==mo.vars.overwrite)._first||Lr(this),this.parent&&n!==this.timeline.totalDuration()&&gr(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,o,a,s,l,c,u=this._targets,d=t?Er(t):u,h=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0}(u,d))return"all"===e&&(this._pt=0),Lr(this);for(i=this._op=this._op||[],"all"!==e&&(Jn(e)&&(s={},Oi(e,function(t){return s[t]=1}),e=s),e=function(t,e){var n,i,r,o,a=t[0]?Bi(t[0]).harness:0,s=a&&a.aliases;if(!s)return e;for(i in n=Zi({},e),s)if(i in n)for(r=(o=s[i].split(",")).length;r--;)n[o[r]]=n[i];return n}(u,e)),c=u.length;c--;)if(~d.indexOf(u[c]))for(s in r=h[c],"all"===e?(i[c]=e,a=r,o={}):(o=i[c]=i[c]||{},a=e),a)(l=r&&r[s])&&("kill"in l.d&&!0!==l.d.kill(s)||er(this,l,"_pt"),delete r[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&p&&Lr(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,e){return xr(1,arguments)},e.delayedCall=function(t,n,i,r){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},e.fromTo=function(t,e,n){return xr(2,arguments)},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return Dn.killTweensOf(t,e,n)},e}(po);Gi(Mo.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Oi("staggerTo,staggerFrom,staggerFromTo",function(t){Mo[t]=function(){var e=new _o,n=Mr.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}});var Co=function(t,e,n){return t[e]=n},So=function(t,e,n){return t[e](n)},Eo=function(t,e,n,i){return t[e](i.fp,n)},Po=function(t,e,n){return t.setAttribute(e,n)},Ao=function(t,e){return ti(t[e])?So:ni(t[e])&&t.setAttribute?Po:Co},Ro=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},To=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Io=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},No=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Do=function(t,e,n,i){for(var r,o=this._pt;o;)r=o._next,o.p===i&&o.modifier(t,e,n),o=r},Fo=function(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?er(this,i,"_pt"):i.dep||(e=1),i=n;return!e},Bo=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},zo=function(t){for(var e,n,i,r,o=t._pt;o;){for(e=o._next,n=i;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:r)?o._prev._next=o:i=o,(o._next=n)?n._prev=o:r=o,o=e}t._pt=i},Oo=function(){function t(t,e,n,i,r,o,a,s,l){this.t=e,this.s=i,this.c=r,this.p=n,this.r=o||Ro,this.d=a||this,this.set=s||Co,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=Bo,this.m=t,this.mt=n,this.tween=e},t}();Oi(Di+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return Ei[t]=1}),yi.TweenMax=yi.TweenLite=Mo,yi.TimelineLite=yi.TimelineMax=_o,Dn=new _o({sortChildren:!1,defaults:Wn,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),jn.stringFilter=Kr;var Lo=[],Uo={},Ho=[],jo=0,Wo=0,Xo=function(t){return(Uo[t]||Ho).map(function(t){return t()})},Yo=function(){var t=Date.now(),e=[];t-jo>2&&(Xo("matchMediaInit"),Lo.forEach(function(t){var n,i,r,o,a=t.queries,s=t.conditions;for(i in a)(n=Fn.matchMedia(a[i]).matches)&&(r=1),n!==s[i]&&(s[i]=n,o=1);o&&(t.revert(),r&&e.push(t))}),Xo("matchMediaRevert"),e.forEach(function(t){return t.onMatch(t,function(e){return t.add(null,e)})}),jo=t,Xo("matchMedia"))},qo=function(){function t(t,e){this.selector=e&&Pr(e),this.data=[],this._r=[],this.isReverted=!1,this.id=Wo++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,n){ti(t)&&(n=e,e=t,t=ti);var i=this,r=function(){var t,r=Nn,o=i.selector;return r&&r!==i&&r.data.push(i),n&&(i.selector=Pr(n)),Nn=i,t=e.apply(i,arguments),ti(t)&&i._r.push(t),Nn=r,i.selector=o,i.isReverted=!1,t};return i.last=r,t===ti?r(i,function(t){return i.add(null,t)}):t?i[t]=r:r},e.ignore=function(t){var e=Nn;Nn=null,t(this),Nn=e},e.getTweens=function(){var e=[];return this.data.forEach(function(n){return n instanceof t?e.push.apply(e,n.getTweens()):n instanceof Mo&&!(n.parent&&"nested"===n.parent.data)&&e.push(n)}),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var n=this;if(t?function(){for(var e,i=n.getTweens(),r=n.data.length;r--;)"isFlip"===(e=n.data[r]).data&&(e.revert(),e.getChildren(!0,!0,!1).forEach(function(t){return i.splice(i.indexOf(t),1)}));for(i.map(function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t}}).sort(function(t,e){return e.g-t.g||-1/0}).forEach(function(e){return e.t.revert(t)}),r=n.data.length;r--;)(e=n.data[r])instanceof _o?"nested"!==e.data&&(e.scrollTrigger&&e.scrollTrigger.revert(),e.kill()):!(e instanceof Mo)&&e.revert&&e.revert(t);n._r.forEach(function(e){return e(t,n)}),n.isReverted=!0}():this.data.forEach(function(t){return t.kill&&t.kill()}),this.clear(),e)for(var i=Lo.length;i--;)Lo[i].id===this.id&&Lo.splice(i,1)},e.revert=function(t){this.kill(t||{})},t}(),Vo=function(){function t(t){this.contexts=[],this.scope=t,Nn&&Nn.data.push(this)}var e=t.prototype;return e.add=function(t,e,n){ii(t)||(t={matches:t});var i,r,o,a=new qo(0,n||this.scope),s=a.conditions={};for(r in Nn&&!a.selector&&(a.selector=Nn.selector),this.contexts.push(a),e=a.add("onMatch",e),a.queries=t,t)"all"===r?o=1:(i=Fn.matchMedia(t[r]))&&(Lo.indexOf(a)<0&&Lo.push(a),(s[r]=i.matches)&&(o=1),i.addListener?i.addListener(Yo):i.addEventListener("change",Yo));return o&&e(a,function(t){return a.add(null,t)}),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach(function(e){return e.kill(t,!0)})},t}(),Go={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){return Hr(t)})},timeline:function(t){return new _o(t)},getTweensOf:function(t,e){return Dn.getTweensOf(t,e)},getProperty:function(t,e,n,i){Jn(t)&&(t=Er(t)[0]);var r=Bi(t||{}).get,o=n?Vi:qi;return"native"===n&&(n=""),t?e?o((Ri[e]&&Ri[e].get||r)(t,e,n,i)):function(e,n,i){return o((Ri[e]&&Ri[e].get||r)(t,e,n,i))}:t},quickSetter:function(t,e,n){if((t=Er(t)).length>1){var i=t.map(function(t){return Qo.quickSetter(t,e,n)}),r=i.length;return function(t){for(var e=r;e--;)i[e](t)}}t=t[0]||{};var o=Ri[e],a=Bi(t),s=a.harness&&(a.harness.aliases||{})[e]||e,l=o?function(e){var i=new o;Un._pt=0,i.init(t,n?e+n:e,Un,0,[t]),i.render(1,i),Un._pt&&No(1,Un)}:a.set(t,s);return o?l:function(e){return l(t,s,n?e+n:e,a,1)}},quickTo:function(t,e,n){var i,r=Qo.to(t,Gi(((i={})[e]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),o=function(t,n,i){return r.resetTo(e,t,n,i)};return o.tween=r,o},isTweening:function(t){return Dn.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=ao(t.ease,Wn.ease)),Ki(Wn,t||{})},config:function(t){return Ki(jn,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,o=t.extendTimeline;(i||"").split(",").forEach(function(t){return t&&!Ri[t]&&!yi[t]&&wi(e+" effect requires "+t+" plugin.")}),Ti[e]=function(t,e,i){return n(Er(t),Gi(e||{},r),i)},o&&(_o.prototype[e]=function(t,n,i){return this.add(Ti[e](t,ii(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){to[t]=ao(e)},parseEase:function(t,e){return arguments.length?ao(t,e):to},getById:function(t){return Dn.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,i,r=new _o(t);for(r.smoothChildTiming=ri(t.smoothChildTiming),Dn.remove(r),r._dp=0,r._time=r._tTime=Dn._time,n=Dn._first;n;)i=n._next,!e&&!n._dur&&n instanceof Mo&&n.vars.onComplete===n._targets[0]||hr(r,n,n._start-n._delay),n=i;return hr(Dn,r,0),r},context:function(t,e){return t?new qo(t,e):Nn},matchMedia:function(t){return new Vo(t)},matchMediaRefresh:function(){return Lo.forEach(function(t){var e,n,i=t.conditions;for(n in i)i[n]&&(i[n]=!1,e=1);e&&t.revert()})||Yo()},addEventListener:function(t,e){var n=Uo[t]||(Uo[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=Uo[t],i=n&&n.indexOf(e);i>=0&&n.splice(i,1)},utils:{wrap:function t(e,n,i){var r=n-e;return li(e)?Dr(e,t(0,e.length),n):wr(i,function(t){return(r+(t-e)%r)%r+e})},wrapYoyo:function t(e,n,i){var r=n-e,o=2*r;return li(e)?Dr(e,t(0,e.length-1),n):wr(i,function(t){return e+((t=(o+(t-e)%o)%o||0)>r?o-t:t)})},distribute:Rr,random:Nr,snap:Ir,normalize:function(t,e,n){return Br(t,e,0,1,n)},getUnit:$r,clamp:function(t,e,n){return wr(n,function(n){return kr(t,e,n)})},splitColor:Yr,toArray:Er,selector:Pr,mapRange:Br,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||$r(n))}},interpolate:function t(e,n,i,r){var o=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!o){var a,s,l,c,u,d=Jn(e),h={};if(!0===i&&(r=1)&&(i=null),d)e={p:e},n={p:n};else if(li(e)&&!li(n)){for(l=[],c=e.length,u=c-2,s=1;s<c;s++)l.push(t(e[s-1],e[s]));c--,o=function(t){t*=c;var e=Math.min(u,~~t);return l[e](t-e)},i=n}else r||(e=Zi(li(e)?[]:{},e));if(!l){for(a in n)yo.call(h,e,a,"get",n[a]);o=function(t){return No(t,h)||(d?e.p:e)}}}return wr(i,o)},shuffle:Ar},install:bi,effects:Ti,ticker:Qr,updateRoot:_o.updateRoot,plugins:Ri,globalTimeline:Dn,core:{PropTween:Oo,globals:ki,Tween:Mo,Timeline:_o,Animation:po,getCache:Bi,_removeLinkedListItem:er,reverting:function(){return In},context:function(t){return t&&Nn&&(Nn.data.push(t),t._ctx=Nn),Nn},suppressOverwrites:function(t){return Tn=t}}};Oi("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Go[t]=Mo[t]}),Qr.add(_o.updateRoot),Un=Go.to({},{duration:0});var Zo=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Ko=function(t,e){return{name:t,headless:1,rawVars:1,init:function(t,n,i){i._onInit=function(t){var i,r;if(Jn(n)&&(i={},Oi(n,function(t){return i[t]=1}),n=i),e){for(r in i={},n)i[r]=e(n[r]);n=i}!function(t,e){var n,i,r,o=t._targets;for(n in e)for(i=o.length;i--;)(r=t._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=Zo(r,n)),r&&r.modifier&&r.modifier(e[n],t,o[i],n))}(t,n)}}}},Qo=Go.registerPlugin({name:"attr",init:function(t,e,n,i,r){var o,a,s;for(o in this.tween=n,e)s=t.getAttribute(o)||"",(a=this.add(t,"setAttribute",(s||0)+"",e[o],i,r,0,0,o)).op=o,a.b=s,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)In?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",headless:1,init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Ko("roundProps",Tr),Ko("modifiers"),Ko("snap",Ir))||Go;Mo.version=_o.version=Qo.version="3.14.2",On=1,oi()&&Jr();to.Power0,to.Power1,to.Power2,to.Power3,to.Power4,to.Linear,to.Quad,to.Cubic,to.Quart,to.Quint,to.Strong,to.Elastic,to.Back,to.SteppedEase,to.Bounce,to.Sine,to.Expo,to.Circ;var Jo,ta,ea,na,ia,ra,oa,aa,sa={},la=180/Math.PI,ca=Math.PI/180,ua=Math.atan2,da=/([A-Z])/g,ha=/(left|right|width|margin|padding|x)/i,pa=/[\s,\(]\S/,_a={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ma=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},fa=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},ga=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},ya=function(t,e){return e.set(e.t,e.p,1===t?e.e:t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},va=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},ba=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},xa=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},wa=function(t,e,n){return t.style[e]=n},ka=function(t,e,n){return t.style.setProperty(e,n)},$a=function(t,e,n){return t._gsap[e]=n},Ma=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},Ca=function(t,e,n,i,r){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(r,o)},Sa=function(t,e,n,i,r){var o=t._gsap;o[e]=n,o.renderTransform(r,o)},Ea="transform",Pa=Ea+"Origin",Aa=function t(e,n){var i=this,r=this.target,o=r.style,a=r._gsap;if(e in sa&&o){if(this.tfm=this.tfm||{},"transform"===e)return _a.transform.split(",").forEach(function(e){return t.call(i,e,n)});if(~(e=_a[e]||e).indexOf(",")?e.split(",").forEach(function(t){return i.tfm[t]=Va(r,t)}):this.tfm[e]=a.x?a[e]:Va(r,e),e===Pa&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(Ea)>=0)return;a.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Pa,n,"")),e=Ea}(o||n)&&this.props.push(e,n,o[e])},Ra=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Ta=function(){var t,e,n=this.props,i=this.target,r=i.style,o=i._gsap;for(t=0;t<n.length;t+=3)n[t+1]?2===n[t+1]?i[n[t]](n[t+2]):i[n[t]]=n[t+2]:n[t+2]?r[n[t]]=n[t+2]:r.removeProperty("--"===n[t].substr(0,2)?n[t]:n[t].replace(da,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)o[e]=this.tfm[e];o.svg&&(o.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(t=oa())&&t.isStart||r[Ea]||(Ra(r),o.zOrigin&&r[Pa]&&(r[Pa]+=" "+o.zOrigin+"px",o.zOrigin=0,o.renderTransform()),o.uncache=1)}},Ia=function(t,e){var n={target:t,props:[],revert:Ta,save:Aa};return t._gsap||Qo.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(t){return n.save(t)}),n},Na=function(t,e){var n=ta.createElementNS?ta.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ta.createElement(t);return n&&n.style?n:ta.createElement(t)},Da=function t(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace(da,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&t(e,Ba(n)||n,1)||""},Fa="O,Moz,ms,Ms,Webkit".split(","),Ba=function(t,e,n){var i=(e||ia).style,r=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(Fa[r]+t in i););return r<0?null:(3===r?"ms":r>=0?Fa[r]:"")+t},za=function(){"undefined"!=typeof window&&window.document&&(Jo=window,ta=Jo.document,ea=ta.documentElement,ia=Na("div")||{style:{}},Na("div"),Ea=Ba(Ea),Pa=Ea+"Origin",ia.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",aa=!!Ba("perspective"),oa=Qo.core.reverting,na=1)},Oa=function(t){var e,n=t.ownerSVGElement,i=Na("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=t.cloneNode(!0);r.style.display="block",i.appendChild(r),ea.appendChild(i);try{e=r.getBBox()}catch(t){}return i.removeChild(r),ea.removeChild(i),e},La=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Ua=function(t){var e,n;try{e=t.getBBox()}catch(i){e=Oa(t),n=1}return e&&(e.width||e.height)||n||(e=Oa(t)),!e||e.width||e.x||e.y?e:{x:+La(t,["x","cx","x1"])||0,y:+La(t,["y","cy","y1"])||0,width:0,height:0}},Ha=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Ua(t))},ja=function(t,e){if(e){var n,i=t.style;e in sa&&e!==Pa&&(e=Ea),i.removeProperty?("ms"!==(n=e.substr(0,2))&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty("--"===n?e:e.replace(da,"-$1").toLowerCase())):i.removeAttribute(e)}},Wa=function(t,e,n,i,r,o){var a=new Oo(t._pt,e,n,0,1,o?xa:ba);return t._pt=a,a.b=i,a.e=r,t._props.push(n),a},Xa={deg:1,rad:1,turn:1},Ya={grid:1,flex:1},qa=function t(e,n,i,r){var o,a,s,l,c=parseFloat(i)||0,u=(i+"").trim().substr((c+"").length)||"px",d=ia.style,h=ha.test(n),p="svg"===e.tagName.toLowerCase(),_=(p?"client":"offset")+(h?"Width":"Height"),m=100,f="px"===r,g="%"===r;if(r===u||!c||Xa[r]||Xa[u])return c;if("px"!==u&&!f&&(c=t(e,n,i,"px")),l=e.getCTM&&Ha(e),(g||"%"===u)&&(sa[n]||~n.indexOf("adius")))return o=l?e.getBBox()[h?"width":"height"]:e[_],Li(g?c/o*m:c/100*o);if(d[h?"width":"height"]=m+(f?u:r),a="rem"!==r&&~n.indexOf("adius")||"em"===r&&e.appendChild&&!p?e:e.parentNode,l&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==ta&&a.appendChild||(a=ta.body),(s=a._gsap)&&g&&s.width&&h&&s.time===Qr.time&&!s.uncache)return Li(c/s.width*m);if(!g||"height"!==n&&"width"!==n)(g||"%"===u)&&!Ya[Da(a,"display")]&&(d.position=Da(e,"position")),a===e&&(d.position="static"),a.appendChild(ia),o=ia[_],a.removeChild(ia),d.position="absolute";else{var y=e.style[n];e.style[n]=m+r,o=e[_],y?e.style[n]=y:ja(e,n)}return h&&g&&((s=Bi(a)).time=Qr.time,s.width=a[_]),Li(f?o*c/m:o&&c?m/o*c:0)},Va=function(t,e,n,i){var r;return na||za(),e in _a&&"transform"!==e&&~(e=_a[e]).indexOf(",")&&(e=e.split(",")[0]),sa[e]&&"transform"!==e?(r=as(t,i),r="transformOrigin"!==e?r[e]:r.svg?r.origin:ss(Da(t,Pa))+" "+r.zOrigin+"px"):(!(r=t.style[e])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=Ja[e]&&Ja[e](t,e,n)||Da(t,e)||zi(t,e)||("opacity"===e?1:0)),n&&!~(r+"").trim().indexOf(" ")?qa(t,e,r,n)+n:r},Ga=function(t,e,n,i){if(!n||"none"===n){var r=Ba(e,t,1),o=r&&Da(t,r,1);o&&o!==n?(e=r,n=o):"borderColor"===e&&(n=Da(t,"borderTopColor"))}var a,s,l,c,u,d,h,p,_,m,f,g=new Oo(this._pt,t.style,e,0,1,Io),y=0,v=0;if(g.b=n,g.e=i,n+="","var(--"===(i+="").substring(0,6)&&(i=Da(t,i.substring(4,i.indexOf(")")))),"auto"===i&&(d=t.style[e],t.style[e]=i,i=Da(t,e)||i,d?t.style[e]=d:ja(t,e)),Kr(a=[n,i]),i=a[1],l=(n=a[0]).match(pi)||[],(i.match(pi)||[]).length){for(;s=pi.exec(i);)h=s[0],_=i.substring(y,s.index),u?u=(u+1)%5:"rgba("!==_.substr(-5)&&"hsla("!==_.substr(-5)||(u=1),h!==(d=l[v++]||"")&&(c=parseFloat(d)||0,f=d.substr((c+"").length),"="===h.charAt(1)&&(h=Hi(c,h)+f),p=parseFloat(h),m=h.substr((p+"").length),y=pi.lastIndex-m.length,m||(m=m||jn.units[e]||f,y===i.length&&(i+=m,g.e+=m)),f!==m&&(c=qa(t,e,d,m)||0),g._pt={_next:g._pt,p:_||1===v?_:",",s:c,c:p-c,m:u&&u<4||"zIndex"===e?Math.round:0});g.c=y<i.length?i.substring(y,i.length):""}else g.r="display"===e&&"none"===i?xa:ba;return mi.test(i)&&(g.e=0),this._pt=g,g},Za={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ka=function(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(t=n,n=i,i=t),e[0]=Za[n]||n,e[1]=Za[i]||i,e.join(" ")},Qa=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,o=e.t,a=o.style,s=e.u,l=o._gsap;if("all"===s||!0===s)a.cssText="",i=1;else for(r=(s=s.split(",")).length;--r>-1;)n=s[r],sa[n]&&(i=1,n="transformOrigin"===n?Pa:Ea),ja(o,n);i&&(ja(o,Ea),l&&(l.svg&&o.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",as(o,1),l.uncache=1,Ra(a)))}},Ja={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var o=t._pt=new Oo(t._pt,e,n,0,0,Qa);return o.u=i,o.pr=-10,o.tween=r,t._props.push(n),1}}},ts=[1,0,0,1,0,0],es={},ns=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},is=function(t){var e=Da(t,Ea);return ns(e)?ts:e.substr(7).match(hi).map(Li)},rs=function(t,e){var n,i,r,o,a=t._gsap||Bi(t),s=t.style,l=is(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?ts:l:(l!==ts||t.offsetParent||t===ea||a.svg||(r=s.display,s.display="block",(n=t.parentNode)&&(t.offsetParent||t.getBoundingClientRect().width)||(o=1,i=t.nextElementSibling,ea.appendChild(t)),l=is(t),r?s.display=r:ja(t,"display"),o&&(i?n.insertBefore(t,i):n?n.appendChild(t):ea.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},os=function(t,e,n,i,r,o){var a,s,l,c=t._gsap,u=r||rs(t,!0),d=c.xOrigin||0,h=c.yOrigin||0,p=c.xOffset||0,_=c.yOffset||0,m=u[0],f=u[1],g=u[2],y=u[3],v=u[4],b=u[5],x=e.split(" "),w=parseFloat(x[0])||0,k=parseFloat(x[1])||0;n?u!==ts&&(s=m*y-f*g)&&(l=w*(-f/s)+k*(m/s)-(m*b-f*v)/s,w=w*(y/s)+k*(-g/s)+(g*b-y*v)/s,k=l):(w=(a=Ua(t)).x+(~x[0].indexOf("%")?w/100*a.width:w),k=a.y+(~(x[1]||x[0]).indexOf("%")?k/100*a.height:k)),i||!1!==i&&c.smooth?(v=w-d,b=k-h,c.xOffset=p+(v*m+b*g)-v,c.yOffset=_+(v*f+b*y)-b):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=k,c.smooth=!!i,c.origin=e,c.originIsAbsolute=!!n,t.style[Pa]="0px 0px",o&&(Wa(o,c,"xOrigin",d,w),Wa(o,c,"yOrigin",h,k),Wa(o,c,"xOffset",p,c.xOffset),Wa(o,c,"yOffset",_,c.yOffset)),t.setAttribute("data-svg-origin",w+" "+k)},as=function(t,e){var n=t._gsap||new ho(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,o,a,s,l,c,u,d,h,p,_,m,f,g,y,v,b,x,w,k,$,M,C,S,E,P,A,R,T,I,N,D=t.style,F=n.scaleX<0,B="px",z="deg",O=getComputedStyle(t),L=Da(t,Pa)||"0";return i=r=o=l=c=u=d=h=p=0,a=s=1,n.svg=!(!t.getCTM||!Ha(t)),O.translate&&("none"===O.translate&&"none"===O.scale&&"none"===O.rotate||(D[Ea]=("none"!==O.translate?"translate3d("+(O.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==O.rotate?"rotate("+O.rotate+") ":"")+("none"!==O.scale?"scale("+O.scale.split(" ").join(",")+") ":"")+("none"!==O[Ea]?O[Ea]:"")),D.scale=D.rotate=D.translate="none"),f=rs(t,n.svg),n.svg&&(n.uncache?(S=t.getBBox(),L=n.xOrigin-S.x+"px "+(n.yOrigin-S.y)+"px",C=""):C=!e&&t.getAttribute("data-svg-origin"),os(t,C||L,!!C||n.originIsAbsolute,!1!==n.smooth,f)),_=n.xOrigin||0,m=n.yOrigin||0,f!==ts&&(b=f[0],x=f[1],w=f[2],k=f[3],i=$=f[4],r=M=f[5],6===f.length?(a=Math.sqrt(b*b+x*x),s=Math.sqrt(k*k+w*w),l=b||x?ua(x,b)*la:0,(d=w||k?ua(w,k)*la+l:0)&&(s*=Math.abs(Math.cos(d*ca))),n.svg&&(i-=_-(_*b+m*w),r-=m-(_*x+m*k))):(N=f[6],T=f[7],P=f[8],A=f[9],R=f[10],I=f[11],i=f[12],r=f[13],o=f[14],c=(g=ua(N,R))*la,g&&(C=$*(y=Math.cos(-g))+P*(v=Math.sin(-g)),S=M*y+A*v,E=N*y+R*v,P=$*-v+P*y,A=M*-v+A*y,R=N*-v+R*y,I=T*-v+I*y,$=C,M=S,N=E),u=(g=ua(-w,R))*la,g&&(y=Math.cos(-g),I=k*(v=Math.sin(-g))+I*y,b=C=b*y-P*v,x=S=x*y-A*v,w=E=w*y-R*v),l=(g=ua(x,b))*la,g&&(C=b*(y=Math.cos(g))+x*(v=Math.sin(g)),S=$*y+M*v,x=x*y-b*v,M=M*y-$*v,b=C,$=S),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,u=180-u),a=Li(Math.sqrt(b*b+x*x+w*w)),s=Li(Math.sqrt(M*M+N*N)),g=ua($,M),d=Math.abs(g)>2e-4?g*la:0,p=I?1/(I<0?-I:I):0),n.svg&&(C=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!ns(Da(t,Ea)),C&&t.setAttribute("transform",C))),Math.abs(d)>90&&Math.abs(d)<270&&(F?(a*=-1,d+=l<=0?180:-180,l+=l<=0?180:-180):(s*=-1,d+=d<=0?180:-180)),e=e||n.uncache,n.x=i-((n.xPercent=i&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+B,n.y=r-((n.yPercent=r&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+B,n.z=o+B,n.scaleX=Li(a),n.scaleY=Li(s),n.rotation=Li(l)+z,n.rotationX=Li(c)+z,n.rotationY=Li(u)+z,n.skewX=d+z,n.skewY=h+z,n.transformPerspective=p+B,(n.zOrigin=parseFloat(L.split(" ")[2])||!e&&n.zOrigin||0)&&(D[Pa]=ss(L)),n.xOffset=n.yOffset=0,n.force3D=jn.force3D,n.renderTransform=n.svg?_s:aa?ps:cs,n.uncache=0,n},ss=function(t){return(t=t.split(" "))[0]+" "+t[1]},ls=function(t,e,n){var i=$r(e);return Li(parseFloat(e)+parseFloat(qa(t,"x",n+"px",i)))+i},cs=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,ps(t,e)},us="0deg",ds="0px",hs=") ",ps=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,o=n.x,a=n.y,s=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,d=n.skewX,h=n.skewY,p=n.scaleX,_=n.scaleY,m=n.transformPerspective,f=n.force3D,g=n.target,y=n.zOrigin,v="",b="auto"===f&&t&&1!==t||!0===f;if(y&&(u!==us||c!==us)){var x,w=parseFloat(c)*ca,k=Math.sin(w),$=Math.cos(w);w=parseFloat(u)*ca,x=Math.cos(w),o=ls(g,o,k*x*-y),a=ls(g,a,-Math.sin(w)*-y),s=ls(g,s,$*x*-y+y)}m!==ds&&(v+="perspective("+m+hs),(i||r)&&(v+="translate("+i+"%, "+r+"%) "),(b||o!==ds||a!==ds||s!==ds)&&(v+=s!==ds||b?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+hs),l!==us&&(v+="rotate("+l+hs),c!==us&&(v+="rotateY("+c+hs),u!==us&&(v+="rotateX("+u+hs),d===us&&h===us||(v+="skew("+d+", "+h+hs),1===p&&1===_||(v+="scale("+p+", "+_+hs),g.style[Ea]=v||"translate(0, 0)"},_s=function(t,e){var n,i,r,o,a,s=e||this,l=s.xPercent,c=s.yPercent,u=s.x,d=s.y,h=s.rotation,p=s.skewX,_=s.skewY,m=s.scaleX,f=s.scaleY,g=s.target,y=s.xOrigin,v=s.yOrigin,b=s.xOffset,x=s.yOffset,w=s.forceCSS,k=parseFloat(u),$=parseFloat(d);h=parseFloat(h),p=parseFloat(p),(_=parseFloat(_))&&(p+=_=parseFloat(_),h+=_),h||p?(h*=ca,p*=ca,n=Math.cos(h)*m,i=Math.sin(h)*m,r=Math.sin(h-p)*-f,o=Math.cos(h-p)*f,p&&(_*=ca,a=Math.tan(p-_),r*=a=Math.sqrt(1+a*a),o*=a,_&&(a=Math.tan(_),n*=a=Math.sqrt(1+a*a),i*=a)),n=Li(n),i=Li(i),r=Li(r),o=Li(o)):(n=m,o=f,i=r=0),(k&&!~(u+"").indexOf("px")||$&&!~(d+"").indexOf("px"))&&(k=qa(g,"x",u,"px"),$=qa(g,"y",d,"px")),(y||v||b||x)&&(k=Li(k+y-(y*n+v*r)+b),$=Li($+v-(y*i+v*o)+x)),(l||c)&&(a=g.getBBox(),k=Li(k+l/100*a.width),$=Li($+c/100*a.height)),a="matrix("+n+","+i+","+r+","+o+","+k+","+$+")",g.setAttribute("transform",a),w&&(g.style[Ea]=a)},ms=function(t,e,n,i,r){var o,a,s=360,l=Jn(r),c=parseFloat(r)*(l&&~r.indexOf("rad")?la:1)-i,u=i+c+"deg";return l&&("short"===(o=r.split("_")[1])&&(c%=s)!==c%180&&(c+=c<0?s:-360),"cw"===o&&c<0?c=(c+36e9)%s-~~(c/s)*s:"ccw"===o&&c>0&&(c=(c-36e9)%s-~~(c/s)*s)),t._pt=a=new Oo(t._pt,e,n,i,c,fa),a.e=u,a.u="deg",t._props.push(n),a},fs=function(t,e){for(var n in e)t[n]=e[n];return t},gs=function(t,e,n){var i,r,o,a,s,l,c,u=fs({},n._gsap),d=n.style;for(r in u.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),d[Ea]=e,i=as(n,1),ja(n,Ea),n.setAttribute("transform",o)):(o=getComputedStyle(n)[Ea],d[Ea]=e,i=as(n,1),d[Ea]=o),sa)(o=u[r])!==(a=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(s=$r(o)!==(c=$r(a))?qa(n,r,o,c):parseFloat(o),l=parseFloat(a),t._pt=new Oo(t._pt,i,r,s,l-s,ma),t._pt.u=c||0,t._props.push(r));fs(i,u)};Oi("padding,margin,Width,Radius",function(t,e){var n="Top",i="Right",r="Bottom",o="Left",a=(e<3?[n,i,r,o]:[n+o,n+i,r+i,r+o]).map(function(n){return e<2?t+n:"border"+n+t});Ja[e>1?"border"+t:t]=function(t,e,n,i,r){var o,s;if(arguments.length<4)return o=a.map(function(e){return Va(t,e,n)}),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(i+"").split(" "),s={},a.forEach(function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]}),t.init(e,s,r)}});var ys,vs,bs,xs={name:"css",register:za,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var o,a,s,l,c,u,d,h,p,_,m,f,g,y,v,b,x,w=this._props,k=t.style,$=n.vars.startAt;for(d in na||za(),this.styles=this.styles||Ia(t),b=this.styles.props,this.tween=n,e)if("autoRound"!==d&&(a=e[d],!Ri[d]||!vo(d,e,n,i,t,r)))if(c=typeof a,u=Ja[d],"function"===c&&(c=typeof(a=a.call(n,i,t,r))),"string"===c&&~a.indexOf("random(")&&(a=Fr(a)),u)u(this,t,d,a,n)&&(v=1);else if("--"===d.substr(0,2))o=(getComputedStyle(t).getPropertyValue(d)+"").trim(),a+="",Gr.lastIndex=0,Gr.test(o)||(h=$r(o),(p=$r(a))?h!==p&&(o=qa(t,d,o,p)+p):h&&(a+=h)),this.add(k,"setProperty",o,a,i,r,0,0,d),w.push(d),b.push(d,0,k[d]);else if("undefined"!==c){if($&&d in $?(o="function"==typeof $[d]?$[d].call(n,i,t,r):$[d],Jn(o)&&~o.indexOf("random(")&&(o=Fr(o)),$r(o+"")||"auto"===o||(o+=jn.units[d]||$r(Va(t,d))||""),"="===(o+"").charAt(1)&&(o=Va(t,d))):o=Va(t,d),l=parseFloat(o),(_="string"===c&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),s=parseFloat(a),d in _a&&("autoAlpha"===d&&(1===l&&"hidden"===Va(t,"visibility")&&s&&(l=0),b.push("visibility",0,k.visibility),Wa(this,k,"visibility",l?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==d&&"transform"!==d&&~(d=_a[d]).indexOf(",")&&(d=d.split(",")[0])),m=d in sa){if(this.styles.save(d),x=a,"string"===c&&"var(--"===a.substring(0,6)){if("calc("===(a=Da(t,a.substring(4,a.indexOf(")")))).substring(0,5)){var M=t.style.perspective;t.style.perspective=a,a=Da(t,"perspective"),M?t.style.perspective=M:ja(t,"perspective")}s=parseFloat(a)}if(f||((g=t._gsap).renderTransform&&!e.parseTransform||as(t,e.parseTransform),y=!1!==e.smoothOrigin&&g.smooth,(f=this._pt=new Oo(this._pt,k,Ea,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===d)this._pt=new Oo(this._pt,g,"scaleY",g.scaleY,(_?Hi(g.scaleY,_+s):s)-g.scaleY||0,ma),this._pt.u=0,w.push("scaleY",d),d+="X";else{if("transformOrigin"===d){b.push(Pa,0,k[Pa]),a=Ka(a),g.svg?os(t,a,0,y,0,this):((p=parseFloat(a.split(" ")[2])||0)!==g.zOrigin&&Wa(this,g,"zOrigin",g.zOrigin,p),Wa(this,k,d,ss(o),ss(a)));continue}if("svgOrigin"===d){os(t,a,1,y,0,this);continue}if(d in es){ms(this,g,d,l,_?Hi(l,_+a):a);continue}if("smoothOrigin"===d){Wa(this,g,"smooth",g.smooth,a);continue}if("force3D"===d){g[d]=a;continue}if("transform"===d){gs(this,a,t);continue}}}else d in k||(d=Ba(d)||d);if(m||(s||0===s)&&(l||0===l)&&!pa.test(a)&&d in k)s||(s=0),(h=(o+"").substr((l+"").length))!==(p=$r(a)||(d in jn.units?jn.units[d]:h))&&(l=qa(t,d,o,p)),this._pt=new Oo(this._pt,m?g:k,d,l,(_?Hi(l,_+s):s)-l,m||"px"!==p&&"zIndex"!==d||!1===e.autoRound?ma:va),this._pt.u=p||0,m&&x!==a?(this._pt.b=o,this._pt.e=x,this._pt.r=ya):h!==p&&"%"!==p&&(this._pt.b=o,this._pt.r=ga);else if(d in k)Ga.call(this,t,d,o,_?_+a:a);else if(d in t)this.add(t,d,o||t[d],_?_+a:a,i,r);else if("parseTransform"!==d){xi(d,a);continue}m||(d in k?b.push(d,0,k[d]):"function"==typeof t[d]?b.push(d,2,t[d]()):b.push(d,1,o||t[d])),w.push(d)}v&&zo(this)},render:function(t,e){if(e.tween._time||!oa())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:Va,aliases:_a,getSetter:function(t,e,n){var i=_a[e];return i&&i.indexOf(",")<0&&(e=i),e in sa&&e!==Pa&&(t._gsap.x||Va(t,"x"))?n&&ra===n?"scale"===e?Ma:$a:(ra=n||{})&&("scale"===e?Ca:Sa):t.style&&!ni(t.style[e])?wa:~e.indexOf("-")?ka:Ao(t,e)},core:{_removeProperty:ja,_getMatrix:rs}};Qo.utils.checkPrefix=Ba,Qo.core.getStyleSaver=Ia,bs=Oi((ys="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(vs="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){sa[t]=1}),Oi(vs,function(t){jn.units[t]="deg",es[t]=1}),_a[bs[13]]=ys+","+vs,Oi("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){var e=t.split(":");_a[e[1]]=bs[e[0]]}),Oi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){jn.units[t]="px"}),Qo.registerPlugin(xs);var ws=Qo.registerPlugin(xs)||Qo;ws.core.Tween;function ks(t,e){const n=t.replace(/^#/,"").match(/(.{2})/g);if(!n||3!==n.length)return`rgba(45, 45, 45, ${e})`;const[i,r,o]=n.map(t=>parseInt(t,16));return`rgba(${i},${r},${o},${e})`}function $s(t){return t<18?"#2196f3":t<24?"#ff9800":"#f44336"}function Ms(t){return.4+.6*Math.min(1,t/2500)}const Cs={};function Ss({icon:t,color:e,style:n,className:i}){const r=function(t){if(!t||"string"!=typeof t)return"circle";const e=t.match(/^mdi:(.+)$/i);return(e?e[1].trim():"circle")||"circle"}(t),[o,a]=He(Cs[r]??null),[s,l]=He(!1);We(()=>{if(Cs[r])return a(Cs[r]),void l(!1);l(!1);fetch(`https://cdn.jsdelivr.net/npm/@mdi/svg@7.4.47/svg/${r}.svg`).then(t=>t.ok?t.text():Promise.reject(new Error("Not found"))).then(t=>{let e=t.replace(/\b(width|height)="[^"]*"/g,"").replace(/\bfill="[^"]*"/g,'fill="currentColor"').replace(/<svg/,'<svg width="100%" height="100%" fill="currentColor" style="display:block"');e.includes("viewBox=")||(e=e.replace(/<svg/,'<svg viewBox="0 0 24 24"')),Cs[r]=e,a(e)}).catch(()=>l(!0))},[r]);const c={display:"inline-block",flexShrink:0,verticalAlign:"middle",lineHeight:0,...e?{color:e}:{},...n};return Se("span",s||!o?{className:i,style:{...c,background:"var(--divider-color)",borderRadius:"50%"},"aria-hidden":!0}:{className:i,style:c,dangerouslySetInnerHTML:{__html:o},"aria-hidden":!0})}function Es(t,e){const n=Number(t);return Number.isFinite(n)?n:e}function Ps(t){const{ent:e,hass:n,host:i,tapAction:r,holdAction:o,doubleTapAction:a,displayPosition:s,onRoomPressStart:l,onRoomPressEnd:c,onBadgeHoverStart:u,onBadgeHoverEnd:d}=t,h=s?Math.min(100,Math.max(0,s.x)):Math.min(100,Math.max(0,$t(e,"x")??Es(e.x,50))),p=s?Math.min(100,Math.max(0,s.y)):Math.min(100,Math.max(0,$t(e,"y")??Es(e.y,50))),_=Math.min(2,Math.max(.3,Es(e.scale,1))),m="on"===n?.states?.[e.entity]?.state,f=(e.icon||Nt(n,e.entity),function(t,e){const n=t?.states?.[e];if(!n)return"—";const i=n.attributes?.unit_of_measurement;return i?`${n.state} ${i}`:n.state}(n,e.entity)),g=Dt(n,e.entity),y=`${g}: ${f}`,v=(Math.min(1,Math.max(0,Es(e.background_opacity,1))),e.preset??"default"),b=n?.states?.[e.entity]?.state??"";let x,w,k,$,M,C=!!e.show_value,S=e.icon||Nt(n,e.entity);if("temperature"===v){if(C=!0,w=Ft(n,e.entity,e.temperature_attribute),x=$s(w),e.entity.startsWith("climate.")){const{icon:t,color:e}=function(t){const e=t.toLowerCase();return"heat"===e||"heating"===e?{icon:"mdi:fire",color:"#ff9800"}:"cool"===e||"cooling"===e?{icon:"mdi:snowflake",color:"#2196f3"}:"auto"===e||"heat_cool"===e?{icon:"mdi:autorenew",color:"#009688"}:"dry"===e?{icon:"mdi:water-percent",color:"#00bcd4"}:"fan_only"===e||"fan"===e?{icon:"mdi:fan",color:"#607d8b"}:"off"===e||"idle"===e||"unknown"===e?{icon:"mdi:power",color:"var(--secondary-text-color, #9e9e9e)"}:{icon:"mdi:thermostat",color:"var(--primary-text-color, #212121)"}}(b);$=t,M=e}}else if("binary_sensor"===v){C=!0;["on","open","detected","home","present","opening"].includes(String(b).toLowerCase())?(x="var(--state-icon-active-color, var(--state-icon-on-color, #4caf50))",S="mdi:circle",k=x):(x=void 0,S="mdi:circle-outline",k="var(--secondary-text-color)")}else if("window_contact"===v){S=e.icon||"mdi:window-open";k=["on","open","opening"].includes(String(b).toLowerCase())?"var(--error-color, #f44336)":"var(--primary-text-color)"}else if("smoke_detector"===v){S=e.icon||"mdi:smoke-detector";["triggered","smoke","alarm","sabotage","tampered","on"].includes(String(b).toLowerCase())&&(k="var(--error-color, #db4437)")}else if("sliding_door"===v){S=e.icon||"mdi:door-sliding";k=["on","open","opening"].includes(String(b).toLowerCase())?"var(--state-icon-active-color, #4caf50)":"var(--primary-text-color)"}else e.color?x=e.color:m&&(x="var(--state-icon-active-color, var(--state-icon-on-color, #ffc107))");const E={entity:e.entity,tap_action:r,hold_action:o,double_tap_action:a},P=Mt(e),A=()=>{"temperature"===e.preset&&c&&c()},R=()=>{"temperature"===e.preset&&l&&l(e.entity,P)},T=()=>{"temperature"===e.preset&&c&&c()},I={position:"absolute",left:`${h}%`,top:`${p}%`,transform:"translate(-50%, -50%)",display:"inline-flex",alignItems:"center",gap:"0.4em",padding:"0.35em 0.75em",minHeight:"max(2.25em, 28px)",minWidth:"max(2em, 24px)",borderRadius:"1em",border:"1px solid var(--divider-color)",background:"#fff",color:"var(--primary-text-color, #212121)",fontSize:`calc(${_} * clamp(0.7rem, 0.8125rem + 0.3vw, 0.9375rem))`,fontWeight:600,fontFamily:"inherit",cursor:"pointer",boxShadow:"0 1px 3px rgba(0,0,0,0.12)",transition:"box-shadow 0.2s",maxWidth:"min(90vw, 22em)",boxSizing:"border-box",visibility:"visible",opacity:1},N=e.color??k??x??(m?"var(--state-icon-active-color, var(--state-icon-on-color))":"var(--primary-text-color)"),D="temperature"===v&&null!=w?`${w} °C`:f,F="temperature"!==v,B="temperature"===v&&null!=$,z="temperature"===v&&x?x:void 0,O="window_contact"===v||"smoke_detector"===v||"sliding_door"===v||!1===e.show_name,L="smoke_detector"===v&&["triggered","smoke","alarm","sabotage","tampered","on"].includes(String(b).toLowerCase()),U=Xe(null);return We(()=>{const t=U.current;if(!t||!L)return void(t&&ws.set(t,{clearProps:"boxShadow,borderColor"}));const e=ws.fromTo(t,{boxShadow:"0 0 0 0 rgba(219, 68, 55, 0.6)",borderColor:"var(--error-color, #db4437)"},{boxShadow:"0 0 0 8px rgba(219, 68, 55, 0)",borderColor:"rgba(219, 68, 55, 0.5)",duration:.6,repeat:-1,yoyo:!0,ease:"power2.inOut"});return()=>{e.kill(),ws.set(t,{clearProps:"boxShadow,borderColor"})}},[L]),Se("div",{ref:U,className:"entity-badge-chip","data-no-pan":!0,style:{...I,background:"#fff",...O?{padding:"0.5em 0.85em",minWidth:"2.75em",minHeight:"2.75em",borderRadius:9999}:{}},title:y,role:"button",tabIndex:0,onClick:()=>bt(i,n,E,"tap"),onPointerDown:()=>{"temperature"===e.preset&&l&&l(e.entity,P)},onPointerUp:A,onPointerLeave:()=>{A(),T(),d?.()},onPointerEnter:()=>{R(),u?.()},onDblClick:()=>xt(a)&&bt(i,n,E,"double_tap"),onContextMenu:t=>{t.preventDefault(),xt(o)&&bt(i,n,E,"hold")},onMouseEnter:t=>{t.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.18)",R(),u?.()},onMouseLeave:t=>{t.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.12)",T(),d?.()},children:[F&&Se("span",O?{style:{position:"absolute",inset:0,display:"grid",placeItems:"center",pointerEvents:"none"},children:Se("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",color:N},children:Se(Ss,{icon:S,color:N,style:{width:"1.35em",height:"1.35em",minWidth:"1.35em",minHeight:"1.35em"}})})}:{style:{display:"inline-flex",alignItems:"center",color:N},children:Se(Ss,{icon:S,color:N,style:{width:"1.15em",height:"1.15em",minWidth:"1.15em",minHeight:"1.15em"}})}),!O&&Se("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.35em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:0,...z?{color:z}:{}},children:[B&&null!=$&&null!=M&&Se("span",{style:{display:"inline-flex",flexShrink:0,color:M},title:b,children:Se(Ss,{icon:$,color:M,style:{width:"1.15em",height:"1.15em",minWidth:"1.15em",minHeight:"1.15em"}})}),"temperature"===v?D:C?f:g]})]})}function As({zone:t,hass:e,dimmed:n=!1}){const i=Math.min(1,Math.max(0,Number(t.opacity)??.4)),r=$s(Ft(e,t.entity,t.temperature_attribute)),o=e?.states?.[t.entity]?.state;if(function(t){return Array.isArray(t.points)&&t.points.length>=3}(t)){const e=t.points.map(t=>({x:Math.min(100,Math.max(0,t.x)),y:Math.min(100,Math.max(0,t.y))})),a=e.reduce((t,e)=>t+e.x,0)/e.length,s=e.reduce((t,e)=>t+e.y,0)/e.length;let l=0;for(const t of e){const e=Math.hypot(t.x-a,t.y-s);e>l&&(l=e)}l=Math.max(l,1);const c=`radial-gradient(ellipse ${2*l}% ${2*l}% at ${a}% ${s}%, transparent 0%, ${ks(r,i*Ms(4*l*l))} 100%)`,u=e.map(t=>`${t.x}% ${t.y}%`).join(", ");return Se("div",{className:"absolute pointer-events-none z-0 rounded-none",style:{left:0,top:0,width:"100%",height:"100%",opacity:n?0:1,transition:"opacity 0.28s ease-in-out",background:c,clipPath:`polygon(${u})`},title:`${t.entity}: ${o??"?"}`})}const a=Math.min(100,Math.max(0,Number(t.x1)??0)),s=Math.min(100,Math.max(0,Number(t.y1)??0)),l=Math.min(100,Math.max(0,Number(t.x2)??100)),c=Math.min(100,Math.max(0,Number(t.y2)??100)),u=Math.min(a,l),d=Math.min(s,c),h=Math.abs(l-a)||1,p=Math.abs(c-s)||1;return Se("div",{className:"absolute pointer-events-none z-0 rounded-none",style:{left:`${u}%`,top:`${d}%`,width:`${h}%`,height:`${p}%`,opacity:n?0:1,transition:"opacity 0.28s ease-in-out",background:`radial-gradient(ellipse 100% 100% at 50% 50%, transparent 0%, ${ks(r,i*Ms(h*p))} 100%)`},title:`${t.entity}: ${o??"?"}`})}function Rs({br:t,isOpen:e,direction:n,doorColor:i,thickness:r,opacity:o}){const a=e?1:0,[s,l]=He(a),c=Xe(s);c.current=s;const u=Xe(0),d=Xe({t:0,time:0});We(()=>{const t=c.current;if(t===a)return;d.current={t,time:performance.now()};const e=t,n=t=>{const i=t-d.current.time,r=Math.min(1,i/350),o=r<.5?2*r*r:1-Math.pow(-2*r+2,2)/2;l(e+(a-e)*o),r<1&&(u.current=requestAnimationFrame(n))};return u.current=requestAnimationFrame(n),()=>cancelAnimationFrame(u.current)},[a]);const h="double"===n?"left":n,p="double"!==n&&function(t,e,n,i,r,o){const a=n-t,s=i-e,l=Math.hypot(a,s)||1,c=a/l,u=s/l,d=l/2,h=Math.max(.06*l,.5),p=h+(d-h)*(1-r);return"right"===o?{outerX:n,outerY:i,innerX:n-p*c,innerY:i-p*u}:{outerX:t,outerY:e,innerX:t+p*c,innerY:e+p*u}}(t.x1,t.y1,t.x2,t.y2,s,h),_="double"===n&&function(t,e,n,i,r){const o=n-t,a=i-e,s=Math.hypot(o,a)||1,l=o/s,c=a/s,u=s/2,d=Math.max(.06*s,.5),h=d+(u-d)*(1-r);return{left:{outerX:t,outerY:e,innerX:t+h*l,innerY:e+h*c},right:{outerX:n,outerY:i,innerX:n-h*l,innerY:i-h*c}}}(t.x1,t.y1,t.x2,t.y2,s),m=t=>Se("line",{x1:t.outerX,y1:t.outerY,x2:t.innerX,y2:t.innerY,stroke:i,strokeWidth:r,strokeLinecap:"butt",strokeOpacity:o});return"double"===n&&_?Se(oe,{children:[m(_.left),m(_.right)]}):"double"!==n&&p?m(p):null}function Ts(t){if("points"in t&&Array.isArray(t.points)&&t.points.length>=3)return t.points;const e=t,n=Math.min(100,Math.max(0,Number(e.x1)??0)),i=Math.min(100,Math.max(0,Number(e.y1)??0)),r=Math.min(100,Math.max(0,Number(e.x2)??100)),o=Math.min(100,Math.max(0,Number(e.y2)??100)),a=Math.min(n,r),s=Math.min(i,o),l=Math.max(n,r),c=Math.max(i,o);return[{x:a,y:s},{x:l,y:s},{x:l,y:c},{x:a,y:c}]}function Is({entityId:t,zones:e,hass:n,dimmed:i,overlayBoxStyle:r}){const o=Ft(n,t,e[0]?.temperature_attribute),a=n?.states?.[t]?.state,s=$s(o),l=Math.min(1,Math.max(0,Number(e[0]?.opacity)??.4));let c=100,u=100,d=0,h=0;for(const t of e)for(const e of Ts(t))c=Math.min(c,e.x),u=Math.min(u,e.y),d=Math.max(d,e.x),h=Math.max(h,e.y);const p=(c+d)/2,_=(u+h)/2;let m=0;for(const t of e)for(const e of Ts(t)){const t=Math.hypot(e.x-p,e.y-_);t>m&&(m=t)}m=Math.max(m,1);const f=ks(s,l*Ms(4*m*m)),g=`heat-${t.replace(/\./g,"-")}`;return Se("div",{style:{...r,opacity:i?0:1,transition:"opacity 0.28s ease-in-out"},title:`${t}: ${a??"?"}`,children:Se("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none"},"aria-hidden":!0,children:[Se("defs",{children:Se("radialGradient",{id:g,gradientUnits:"userSpaceOnUse",cx:p,cy:_,r:m,children:[Se("stop",{offset:"0%",stopColor:"transparent"}),Se("stop",{offset:"100%",stopColor:f})]})}),e.map((t,e)=>{const n=Ts(t).map((t,e)=>`${0===e?"M":"L"} ${t.x} ${t.y}`).join(" ")+" Z";return Se("path",{d:n,fill:`url(#${g})`},e)})]})})}function Ns(t){return t.replace(/<svg(\s[^>]*)?>/i,t=>t+"<defs><style>text,tspan{font-family:sans-serif !important}</style></defs>")}function Ds(t){const{config:e,flattenedEntities:n,hass:i,host:r,allTabIds:o,selectedTabs:a,showHeatmapOverlay:s=!0,imageAspect:l,imageLoaded:c,imageError:u,onImageLoad:d,onImageError:h}=t,p="string"==typeof e.image?e.image:e?.image?.location??"",_=void 0!==e.dark_mode?!!e.dark_mode:"undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").matches,m=_?e.dark_mode_filter??"brightness(0.88) contrast(1.05)":"none",f=_&&e.image_dark?e.image_dark:p,[g,y]=He(f),v=Xe(null),[b,x]=He([]),[w,k]=He(null),[$,M]=He(null),[C,S]=He({x:0,y:0}),[E,P]=He(1),[A,R]=He(!1),T=Xe(null),I=Xe(null),N=Xe(null),D=Xe(C),F=Xe(E);D.current=C,F.current=E;const B=()=>{k(null);const t=I.current;t?(ws.killTweensOf(t),ws.to(t,{opacity:0,duration:.28,ease:"power2.inOut",onComplete:()=>x([])})):x([])};We(()=>{if(0===b.length)return;const t=I.current;return t?(ws.killTweensOf(t),ws.set(t,{opacity:0}),ws.to(t,{opacity:1,duration:.28,ease:"power2.inOut"}),()=>ws.killTweensOf(t)):void 0},[b]),We(()=>{if(!f||"undefined"==typeof window)return void y(f);const t=f.toLowerCase().includes(".svg")||f.toLowerCase().startsWith("data:image/svg");let e=!1;try{e=new URL(f,window.location.href).origin===window.location.origin}catch{e=f.startsWith("/")||f.startsWith("./")}if(!t||!e)return void y(f);const n=()=>{v.current&&(URL.revokeObjectURL(v.current),v.current=null)},i=f.startsWith("data:")?f:f.startsWith("/")?`${window.location.origin}${f}`:f;if(f.startsWith("data:")){try{const t=f.split(",")[1];if(t){n();const e=Ns(atob(t)),i=new Blob([e],{type:"image/svg+xml"}),r=URL.createObjectURL(i);v.current=r,y(r)}else y(f)}catch{y(f)}return n}return n(),fetch(i).then(t=>t.text()).then(t=>{n();const e=Ns(t),i=new Blob([e],{type:"image/svg+xml"}),r=URL.createObjectURL(i);v.current=r,y(r)}).catch(()=>y(f)),n},[f]);const z=Number(e.rotation)??0,O=Ct(e),L=O.length>0,U=Number(e.plan_offset_x)||0,H=Number(e.plan_offset_y)||0,j=n,W=(j.map(t=>t.entity),0===o.length?j:0===a.size?[]:j.filter(t=>a.has(At(t.entity)))),X=W.filter(t=>"window_contact"!==t.entity.preset),Y=W.filter(t=>"window_contact"===t.entity.preset&&Mt(t.entity).length>0),q=W.filter(t=>"sliding_door"===t.entity.preset&&Mt(t.entity).length>0),V=[];for(const{entity:t,roomIndex:n}of j){if("temperature"!==t.preset)continue;const i=Tt(e,n,t),r=t.temperature_attribute;for(const e of i)if(wt(e))V.push({entity:t.entity,points:e.points,opacity:e.opacity??.4,temperature_attribute:r});else{const n=e;V.push({entity:t.entity,x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,opacity:n.opacity??.4,temperature_attribute:r})}}const G=e?.tap_action??{action:"more-info"},Z=t=>{0===t.button&&(T.current=null,R(!1),N.current?.releasePointerCapture?.(t.pointerId))},K=t=>{t.preventDefault();const e=N.current;if(!e)return;const n=e.getBoundingClientRect(),i=t.clientX-n.left-n.width/2,r=t.clientY-n.top-n.height/2,o=F.current,a=D.current,s=t.deltaY>0?.9:1.1,l=Math.min(3,Math.max(.5,o*s)),c=l/o;S({x:a.x*c+i*(1-c),y:a.y*c+r*(1-c)}),P(l)};We(()=>{const t=N.current;if(t)return t.addEventListener("wheel",K,{passive:!1}),()=>t.removeEventListener("wheel",K)},[]);const Q=qe(()=>{if(!L||0===O.length)return;const t=N.current;if(!t)return;const e=t.getBoundingClientRect(),n=e.width,i=e.height;if(n<=0||i<=0)return;let r=100,o=100,a=0,s=0;for(const t of O){const e=(Number(t.x)??0)+U,n=(Number(t.y)??0)+H,i=Number(t.width)??20,l=Number(t.aspect_ratio)>0?t.aspect_ratio:null,c=null!=l?i/l:Number(t.height)??20;r=Math.min(r,e),o=Math.min(o,n),a=Math.max(a,e+i),s=Math.max(s,n+c)}const l=a-r,c=s-o;if(l<=0||c<=0)return;const u=Math.min(3,100/l,100/c),d=(r+a)/2,h=(o+s)/2;P(u),S({x:n*u*(.5-d/100),y:i*u*(.5-h/100)})},[L,O,U,H]),J=qe(()=>{Q();const t=requestAnimationFrame(()=>{requestAnimationFrame(Q)});return()=>cancelAnimationFrame(t)},[Q]);We(()=>{if(!L||0===O.length)return;const t=requestAnimationFrame(()=>{J()});return()=>cancelAnimationFrame(t)},[L,J]);const tt={width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",padding:0,border:"1px solid var(--divider-color)",borderRadius:6,background:"var(--secondary-background-color, rgba(0,0,0,0.05))",color:"var(--primary-text-color)",fontSize:"1.1rem",fontWeight:600,cursor:"pointer",lineHeight:1},et={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",margin:"0",padding:"0",boxSizing:"border-box"};return Se("div",{className:"flex-1 min-h-0 overflow-hidden w-full min-w-0",style:{transform:`rotate(${z}deg)`,minHeight:280,width:"100%",minWidth:0,position:"relative"},children:Se("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",background:"var(--ha-card-background)",boxSizing:"border-box",containerType:"size"},children:[Se("div",{ref:N,style:{...L?{position:"relative",width:"min(100cqw, 100cqh)",height:"min(100cqw, 100cqh)",flexShrink:0,overflow:"hidden",boxSizing:"border-box"}:{position:"relative",width:`min(100cqw, 100cqh * ${l})`,height:`min(100cqh, 100cqw / ${l})`,maxWidth:"100%",maxHeight:"100%",flexShrink:0,overflow:"hidden",background:"var(--ha-card-background)",boxSizing:"border-box"},transform:`translate(${C.x}px, ${C.y}px) scale(${E})`,transformOrigin:"50% 50%",touchAction:"none",cursor:A?"grabbing":"grab"},onPointerDown:t=>{0===t.button&&(t.target.closest?.("[data-no-pan]")||(T.current={clientX:t.clientX,clientY:t.clientY,panX:C.x,panY:C.y},R(!0),N.current?.setPointerCapture?.(t.pointerId)))},onPointerMove:t=>{T.current&&S({x:T.current.panX+t.clientX-T.current.clientX,y:T.current.panY+t.clientY-T.current.clientY})},onPointerUp:Z,onPointerLeave:Z,children:[!L&&Se(oe,{children:[Se("img",{src:g,alt:"Raumplan",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",objectFit:"contain",objectPosition:"center",filter:m,display:"block"},onLoad:d,onError:h}),!c&&!u&&Se("div",{style:{...et,background:"var(--ha-card-background)"},"aria-hidden":!0}),u&&Se("div",{style:{...et,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--ha-card-background)",color:"var(--secondary-text-color)",fontSize:"0.875rem"},children:"Bild konnte nicht geladen werden"})]}),L&&O.map((t,e)=>{const n=Math.max(.25,Math.min(3,Number(t.scale)??1)),i=Number(t.width)??20,r=Number(t.aspect_ratio)>0?t.aspect_ratio:null,o=null!=r?i/r:Number(t.height)??20;return Se("div",{style:{position:"absolute",left:`${(Number(t.x)??0)+U}%`,top:`${(Number(t.y)??0)+H}%`,width:`${i}%`,height:`${o}%`,overflow:"hidden",boxSizing:"border-box",pointerEvents:"none",transform:`scale(${n}) rotate(${Number(t.rotation)??0}deg)`,transformOrigin:"50% 50%",background:"transparent"},children:Se("img",{src:"string"==typeof t.image?t.image:"",alt:t.name??`Gebäude ${e+1}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",objectFit:null!=r?"fill":"contain",objectPosition:"center",display:"block"}})},e)}),!L&&V.length>0&&a.has("temperature")&&s&&(()=>{const t=new Map;for(const e of V){const n=t.get(e.entity)??[];n.push(e),t.set(e.entity,n)}return Se("div",{style:{...et,pointerEvents:"none"},children:Array.from(t.entries()).map(([t,e])=>1===e.length?Se(As,{zone:e[0],hass:i,dimmed:w===t},t):Se(Is,{entityId:t,zones:e,hass:i,dimmed:w===t,overlayBoxStyle:et},t))})})(),!L&&Se("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none"},children:[b.length>0&&Se("div",{ref:I,style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",opacity:0},"aria-hidden":!0,children:(()=>{const t=b;let e=100,n=100,i=0,r=0;for(const o of t)for(const t of kt(o))e=Math.min(e,t.x),n=Math.min(n,t.y),i=Math.max(i,t.x),r=Math.max(r,t.y);const o=(e+i)/2,a=(n+r)/2;let s=0;for(const e of t)for(const t of kt(e)){const e=Math.hypot(t.x-o,t.y-a);e>s&&(s=e)}s=Math.max(s,1);const l=.45*Ms(4*s*s);return Se("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{position:"absolute",left:0,top:0,width:"100%",height:"100%"},children:[Se("defs",{children:Se("radialGradient",{id:"dim-gradient",gradientUnits:"userSpaceOnUse",cx:o,cy:a,r:s,children:[Se("stop",{offset:"0%",stopColor:"transparent"}),Se("stop",{offset:"100%",stopColor:`rgba(0,0,0,${l})`})]})}),t.map((t,e)=>{const n=kt(t).map((t,e)=>`${0===e?"M":"L"} ${t.x} ${t.y}`).join(" ")+" Z";return Se("path",{d:n,fill:"url(#dim-gradient)"},e)})]})})()}),Y.length>0&&Se("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{...et,pointerEvents:"none"},"aria-hidden":!0,children:Y.flatMap(t=>{const n=t.entity,o=i?.states?.[n.entity]?.state??"",a=["on","open","opening"].includes(String(o).toLowerCase())?n.line_color_open??"var(--error-color, #f44336)":n.line_color_closed??"var(--secondary-text-color, #9e9e9e)",s=Math.min(3,Math.max(.2,Number(n.line_thickness)??1)),l=Math.min(1,Math.max(0,Number(n.background_opacity)??1)),c={entity:n.entity,tap_action:n.tap_action??e?.tap_action??G,hold_action:n.hold_action??e?.hold_action,double_tap_action:n.double_tap_action??e?.double_tap_action};return Mt(n).filter(t=>!wt(t)).map((t,e)=>{const o=t;return Se("g",{"data-no-pan":!0,style:{pointerEvents:"auto",cursor:"pointer"},onClick:()=>bt(r,i,c,"tap"),onPointerDown:t=>t.stopPropagation(),children:[Se("line",{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2,stroke:"transparent",strokeWidth:10,strokeLinecap:"butt"}),Se("line",{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2,stroke:a,strokeWidth:s,strokeLinecap:"butt",strokeOpacity:l})]},`${n.entity}-${e}`)})})}),q.length>0&&Se("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{...et,pointerEvents:"none"},"aria-hidden":!0,children:q.flatMap(t=>{const n=t.entity,o=i?.states?.[n.entity]?.state??"",a=["on","open","opening"].includes(String(o).toLowerCase()),s=n.line_color_closed??"var(--secondary-text-color, #9e9e9e)",l=n.line_color_open??"var(--primary-color, #03a9f4)",c=Math.min(3,Math.max(.2,Number(n.line_thickness)??1)),u=Math.min(3,Math.max(.2,Number(n.sliding_door_door_thickness)??c)),d=Math.min(1,Math.max(0,Number(n.background_opacity)??1)),h=n.sliding_door_direction??"left",p={entity:n.entity,tap_action:n.tap_action??e?.tap_action??G,hold_action:n.hold_action??e?.hold_action,double_tap_action:n.double_tap_action??e?.double_tap_action};return Mt(n).filter(t=>!wt(t)).map((t,e)=>{const o=t;return Se("g",{"data-no-pan":!0,style:{pointerEvents:"auto",cursor:"pointer"},onClick:()=>bt(r,i,p,"tap"),onPointerDown:t=>t.stopPropagation(),children:[Se("line",{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2,stroke:s,strokeWidth:c,strokeLinecap:"butt",strokeOpacity:d}),Se(Rs,{br:o,isOpen:$!==n.entity&&a,direction:h,doorColor:l,thickness:u,opacity:d})]},`sliding-${n.entity}-${e}`)})})}),Se("div",{style:{...et,pointerEvents:"none",isolation:"isolate",visibility:"visible"},children:Se("div",{style:{...et,pointerEvents:"auto",visibility:"visible",minWidth:"100%",minHeight:"100%",overflow:"hidden",isolation:"isolate"},children:X.map(t=>{const n=t.entity,o=Tt(e,t.roomIndex,n),a=o.length>0,s="sliding_door"===n.preset?(()=>{const t=$t(n,"x"),e=$t(n,"y");if(null!=t&&null!=e&&Number.isFinite(Number(t))&&Number.isFinite(Number(e)))return{x:Math.min(100,Math.max(0,Number(t))),y:Math.min(100,Math.max(0,Number(e)))};const i=Mt(n).filter(t=>!wt(t)),r=i[0];return r&&null!=r.x1&&null!=r.y1&&null!=r.x2&&null!=r.y2?{x:Math.min(100,Math.max(0,(r.x1+r.x2)/2)),y:Math.min(100,Math.max(0,(r.y1+r.y2)/2))}:{x:50,y:50}})():function(t,e){const n=$t(e,"x")??50,i=$t(e,"y")??50;return{x:Math.min(100,Math.max(0,n)),y:Math.min(100,Math.max(0,i))}}(t.room,n);return Se(Ps,{ent:n,hass:i,host:r,displayPosition:s,tapAction:n.tap_action??e?.tap_action??G,holdAction:n.hold_action??e?.hold_action,doubleTapAction:n.double_tap_action??e?.double_tap_action,onRoomPressStart:"temperature"===n.preset&&a?(t,e)=>{return i=n.entity,r=o,ws.killTweensOf(I.current),k(i),void x(r.length?r:[]);var i,r}:void 0,onRoomPressEnd:"temperature"===n.preset&&a?B:void 0,onBadgeHoverStart:"sliding_door"===n.preset?()=>M(n.entity):void 0,onBadgeHoverEnd:"sliding_door"===n.preset?()=>M(null):void 0},t.uniqueKey)})})})]})]}),Se("div",{"data-no-pan":!0,style:{position:"absolute",bottom:10,right:10,display:"flex",alignItems:"center",gap:4,padding:4,borderRadius:8,background:"var(--ha-card-background)",border:"1px solid var(--divider-color)",boxShadow:"0 2px 8px rgba(0,0,0,0.12)",zIndex:10},children:[Se("button",{type:"button",onClick:()=>P(t=>Math.min(3,1.2*t)),style:tt,title:"Vergrößern",children:"+"}),Se("button",{type:"button",onClick:()=>P(t=>Math.max(.5,t/1.2)),style:tt,title:"Verkleinern",children:"−"}),Se("button",{type:"button",onClick:()=>{L?J():(S({x:0,y:0}),P(1))},style:tt,title:"Ansicht zurücksetzen",children:"⟲"})]})]})})}function Fs({hass:t,config:e,host:n,cssString:i}){const r=Ye(()=>function(t){const e=Ct(t);if(e.length>0){let t=0;const n=[];for(let i=0;i<e.length;i++){const r=e[i].rooms??[];for(let e=0;e<r.length;e++){const o=r[e];for(let r=0;r<(o.entities??[]).length;r++)n.push({entity:o.entities[r],roomIndex:t,entityIndexInRoom:r,buildingIndex:i,room:o,uniqueKey:`building-${i}-room-${e}-ent-${r}`});t++}}if(n.length>0)return n}const n=St(t);if(n.length>0){const t=n.flatMap((t,e)=>(t.entities??[]).map((n,i)=>({entity:n,roomIndex:e,entityIndexInRoom:i,buildingIndex:null,room:t,uniqueKey:`room-${e}-ent-${i}`})));if(t.length>0)return t}return t&&Array.isArray(t.entities)?t.entities.map((t,e)=>({entity:t,roomIndex:null,entityIndexInRoom:e,buildingIndex:null,room:null,uniqueKey:`legacy-ent-${e}`})):[]}(e),[e]),{allTabIds:o,categoryLabels:a}=Ye(()=>{const t=Pt(e),n=t.map(t=>t.id),i={};for(const e of t)i[e.id]=e.label;return{allTabIds:n,categoryLabels:i}},[e]),[s,l]=He(new Set),c=Xe(!1);We(()=>{0!==o.length&&(c.current||(c.current=!0,l(new Set(o))))},[o]),We(()=>{c.current=!1},[e]);const u=qe(t=>{l(null===t?t=>t.size===o.length?new Set:new Set(o):e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})},[o]),[d,h]=He(16/9),[p,_]=He(!1),[m,f]=He(!1),[g,y]=He(!0),v=Ye(()=>r.some(t=>"temperature"===t.entity.preset&&Tt(e,t.roomIndex,t.entity).length>0),[e,r]),b=s.has("temperature"),x=qe(t=>{const e=t.target;e?.naturalWidth&&e?.naturalHeight&&h(e.naturalWidth/e.naturalHeight),_(!0),f(!1)},[]),w=qe(()=>{f(!0),_(!1)},[]),k="string"==typeof e.image?e.image:e?.image?.location??"",$=Ct(e).length>0;return Se("ha-card",k||$?{class:e?.full_height?"full-height":"",children:[Se("style",{dangerouslySetInnerHTML:{__html:i}}),Se("div",{className:"flex flex-col p-0 overflow-hidden w-full h-full min-h-0 min-w-0 flex-1",style:{flex:"1 1 0",minHeight:200,minWidth:0,position:"relative"},children:[Se(Pn,{config:e,hass:t,allTabIds:o,categoryLabels:a,selectedTabs:s,onSelectTab:u,host:n}),Se("div",{style:{position:"relative",flex:"1 1 0",minHeight:0,minWidth:0,display:"flex",flexDirection:"column"},children:[Se("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,pointerEvents:"none",backgroundImage:"radial-gradient(circle, var(--secondary-text-color, rgba(0,0,0,0.08)) 1px, transparent 1px)",backgroundSize:"12px 12px",backgroundPosition:"0 0"}}),Se(Ds,{config:e,flattenedEntities:r,hass:t,host:n,allTabIds:o,selectedTabs:s,showHeatmapOverlay:g,imageAspect:d,imageLoaded:p,imageError:m,onImageLoad:x,onImageError:w})]}),v&&b&&Se("div",{style:{position:"absolute",bottom:52,right:10,padding:"8px 12px",borderRadius:8,background:"var(--ha-card-background)",border:"1px solid var(--divider-color)",boxShadow:"0 2px 8px rgba(0,0,0,0.12)",pointerEvents:"auto"},children:Se("label",{style:{fontSize:"0.8125rem",color:"var(--secondary-text-color)",cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",gap:6},children:[Se("input",{type:"checkbox",checked:g,onChange:t=>y(t.target.checked),style:{margin:0}}),"Heatmap"]})})]})]}:{children:[Se("style",{dangerouslySetInnerHTML:{__html:i}}),Se("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[Se("ha-icon",{icon:"mdi:floor-plan",class:"text-[var(--primary-color)] mb-4"}),Se("p",{className:"text-[var(--secondary-text-color)]",children:"Bitte konfigurieren"})]})]})}const Bs='/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */\n@layer properties;\n@layer theme, base, components, utilities;\n@layer theme {\n  :root, :host {\n    --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",\n      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",\n      "Courier New", monospace;\n    --color-white: #fff;\n    --spacing: 0.25rem;\n    --text-xs: 0.75rem;\n    --text-xs--line-height: calc(1 / 0.75);\n    --text-sm: 0.875rem;\n    --text-sm--line-height: calc(1.25 / 0.875);\n    --font-weight-medium: 500;\n    --font-weight-semibold: 600;\n    --leading-tight: 1.25;\n    --radius-2xl: 1rem;\n    --ease-out: cubic-bezier(0, 0, 0.2, 1);\n    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);\n    --default-transition-duration: 150ms;\n    --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n    --default-font-family: var(--font-sans);\n    --default-mono-font-family: var(--font-mono);\n  }\n}\n@layer base {\n  *, ::after, ::before, ::backdrop, ::file-selector-button {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    border: 0 solid;\n  }\n  html, :host {\n    line-height: 1.5;\n    -webkit-text-size-adjust: 100%;\n    tab-size: 4;\n    font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");\n    font-feature-settings: var(--default-font-feature-settings, normal);\n    font-variation-settings: var(--default-font-variation-settings, normal);\n    -webkit-tap-highlight-color: transparent;\n  }\n  hr {\n    height: 0;\n    color: inherit;\n    border-top-width: 1px;\n  }\n  abbr:where([title]) {\n    -webkit-text-decoration: underline dotted;\n    text-decoration: underline dotted;\n  }\n  h1, h2, h3, h4, h5, h6 {\n    font-size: inherit;\n    font-weight: inherit;\n  }\n  a {\n    color: inherit;\n    -webkit-text-decoration: inherit;\n    text-decoration: inherit;\n  }\n  b, strong {\n    font-weight: bolder;\n  }\n  code, kbd, samp, pre {\n    font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);\n    font-feature-settings: var(--default-mono-font-feature-settings, normal);\n    font-variation-settings: var(--default-mono-font-variation-settings, normal);\n    font-size: 1em;\n  }\n  small {\n    font-size: 80%;\n  }\n  sub, sup {\n    font-size: 75%;\n    line-height: 0;\n    position: relative;\n    vertical-align: baseline;\n  }\n  sub {\n    bottom: -0.25em;\n  }\n  sup {\n    top: -0.5em;\n  }\n  table {\n    text-indent: 0;\n    border-color: inherit;\n    border-collapse: collapse;\n  }\n  :-moz-focusring {\n    outline: auto;\n  }\n  progress {\n    vertical-align: baseline;\n  }\n  summary {\n    display: list-item;\n  }\n  ol, ul, menu {\n    list-style: none;\n  }\n  img, svg, video, canvas, audio, iframe, embed, object {\n    display: block;\n    vertical-align: middle;\n  }\n  img, video {\n    max-width: 100%;\n    height: auto;\n  }\n  button, input, select, optgroup, textarea, ::file-selector-button {\n    font: inherit;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n    border-radius: 0;\n    background-color: transparent;\n    opacity: 1;\n  }\n  :where(select:is([multiple], [size])) optgroup {\n    font-weight: bolder;\n  }\n  :where(select:is([multiple], [size])) optgroup option {\n    padding-inline-start: 20px;\n  }\n  ::file-selector-button {\n    margin-inline-end: 4px;\n  }\n  ::placeholder {\n    opacity: 1;\n  }\n  @supports (not (-webkit-appearance: -apple-pay-button))  or (contain-intrinsic-size: 1px) {\n    ::placeholder {\n      color: currentcolor;\n      @supports (color: color-mix(in lab, red, red)) {\n        color: color-mix(in oklab, currentcolor 50%, transparent);\n      }\n    }\n  }\n  textarea {\n    resize: vertical;\n  }\n  ::-webkit-search-decoration {\n    -webkit-appearance: none;\n  }\n  ::-webkit-date-and-time-value {\n    min-height: 1lh;\n    text-align: inherit;\n  }\n  ::-webkit-datetime-edit {\n    display: inline-flex;\n  }\n  ::-webkit-datetime-edit-fields-wrapper {\n    padding: 0;\n  }\n  ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {\n    padding-block: 0;\n  }\n  ::-webkit-calendar-picker-indicator {\n    line-height: 1;\n  }\n  :-moz-ui-invalid {\n    box-shadow: none;\n  }\n  button, input:where([type="button"], [type="reset"], [type="submit"]), ::file-selector-button {\n    appearance: button;\n  }\n  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {\n    height: auto;\n  }\n  [hidden]:where(:not([hidden="until-found"])) {\n    display: none !important;\n  }\n}\n@layer utilities {\n  .pointer-events-none {\n    pointer-events: none;\n  }\n  .visible {\n    visibility: visible;\n  }\n  .absolute {\n    position: absolute;\n  }\n  .fixed {\n    position: fixed;\n  }\n  .relative {\n    position: relative;\n  }\n  .static {\n    position: static;\n  }\n  .inset-0 {\n    inset: calc(var(--spacing) * 0);\n  }\n  .top-0 {\n    top: calc(var(--spacing) * 0);\n  }\n  .left-0 {\n    left: calc(var(--spacing) * 0);\n  }\n  .isolate {\n    isolation: isolate;\n  }\n  .z-0 {\n    z-index: 0;\n  }\n  .container {\n    width: 100%;\n    @media (width >= 40rem) {\n      max-width: 40rem;\n    }\n    @media (width >= 48rem) {\n      max-width: 48rem;\n    }\n    @media (width >= 64rem) {\n      max-width: 64rem;\n    }\n    @media (width >= 80rem) {\n      max-width: 80rem;\n    }\n    @media (width >= 96rem) {\n      max-width: 96rem;\n    }\n  }\n  .mb-4 {\n    margin-bottom: calc(var(--spacing) * 4);\n  }\n  .block {\n    display: block;\n  }\n  .contents {\n    display: contents;\n  }\n  .flex {\n    display: flex;\n  }\n  .grid {\n    display: grid;\n  }\n  .hidden {\n    display: none;\n  }\n  .inline-block {\n    display: inline-block;\n  }\n  .inline-flex {\n    display: inline-flex;\n  }\n  .table {\n    display: table;\n  }\n  .size-auto {\n    width: auto;\n    height: auto;\n  }\n  .h-full {\n    height: 100%;\n  }\n  .min-h-0 {\n    min-height: calc(var(--spacing) * 0);\n  }\n  .min-h-5 {\n    min-height: calc(var(--spacing) * 5);\n  }\n  .w-full {\n    width: 100%;\n  }\n  .max-w-full {\n    max-width: 100%;\n  }\n  .min-w-0 {\n    min-width: calc(var(--spacing) * 0);\n  }\n  .min-w-5 {\n    min-width: calc(var(--spacing) * 5);\n  }\n  .flex-1 {\n    flex: 1;\n  }\n  .flex-shrink {\n    flex-shrink: 1;\n  }\n  .flex-shrink-0 {\n    flex-shrink: 0;\n  }\n  .flex-grow {\n    flex-grow: 1;\n  }\n  .grow {\n    flex-grow: 1;\n  }\n  .border-collapse {\n    border-collapse: collapse;\n  }\n  .-translate-x-1 {\n    --tw-translate-x: calc(var(--spacing) * -1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n  .-translate-y-1 {\n    --tw-translate-y: calc(var(--spacing) * -1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n  .transform {\n    transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);\n  }\n  .cursor-pointer {\n    cursor: pointer;\n  }\n  .resize {\n    resize: both;\n  }\n  .flex-col {\n    flex-direction: column;\n  }\n  .flex-wrap {\n    flex-wrap: wrap;\n  }\n  .items-center {\n    align-items: center;\n  }\n  .justify-between {\n    justify-content: space-between;\n  }\n  .justify-center {\n    justify-content: center;\n  }\n  .gap-1 {\n    gap: calc(var(--spacing) * 1);\n  }\n  .gap-2 {\n    gap: calc(var(--spacing) * 2);\n  }\n  .truncate {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  .overflow-hidden {\n    overflow: hidden;\n  }\n  .rounded-2xl {\n    border-radius: var(--radius-2xl);\n  }\n  .rounded-full {\n    border-radius: calc(infinity * 1px);\n  }\n  .rounded-none {\n    border-radius: 0;\n  }\n  .border {\n    border-style: var(--tw-border-style);\n    border-width: 1px;\n  }\n  .border-b {\n    border-bottom-style: var(--tw-border-style);\n    border-bottom-width: 1px;\n  }\n  .border-none {\n    --tw-border-style: none;\n    border-style: none;\n  }\n  .object-fill {\n    object-fit: fill;\n  }\n  .object-center {\n    object-position: center;\n  }\n  .p-0 {\n    padding: calc(var(--spacing) * 0);\n  }\n  .p-8 {\n    padding: calc(var(--spacing) * 8);\n  }\n  .px-3 {\n    padding-inline: calc(var(--spacing) * 3);\n  }\n  .px-4 {\n    padding-inline: calc(var(--spacing) * 4);\n  }\n  .py-1 {\n    padding-block: calc(var(--spacing) * 1);\n  }\n  .py-3 {\n    padding-block: calc(var(--spacing) * 3);\n  }\n  .text-center {\n    text-align: center;\n  }\n  .text-sm {\n    font-size: var(--text-sm);\n    line-height: var(--tw-leading, var(--text-sm--line-height));\n  }\n  .text-xs {\n    font-size: var(--text-xs);\n    line-height: var(--tw-leading, var(--text-xs--line-height));\n  }\n  .leading-tight {\n    --tw-leading: var(--leading-tight);\n    line-height: var(--leading-tight);\n  }\n  .font-medium {\n    --tw-font-weight: var(--font-weight-medium);\n    font-weight: var(--font-weight-medium);\n  }\n  .font-semibold {\n    --tw-font-weight: var(--font-weight-semibold);\n    font-weight: var(--font-weight-semibold);\n  }\n  .text-\\[var\\(--primary-color\\)\\] {\n    color: var(--primary-color);\n  }\n  .text-\\[var\\(--secondary-text-color\\)\\] {\n    color: var(--secondary-text-color);\n  }\n  .text-white {\n    color: var(--color-white);\n  }\n  .underline {\n    text-decoration-line: underline;\n  }\n  .shadow {\n    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .ring {\n    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .outline {\n    outline-style: var(--tw-outline-style);\n    outline-width: 1px;\n  }\n  .filter {\n    filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);\n  }\n  .transition {\n    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, -webkit-backdrop-filter, backdrop-filter, display, content-visibility, overlay, pointer-events;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .ease-in-out {\n    --tw-ease: var(--ease-in-out);\n    transition-timing-function: var(--ease-in-out);\n  }\n  .ease-out {\n    --tw-ease: var(--ease-out);\n    transition-timing-function: var(--ease-out);\n  }\n}\n:host {\n  display: block;\n  width: 100%;\n  height: 100%;\n  min-height: 0;\n  max-width: none;\n  max-height: none;\n  flex: 1 1 0;\n  box-sizing: border-box;\n  --ha-card-background: var(--ha-card-background, #1e1e1e);\n  --primary-color: var(--primary-color, #03a9f4);\n  --primary-text-color: var(--primary-text-color, #e1e1e1);\n  --secondary-text-color: var(--secondary-text-color, #b0b0b0);\n  --secondary-background-color: var(--secondary-background-color, rgba(255, 255, 255, 0.05));\n  --divider-color: var(--divider-color, rgba(0, 0, 0, 0.12));\n  --error-color: var(--error-color, #db4437);\n  --filter-tab-inactive-color: var(--secondary-text-color, rgba(255, 255, 255, 0.7));\n  --filter-tab-inactive-bg: var(--secondary-background-color, rgba(0, 0, 0, 0.08));\n  --filter-tab-inactive-hover-color: var(--primary-text-color, rgba(255, 255, 255, 0.9));\n  --filter-tab-inactive-hover-bg: var(--secondary-background-color, rgba(0, 0, 0, 0.14));\n}\n@media (prefers-color-scheme: light) {\n  :host {\n    --secondary-background-color: var(--secondary-background-color, rgba(0, 0, 0, 0.06));\n    --divider-color: var(--divider-color, rgba(0, 0, 0, 0.08));\n    --filter-tab-inactive-color: var(--secondary-text-color, rgba(0, 0, 0, 0.65));\n    --filter-tab-inactive-bg: var(--secondary-background-color, rgba(0, 0, 0, 0.06));\n    --filter-tab-inactive-hover-color: var(--primary-text-color, rgba(0, 0, 0, 0.9));\n    --filter-tab-inactive-hover-bg: var(--secondary-background-color, rgba(0, 0, 0, 0.1));\n  }\n}\nha-card {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  min-height: 0;\n  max-width: none;\n  max-height: none;\n  overflow: hidden;\n  box-sizing: border-box;\n  flex: 1 1 0;\n}\nha-card.full-height {\n  flex: 1 1 0;\n  min-height: 0;\n}\n@property --tw-translate-x {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-translate-y {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-translate-z {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-rotate-x {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-rotate-y {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-rotate-z {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-skew-x {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-skew-y {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-border-style {\n  syntax: "*";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-leading {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-font-weight {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-inset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-ring-inset {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-offset-width {\n  syntax: "<length>";\n  inherits: false;\n  initial-value: 0px;\n}\n@property --tw-ring-offset-color {\n  syntax: "*";\n  inherits: false;\n  initial-value: #fff;\n}\n@property --tw-ring-offset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-outline-style {\n  syntax: "*";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-blur {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-brightness {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-contrast {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-grayscale {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-hue-rotate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-invert {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-opacity {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-saturate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-sepia {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-drop-shadow-size {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ease {\n  syntax: "*";\n  inherits: false;\n}\n@layer properties {\n  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {\n    *, ::before, ::after, ::backdrop {\n      --tw-translate-x: 0;\n      --tw-translate-y: 0;\n      --tw-translate-z: 0;\n      --tw-rotate-x: initial;\n      --tw-rotate-y: initial;\n      --tw-rotate-z: initial;\n      --tw-skew-x: initial;\n      --tw-skew-y: initial;\n      --tw-border-style: solid;\n      --tw-leading: initial;\n      --tw-font-weight: initial;\n      --tw-shadow: 0 0 #0000;\n      --tw-shadow-color: initial;\n      --tw-shadow-alpha: 100%;\n      --tw-inset-shadow: 0 0 #0000;\n      --tw-inset-shadow-color: initial;\n      --tw-inset-shadow-alpha: 100%;\n      --tw-ring-color: initial;\n      --tw-ring-shadow: 0 0 #0000;\n      --tw-inset-ring-color: initial;\n      --tw-inset-ring-shadow: 0 0 #0000;\n      --tw-ring-inset: initial;\n      --tw-ring-offset-width: 0px;\n      --tw-ring-offset-color: #fff;\n      --tw-ring-offset-shadow: 0 0 #0000;\n      --tw-outline-style: solid;\n      --tw-blur: initial;\n      --tw-brightness: initial;\n      --tw-contrast: initial;\n      --tw-grayscale: initial;\n      --tw-hue-rotate: initial;\n      --tw-invert: initial;\n      --tw-opacity: initial;\n      --tw-saturate: initial;\n      --tw-sepia: initial;\n      --tw-drop-shadow: initial;\n      --tw-drop-shadow-color: initial;\n      --tw-drop-shadow-alpha: 100%;\n      --tw-drop-shadow-size: initial;\n      --tw-ease: initial;\n    }\n  }\n}\n',zs="room-plan-card";window.customCards=window.customCards??[],window.customCards.push({type:"custom:"+zs,name:"Interaktiver Raumplan",description:"Raumplan als Bild mit Entitäten (React + Tailwind)",preview:!1});class Os extends HTMLElement{constructor(){super(...arguments),this._config={type:"",image:"",entities:[]},this._hass=null}static getConfigElement(){return document.createElement("room-plan-editor")}static getStubConfig(){return{image:"/local/raumplan.png",rotation:0,entities:[{entity:"light.example",x:25,y:30,scale:1,color:"#ffc107"},{entity:"sensor.example",x:75,y:40,scale:1}]}}setConfig(t){this._config=function(t){const e=t.config??t,n=e?.image&&"string"==typeof e.image?e.image:e?.image?.location??"",i=Array.isArray(e?.rooms)?e.rooms:void 0,r=Array.isArray(e?.buildings)?e.buildings:void 0;return{type:e?.type??t?.type??"custom:room-plan-card",image:n,entities:Array.isArray(e?.entities)?e.entities:[],rooms:i,buildings:r,title:e?.title??"",rotation:Number(e?.rotation)??0,full_height:e?.full_height??!1,tap_action:e?.tap_action,hold_action:e?.hold_action,double_tap_action:e?.double_tap_action,entity_filter:Array.isArray(e?.entity_filter)?e.entity_filter:void 0,alert_entities:Array.isArray(e?.alert_entities)?e.alert_entities:void 0,alert_badge_action:e?.alert_badge_action,categories:Array.isArray(e?.categories)?e.categories:void 0,image_dark:e?.image_dark,dark_mode_filter:e?.dark_mode_filter,dark_mode:e?.dark_mode,plan_offset_x:Number(e?.plan_offset_x)||0,plan_offset_y:Number(e?.plan_offset_y)||0}}(t??{type:"",image:"",entities:[]}),this._render()}set hass(t){this._hass=t,this._render()}getCardSize(){return this._config?.full_height?1:10}getGridOptions(){return this._config?.full_height?{rows:1,columns:1,min_rows:1,min_columns:1}:{rows:10,columns:12,min_rows:4,min_columns:4}}_render(){if(this.closest?.(".element-preview"))return void(this.style.display="none");if(!this._hass)return;this.style.display="block",this.style.width="100%",this.style.height="100%",this.style.minHeight="0",this.style.flex="1 1 0",this.style.boxSizing="border-box",this.shadowRoot||this.attachShadow({mode:"open"});const t=Bs,e=this.shadowRoot;bn(Se(Fs,{hass:this._hass,config:this._config,host:this,cssString:t}),e)}}function Ls({hass:t,config:e}){const n=e.entity??"",i=n?t?.states?.[n]:null,r=i?.state??"–",o=i?.attributes?.friendly_name??(n||"Keine Entität");return Se("div",{style:Us.card,children:[Se("h2",{style:Us.title,children:e.title??"React Demo"}),Se("p",{style:Us.entity,children:[Se("strong",{children:o}),": ",r]}),Se("p",{style:Us.hint,children:"Preact in Web Component (Shadow DOM)"})]})}customElements.define(zs,Os);const Us={card:{padding:16,fontFamily:"var(--mdc-typography-font-family, Roboto, sans-serif)"},title:{margin:"0 0 12px",fontSize:"1.1rem",color:"var(--primary-text-color, #e1e1e1)"},entity:{margin:"0 0 8px",fontSize:"0.9rem",color:"var(--secondary-text-color, #b0b0b0)"},hint:{margin:0,fontSize:"0.75rem",opacity:.8}},Hs="react-demo-card";window.customCards=window.customCards??[],window.customCards.push({type:"custom:"+Hs,name:"React Demo Card",description:"Beispiel-Card mit React/Preact in einer Web Component"});class js extends HTMLElement{constructor(){super(...arguments),this._config={type:""},this._hass=null,this._lastRenderedEntityState=null,this._lastRenderedEntityId=""}static getConfigElement(){return document.createElement("div")}static getStubConfig(){return{type:"custom:"+Hs,title:"React Demo",entity:"sensor.date"}}setConfig(t){this._config=t??{type:""},this._lastRenderedEntityId="",this._lastRenderedEntityState=null,this._hass&&this._maybeRender()}set hass(t){this._hass=t,this._maybeRender()}_maybeRender(){const t=this._hass,e=this._config.entity??"",n=e&&t?.states?.[e]?t.states[e].state??null:null;(!this.shadowRoot||this._lastRenderedEntityId!==e||this._lastRenderedEntityState!==n)&&(this._lastRenderedEntityId=e,this._lastRenderedEntityState=n,this._render())}_render(){if(!this._hass)return;this.shadowRoot||this.attachShadow({mode:"open"});const t=this.shadowRoot;bn(Se(Ls,{hass:this._hass,config:this._config}),t)}getCardSize(){return 2}}customElements.define(Hs,js);